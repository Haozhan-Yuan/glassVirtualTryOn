/**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( JeelizÂ® - https://jeeliz.com )
 *
 * This software library is the proprietary and confidential information of
 * Jeeliz ("Licensor"). You may only use this software library if
 * you have obtained a valid commercial license from Licensor. If you have not
 * obtained a valid commercial license from Licensor, please check out
 * https://jeeliz.com/#pricing for licensing options and pricing.
 *
 * Unauthorized use, reproduction, or distribution of this software library or
 * any portion thereof may result in severe civil and criminal penalties, and
 * will be prosecuted to the maximum extent possible under the law.
 *
 * THIS SOFTWARE LIBRARY IS PROVIDED "AS IS" AND WITHOUT ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL LICENSOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
 * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE LIBRARY, EVEN
 * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

 

/* eslint-disable */
let JEELIZVTO=null;let JEELIZVTOWIDGET=null;var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(ja,pa){return Object.prototype.hasOwnProperty.call(ja,pa)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(ja,pa,ra){if(ja==Array.prototype||ja==Object.prototype)return ja;ja[pa]=ra.value;return ja};
$jscomp.getGlobal=function(ja){ja=["object"==typeof globalThis&&globalThis,ja,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var pa=0;pa<ja.length;++pa){var ra=ja[pa];if(ra&&ra.Math==Math)return ra}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;
$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(ja,pa){var ra=$jscomp.propertyToPolyfillSymbol[pa];if(null==ra)return ja[pa];ra=ja[ra];return void 0!==ra?ra:ja[pa]};$jscomp.polyfill=function(ja,pa,ra,Oa){pa&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(ja,pa,ra,Oa):$jscomp.polyfillUnisolated(ja,pa,ra,Oa))};
$jscomp.polyfillUnisolated=function(ja,pa,ra,Oa){ra=$jscomp.global;ja=ja.split(".");for(Oa=0;Oa<ja.length-1;Oa++){var va=ja[Oa];if(!(va in ra))return;ra=ra[va]}ja=ja[ja.length-1];Oa=ra[ja];pa=pa(Oa);pa!=Oa&&null!=pa&&$jscomp.defineProperty(ra,ja,{configurable:!0,writable:!0,value:pa})};
$jscomp.polyfillIsolated=function(ja,pa,ra,Oa){var va=ja.split(".");ja=1===va.length;Oa=va[0];Oa=!ja&&Oa in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var tb=0;tb<va.length-1;tb++){var ta=va[tb];if(!(ta in Oa))return;Oa=Oa[ta]}va=va[va.length-1];ra=$jscomp.IS_SYMBOL_NATIVE&&"es6"===ra?Oa[va]:null;pa=pa(ra);null!=pa&&(ja?$jscomp.defineProperty($jscomp.polyfills,va,{configurable:!0,writable:!0,value:pa}):pa!==ra&&($jscomp.propertyToPolyfillSymbol[va]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(va):
$jscomp.POLYFILL_PREFIX+va,va=$jscomp.propertyToPolyfillSymbol[va],$jscomp.defineProperty(Oa,va,{configurable:!0,writable:!0,value:pa})))};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(ja,pa){for(var ra=1;ra<arguments.length;ra++){var Oa=arguments[ra];if(Oa)for(var va in Oa)$jscomp.owns(Oa,va)&&(ja[va]=Oa[va])}return ja};$jscomp.polyfill("Object.assign",function(ja){return ja||$jscomp.assign},"es6","es3");
$jscomp.arrayIteratorImpl=function(ja){var pa=0;return function(){return pa<ja.length?{done:!1,value:ja[pa++]}:{done:!0}}};$jscomp.arrayIterator=function(ja){return{next:$jscomp.arrayIteratorImpl(ja)}};$jscomp.makeIterator=function(ja){var pa="undefined"!=typeof Symbol&&Symbol.iterator&&ja[Symbol.iterator];return pa?pa.call(ja):$jscomp.arrayIterator(ja)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(ja){function pa(){this.batch_=null}function ra(ta){return ta instanceof va?ta:new va(function(Ja,Ua){Ja(ta)})}if(ja&&!$jscomp.FORCE_POLYFILL_PROMISE)return ja;pa.prototype.asyncExecute=function(ta){if(null==this.batch_){this.batch_=[];var Ja=this;this.asyncExecuteFunction(function(){Ja.executeBatch_()})}this.batch_.push(ta)};var Oa=$jscomp.global.setTimeout;pa.prototype.asyncExecuteFunction=function(ta){Oa(ta,0)};pa.prototype.executeBatch_=function(){for(;this.batch_&&
this.batch_.length;){var ta=this.batch_;this.batch_=[];for(var Ja=0;Ja<ta.length;++Ja){var Ua=ta[Ja];ta[Ja]=null;try{Ua()}catch(eb){this.asyncThrow_(eb)}}}this.batch_=null};pa.prototype.asyncThrow_=function(ta){this.asyncExecuteFunction(function(){throw ta;})};var va=function(ta){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var Ja=this.createResolveAndReject_();try{ta(Ja.resolve,Ja.reject)}catch(Ua){Ja.reject(Ua)}};va.prototype.createResolveAndReject_=function(){function ta(eb){return function(qb){Ua||
(Ua=!0,eb.call(Ja,qb))}}var Ja=this,Ua=!1;return{resolve:ta(this.resolveTo_),reject:ta(this.reject_)}};va.prototype.resolveTo_=function(ta){if(ta===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(ta instanceof va)this.settleSameAsPromise_(ta);else{a:switch(typeof ta){case "object":var Ja=null!=ta;break a;case "function":Ja=!0;break a;default:Ja=!1}Ja?this.resolveToNonPromiseObj_(ta):this.fulfill_(ta)}};va.prototype.resolveToNonPromiseObj_=function(ta){var Ja=void 0;
try{Ja=ta.then}catch(Ua){this.reject_(Ua);return}"function"==typeof Ja?this.settleSameAsThenable_(Ja,ta):this.fulfill_(ta)};va.prototype.reject_=function(ta){this.settle_(2,ta)};va.prototype.fulfill_=function(ta){this.settle_(1,ta)};va.prototype.settle_=function(ta,Ja){if(0!=this.state_)throw Error("Cannot settle("+ta+", "+Ja+"): Promise already settled in state"+this.state_);this.state_=ta;this.result_=Ja;this.executeOnSettledCallbacks_()};va.prototype.executeOnSettledCallbacks_=function(){if(null!=
this.onSettledCallbacks_){for(var ta=0;ta<this.onSettledCallbacks_.length;++ta)tb.asyncExecute(this.onSettledCallbacks_[ta]);this.onSettledCallbacks_=null}};var tb=new pa;va.prototype.settleSameAsPromise_=function(ta){var Ja=this.createResolveAndReject_();ta.callWhenSettled_(Ja.resolve,Ja.reject)};va.prototype.settleSameAsThenable_=function(ta,Ja){var Ua=this.createResolveAndReject_();try{ta.call(Ja,Ua.resolve,Ua.reject)}catch(eb){Ua.reject(eb)}};va.prototype.then=function(ta,Ja){function Ua(zb,Kb){return"function"==
typeof zb?function(Vb){try{eb(zb(Vb))}catch(Wb){qb(Wb)}}:Kb}var eb,qb,Xb=new va(function(zb,Kb){eb=zb;qb=Kb});this.callWhenSettled_(Ua(ta,eb),Ua(Ja,qb));return Xb};va.prototype.catch=function(ta){return this.then(void 0,ta)};va.prototype.callWhenSettled_=function(ta,Ja){function Ua(){switch(eb.state_){case 1:ta(eb.result_);break;case 2:Ja(eb.result_);break;default:throw Error("Unexpected state: "+eb.state_);}}var eb=this;null==this.onSettledCallbacks_?tb.asyncExecute(Ua):this.onSettledCallbacks_.push(Ua)};
va.resolve=ra;va.reject=function(ta){return new va(function(Ja,Ua){Ua(ta)})};va.race=function(ta){return new va(function(Ja,Ua){for(var eb=$jscomp.makeIterator(ta),qb=eb.next();!qb.done;qb=eb.next())ra(qb.value).callWhenSettled_(Ja,Ua)})};va.all=function(ta){var Ja=$jscomp.makeIterator(ta),Ua=Ja.next();return Ua.done?ra([]):new va(function(eb,qb){function Xb(Vb){return function(Wb){zb[Vb]=Wb;Kb--;0==Kb&&eb(zb)}}var zb=[],Kb=0;do zb.push(void 0),Kb++,ra(Ua.value).callWhenSettled_(Xb(zb.length-1),qb),
Ua=Ja.next();while(!Ua.done)})};return va},"es6","es3");$jscomp.polyfill("Math.log2",function(ja){return ja?ja:function(pa){return Math.log(pa)/Math.LN2}},"es6","es3");$jscomp.findInternal=function(ja,pa,ra){ja instanceof String&&(ja=String(ja));for(var Oa=ja.length,va=0;va<Oa;va++){var tb=ja[va];if(pa.call(ra,tb,va,ja))return{i:va,v:tb}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(ja){return ja?ja:function(pa,ra){return $jscomp.findInternal(this,pa,ra).v}},"es6","es3");
$jscomp.polyfill("Object.is",function(ja){return ja?ja:function(pa,ra){return pa===ra?0!==pa||1/pa===1/ra:pa!==pa&&ra!==ra}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(ja){return ja?ja:function(pa,ra){var Oa=this;Oa instanceof String&&(Oa=String(Oa));var va=Oa.length;ra=ra||0;for(0>ra&&(ra=Math.max(ra+va,0));ra<va;ra++){var tb=Oa[ra];if(tb===pa||Object.is(tb,pa))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(ja,pa,ra){if(null==ja)throw new TypeError("The 'this' value for String.prototype."+ra+" must not be null or undefined");if(pa instanceof RegExp)throw new TypeError("First argument to String.prototype."+ra+" must not be a regular expression");return ja+""};$jscomp.polyfill("String.prototype.includes",function(ja){return ja?ja:function(pa,ra){return-1!==$jscomp.checkStringArgs(this,pa,"includes").indexOf(pa,ra||0)}},"es6","es3");
$jscomp.polyfill("Array.prototype.findIndex",function(ja){return ja?ja:function(pa,ra){return $jscomp.findInternal(this,pa,ra).i}},"es6","es3");$jscomp.polyfill("Promise.prototype.finally",function(ja){return ja?ja:function(pa){return this.then(function(ra){return Promise.resolve(pa()).then(function(){return ra})},function(ra){return Promise.resolve(pa()).then(function(){throw ra;})})}},"es9","es3");
$jscomp.polyfill("Math.sign",function(ja){return ja?ja:function(pa){pa=Number(pa);return 0===pa||isNaN(pa)?pa:0<pa?1:-1}},"es6","es3");
var JeelizVTOWidget=function(){function ja(){Sa.mode=ob.realtime;Sa.isRT=!0;Ba.adjust=document.getElementById("JeelizVTOWidgetAdjust");if(Ba.adjust){Ba.adjustNotice=document.getElementById("JeelizVTOWidgetAdjustNotice");Ba.adjustExit=document.getElementById("JeelizVTOWidgetAdjustExit");Ba.changeModelContainer=document.getElementById("JeelizVTOWidgetChangeModelContainer");Ba.buttonResizeCanvas=document.getElementById("buttonResizeCanvas");var ea=Ba.adjust;ea&&ea.addEventListener("click",Xb,!1);(ea=
Ba.adjustExit)&&ea.addEventListener("click",zb,!1);[Ba.adjust,Ba.changeModelContainer,Ba.buttonResizeCanvas].forEach(ra)}Yb.enabled&&Va.do_instantDetection(Yb.interval,Yb.callback);gc&&(gc(!0),gc=null)}function pa(){var ea=document.createElement("style");ea.setAttribute("type","text/css");ea.innerHTML="._jeelizVTOForceHide { display: none!important }._jeelizVTOForceShow { display: revert!important }";var ha=document.getElementsByTagName("head");1<=ha.length?ha[0].appendChild(ea):document.body.appendChild(ea)}
function ra(ea){ea&&(ea.classList.remove("_jeelizVTOForceHide"),"none"===window.getComputedStyle(ea).display&&ea.classList.add("_jeelizVTOForceShow"))}function Oa(ea){ea&&(ea.classList.add("_jeelizVTOForceHide"),ea.classList.remove("_jeelizVTOForceShow"))}function va(ea,ha){if(ea)for(var Fa in ha)ea.style[Fa]=ha[Fa]}function tb(ea){if(!ea)return{width:0,height:0};ea=ea.getBoundingClientRect();return{width:ea.width,height:ea.height}}function ta(ea){return new Promise(function(ha,Fa){var Na=new XMLHttpRequest;
Na.open("GET",ea,!0);Na.onreadystatechange=function(){if(4===Na.readyState)if(200===Na.status||0===Na.status)try{var Ka=JSON.parse(Na.responseText);ha(Ka)}catch(wb){Fa("INVALID JSON")}else Fa("HTTP ERROR "+Na.status)};Na.send()})}function Ja(ea,ha){return new Promise(function(Fa,Na){ta(ea).then(function(Ka){Qc(ha,Ka,Fa)}).catch(Na)})}function Ua(){xb.toggle_loading(!1);Sa.mode=ob.realtime;eb("INVALID_SKU")}function eb(ea){Cc.error?Cc.error(ea):console.log("ERROR:",ea)}function qb(ea){var ha=tb(Ba.container),
Fa=Math.abs(kb.displayWidth-ha.width),Na=Math.abs(kb.displayHeight-ha.height);if(!ea&&1>=Fa&&1>=Na)console.log("INFO in JeelizVTOWidget.resize: resolution difference too small abord resize");else if(kb.displayWidth=ha.width,kb.displayHeight=ha.height,console.log("INFO in JeelizVTOWidget.resize: width = "+kb.displayWidth.toString()+" height = "+kb.displayHeight.toString()+" oFactor = "+(1).toString()),kb.cvWidth=Math.round(1*kb.displayWidth),kb.cvHeight=Math.round(1*kb.displayHeight),va(Ba.cv,{width:kb.displayWidth.toString()+
"px",height:kb.displayHeight.toString()+"px"}),Ba.cv.width=kb.cvWidth,Ba.cv.height=kb.cvHeight,Va)if(Sa.mode===ob.notLoaded)Va.set_size(kb.cvWidth,kb.cvHeight,!1);else Va.onLoad(function(){Va.resize(kb.cvWidth,kb.cvHeight,!1,ea)})}function Xb(){[Ba.adjust,Ba.changeModelContainer,Ba.buttonResizeCanvas].forEach(Oa);Sa.mode=ob.adjust;[Ba.adjustNotice,Ba.adjustExit].forEach(ra);Ba.cv.style.cursor="move";Va.switch_modeInteractor("movePinch");rc("ADJUST_START")}function zb(){[Ba.adjustNotice,Ba.adjustExit].forEach(Oa);
[Ba.adjust,Ba.changeModelContainer,Ba.buttonResizeCanvas].forEach(ra);Ba.cv.style.cursor="auto";Sa.mode=Sa.realtime;Va.switch_modeInteractor("idle");rc("ADJUST_END")}function Kb(){if(!Ba.trackIframe){var ea=sc.appstaticURL+"jeewidget/";Ba.trackIframe=document.createElement("iframe");Ba.trackIframe.width="10";Ba.trackIframe.height="10";Ba.trackIframe.src=ea+"trackIframe.html";va(Ba.trackIframe,{position:"absolute",zIndex:-1,bottom:"0",right:"0"});Ba.container.appendChild(Ba.trackIframe)}}function Vb(ea,
ha){Sa.mode=ob.realtime;ha&&ha();xb.toggle_loading(!1);if(Ba.trackIframe){ha=location.href.split("?").shift().split("://").pop();ha=ha.split("/").shift();ha=ha.split("www.").pop();try{Ba.trackIframe.contentWindow.postMessage({action:"COUNTTRYONSESSION",domain:ha,sku:ea},"*")}catch(Fa){}}}function Wb(ea,ha,Fa,Na){var Ka=ha.mod+".json";ha.isStandalone?Ja(Dc+"models3DStandalone/"+Ka,ea).then(Fa):Va.load_model(Ka,ha.mats,Vb.bind(null,ea,Fa),ea,Na)}function Qc(ea,ha,Fa){Va.set_modelStandalone(ha,Vb.bind(null,
ea,Fa),ea)}function rc(ea){(ea=Rc[ea])&&ea()}function Sc(){Ec&&Ec.detach();Ec=new ld(Ba.container,function(ea){qb(!1)})}var id=function(){function ea(a,b){return a[0]*(1-b)+a[1]*b}function ha(a,b){var d=new XMLHttpRequest;d.open("GET",a,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||b(d.responseText)};d.send()}function Fa(a,b){ha(a+"",function(d){b(JSON.parse(d))})}function Na(a,b){if(0===b||"object"!==typeof a)return a;a=Object.assign({},
a);b=void 0===b||-1===b?-1:b-1;for(var d in a)a[d]=Na(a[d],b);return a}function Ka(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1}function wb(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";
case "copy":return"";case "gelu":return"gl_FragColor=gl_FragColor;\n          vec4 zou=gl_FragColor;\n          vec4 polyZou=0.7978845608028654*(zou+0.044715*zou*zou*zou);\n          vec4 exZou=exp(-abs(polyZou));\n          vec4 exZou2=exZou*exZou;\n          vec4 tanhZou=sign(polyZou)*(vec4(1.)-exZou2)/(vec4(1.)+exZou2);\n          gl_FragColor=0.5*zou*(vec4(1.)+tanhZou);";default:return!1}}function La(a,b){var d=b%8;return a[(b-d)/8]>>7-d&1}function lb(a,b,d){var f=1,l=0;for(d=b+d-1;d>=b;--d)l+=
f*La(a,d),f*=2;return l}function Ab(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var b=a.length,d=new Uint8Array(b),f=0;f<b;++f)d[f]=a.charCodeAt(f);return d}function Fb(a){return"string"===typeof a?JSON.parse(a):a}function Ob(a){return"undefined"===typeof Fb(a).nb?Lb(a):Zb(a)}function Zb(a){var b=Fb(a);a=b.nb;if(0===a)return new Uint8Array(b.nb);var d=b.n;b=Ab(b);for(var f=new Uint32Array(d),l=0;l<d;++l)f[l]=lb(b,l*a,a);return f}function Lb(a){var b=
Fb(a);a=b.ne;var d=b.nf,f=b.n;b=Ab(b);for(var l=new Float32Array(f),p=new Float32Array(d),w=a+d+1,h=0;h<f;++h){var m=w*h,q=0===La(b,m)?1:-1,y=lb(b,m+1,a);m=m+1+a;for(var I=p.length,u=0,x=m;x<m+I;++x)p[u]=La(b,x),++u;for(I=m=0;I<d;++I)m+=p[I]*Math.pow(2,-I-1);l[h]=0===m&&0===y?0:q*(1+m)*Math.pow(2,1+y-Math.pow(2,a-1))}return l}function hc(a){var b=null,d=null,f=null,l=0,p=this,w=null,h={Nc:[],be:"none",ig:!1,ae:null,grid:null};this.m=function(){this.$k(w.Nc);f.Eo({be:w.be,ig:w.ig,ae:w.ae})};this.em=
function(m){return b[m]};this.we=function(m){["s32","s34","s27"].forEach(function(q){aa.j(q,[{type:"2f",name:"u20",value:m}])});b&&b.forEach(function(q){q.we(m)})};this.$k=function(m){var q=null;l=m.length;var y=null!==w.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),I=y?w.grid:[1,1];y&&this.we(I);b=m.map(function(u,x){u=Object.assign({},u,{index:x,parent:p,ge:q,Om:x===l-1,Ic:y,za:I});return q=0===x?md.instance(u):nd.instance(u)});d=b[0];f=b[l-1];b.forEach(function(u,x){0!==x&&u.Cn()})};this.Aa=
function(m){m.h(0);var q=m;b.forEach(function(y){q=y.Aa(q,!1)});return q};this.ci=function(){return d.dm()};this.Fc=function(){return f.hm()};this.Zh=function(){return f.Zh()};this.A=function(){b&&(b.forEach(function(m){m.A()}),f=d=b=null,l=0)};"undefined"!==typeof a&&(w=Object.assign({},h,a),this.m())}function Mb(a,b){a[b]=!0;a.setAttribute(b,"true")}function tc(a,b){window.addEventListener("beforeunload",function(){b&&b.getTracks&&b.getTracks().forEach(function(d){b.removeTrack(d)});a.videoStream&&
a.videoStream.stop();a.videoStream=null},!1)}function uc(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function ic(a){if(!a)return a;var b=null;if(a.video){var d=function(f){return f&&"object"===typeof f?Object.assign({},f):f};b={};"undefined"!==typeof a.video.width&&(b.width=d(a.video.width));"undefined"!==typeof a.video.height&&(b.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(b.facingMode=d(a.video.facingMode))}b={audio:a.audio,
video:b};"undefined"!==typeof a.deviceId&&vc(b,a.deviceId);return b}function vc(a,b){b&&(a.video=a.video||{},a.video.deviceId={exact:b},a.video.facingMode&&delete a.video.facingMode)}function jc(a){var b=a.video.width;a.video.width=a.video.height;a.video.height=b;return a}function kc(a){function b(u){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(x,z){return Math.abs(x-u)-Math.abs(z-u)})}function d(u){var x=ic(a);u=u(x);l.push(u);f(u)}function f(u){if(u.video&&u.video.facingMode&&
u.video.facingMode.exact){var x=u.video.facingMode.exact;u=ic(u);delete u.video.facingMode.exact;u.video.facingMode.ideal=x;l.push(u)}}var l=[];if(!a||!a.video)return l;f(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=b(a.video.width.ideal).slice(0,3),w=b(a.video.height.ideal).slice(0,3),h={},m=0;for(h.Hb=void 0;m<p.length;h={Hb:h.Hb},++m){h.Hb=p[m];var q={},y=0;for(q.yb=void 0;y<w.length;q={yb:q.yb},++y)if(q.yb=w[y],h.Hb!==a.video.width.ideal||q.yb!==a.video.height.ideal){var I=
Math.max(h.Hb,q.yb)/Math.min(h.Hb,q.yb);I<4/3-.1||I>16/9+.1||d(function(u,x){return function(z){z.video.width.ideal=u.Hb;z.video.height.ideal=x.yb;return z}}(h,q))}}}d(function(u){return jc(u)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(u){delete u.video.width.ideal;delete u.video.height.ideal;return u}),d(function(u){delete u.video.width;delete u.video.height;return u}));a.video.facingMode&&(d(function(u){delete u.video.facingMode;return u}),a.video.width&&
a.video.height&&d(function(u){jc(u);delete u.video.facingMode;return u}));l.push({audio:a.audio,video:!0});return l}function lc(a){a.volume=0;Mb(a,"muted");if(uc()){if(1===a.volume){var b=function(){a.volume=0;window.removeEventListener("mousemove",b,!1);window.removeEventListener("touchstart",b,!1)};window.addEventListener("mousemove",b,!1);window.addEventListener("touchstart",b,!1)}setTimeout(function(){a.volume=0;Mb(a,"muted")},5)}}function wc(a){var b=Da.element,d=Da.zh;return null===b?Promise.resolve():
new Promise(function(f,l){if(b.srcObject&&b.srcObject.getVideoTracks){var p=b.srcObject.getVideoTracks();1!==p.length?l("INVALID_TRACKNUMBER"):(p=p[0],a?Tc(b,f,l,d):(p.stop(),f()))}else l("BAD_IMPLEMENTATION")})}function Uc(a,b,d,f){function l(w){p||(p=!0,d(w))}var p=!1;navigator.mediaDevices.getUserMedia(f).then(function(w){function h(){setTimeout(function(){if(a.currentTime){var q=a.videoHeight;if(0===a.videoWidth||0===q)l("VIDEO_NULLSIZE");else{q={hl:null,Jg:null,kn:null};try{var y=w.getVideoTracks()[0];
y&&(q.kn=y,q.hl=y.getCapabilities(),q.Jg=y.getSettings())}catch(I){}p||(tc(a,w),b(a,w,q))}}else l("VIDEO_NOTSTARTED")},700)}function m(){a.removeEventListener("loadeddata",m,!1);var q=a.play();lc(a);"undefined"===typeof q?h():q.then(function(){h()}).catch(function(){l("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=w:(a.src=window.URL.createObjectURL(w),a.videoStream=w);lc(a);a.addEventListener("loadeddata",m,!1)}).catch(function(w){l(w)})}function Tc(a,b,d,f){a?navigator.mediaDevices&&
navigator.mediaDevices.getUserMedia?(Mb(a,"autoplay"),Mb(a,"playsinline"),f&&f.audio?a.volume=0:Mb(a,"muted"),od(f).then(function(){Uc(a,b,function(){function l(w){if(0===w.length)d("NO_VALID_MEDIASTREAM_FALLBACK_CONSTRAINTS");else{var h=w.shift();Uc(a,b,function(){l(w)},h)}}var p=kc(f);l(p)},f)})):d&&d("MEDIASTREAMAPI_NOT_FOUND"):d&&d("VIDEO_NOT_PROVIDED")}function od(a){if(!a||!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");
var b=a.video.facingMode;b=b.exact||b.ideal;if(!b)return Promise.resolve("NO_FACINGMODE");var d={user:[],environment:["camera2 0"]}[b];return d&&0!==d.length?new Promise(function(f){Vc(function(l){l?(l=l.find(function(p){var w=p.label;return w?d.some(function(h){return w.includes(h)}):!1}))?(a.video.deviceId={exact:l.deviceId},f("SUCCESS")):f("NO_PREFERRED_DEVICE_FOUND"):f("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")}function Vc(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?
navigator.mediaDevices.enumerateDevices().then(function(b){(b=b.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&b.length&&0<b.length?a(b,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}function pd(){function a(K){K=K?xc.lf:1;ia.width=K*J.width;ia.height=K*J.height;return ia}function b(K){var R=K.length-1,Y=K[R];if("data:"===Y.substring(0,5))return Y;for(Y="";0<=R;--R){var la=K[R],Ga="http"===la.substring(0,
4).toLowerCase();Y=la+Y;if(Ga)break}return Y}function d(K,R,Y){return new Promise(function(la){Aa.Mj(R);Ca.ba();rb.isEnabled=!0;Ya.isEnabled=!1;rb.pa||(rb.pa=mc.instance({}));K.ei()&&(rb.pa.Ag(K.ei()),Aa.ra(rb.pa));K.set();Ya.isEnabled=!1;u();var Ga=mb.ai(Y);setTimeout(function(){rb.isEnabled=!1;Aa.Mj(!1);la(Ga)},1)})}function f(K,R){wa.Xc=.5;return new Promise(function(Y){Ya.bc=K;Ya.isEnabled=!0;Ya.D=function(){var la=Wc.instance(R());Ya.D=null;Y(la)}})}function l(K,R){return new Promise(function(Y,
la){Fa(R+K,function(Ga){Ga.error?la("SKU_NOT_FOUND"):Y({ln:Ga.intrinsic.mod+".json",jn:Ga.intrinsic.mats})})})}function p(K,R){var Y=b([J.ea,J.wa,J.Yd+"/"]);R=R.map(function(la){return Y+la});U.model={url:b([J.ea,J.wa,J.Zd+"/"+K]),ac:R,nh:!1,mh:!1};return new Promise(function(la){Ra.Ki(U.model,function(){S.isBusy=!1;la()})})}function w(K,R){if(!R)return K;K=K.slice(0);var Y=ab.xf().map(function(ib){return ib.toLowerCase()}),la;for(la in R){var Ga=R[la],sb=-1;sb="number"===typeof la?la:Y.indexOf(la.toLowerCase());
-1!==sb&&(K[sb]=Ga)}return K}function h(K,R){return new Promise(function(Y,la){S.set_model(K,function(){S.set_materials(R,function(){S.isBusy=!1;Y()})},function(){S.isBusy=!1;la("CANNOT_LOAD_MODEL")})})}function m(K){K&&(z(),K.preOffset&&(Qb=K.preOffset),K.preScale&&($b=K.preScale),K.rx&&(t=K.rx),K.beginBendZ&&(v=K.beginBendZ),K.bendStrength&&(Rb=K.bendStrength),K.maskBranchStartEnd&&(Sb=K.maskBranchStartEnd),S.ready&&Ra.ze())}function q(K){K.tweaker?m(K.tweaker):(z(),S.ready&&Ra.ze())}function y(){S.load_model=
function(K,R,Y,la,Ga,sb){if(S.isBusy)return!1;S.isBusy=!0;R=w(R,Ga);(U.model?h(K,R):p(K,R)).then(Y).catch(sb);return!0};S.set_offset=function(K){na=K;Ra.xe()};S.set_scale=function(K){oa=K;Ra.ye()};S.set_rx=function(K){xa=K;Ra.ak()};S.switch_shadow=Aa.Og;S.switch_bgBlur=Aa.Ng;S.set_zoom=Aa.zg;S.is_viewer3D=function(){return Ea===ua.Ka};S.switch_viewer3D=function(K,R){if(Ea===ua.mc||Ea===ua.nc||Ea===ua.Y&&!K||Ea===ua.Ka&&K||Ya.isEnabled)return!1;if(Ea===ua.va)return vb!==ua.Ka||K?vb===ua.Y&&K?(vb=ua.Ka,
Aa.ra(wa.Gb),Aa.cb(1),R&&R(),!0):!1:(vb=ua.Y,Aa.ra(wa.Ja),Aa.cb(0),R&&R(),!0);var Y=0,la=-1,Ga=0;Ea===ua.Y?(Ea=ua.mc,la=J.mp):Ea===ua.Ka&&(Ea=ua.nc,la=J.pp);var sb=Fc.tf();pb=setInterval(function(){var ib=Fc.tf();Y+=(ib-sb)/la;1<=Y&&(Y=1,Ea===ua.mc?(Ea=ua.Ka,Aa.ra(wa.Gb)):(Ea=ua.Y,Aa.ra(wa.Ja)),R&&R(),clearInterval(pb),pb=null);var Pb=Ea===ua.nc||Ea===ua.Y?1-J.kp(Y):J.jp(Y);Aa.cb(Pb);Ea!==ua.nc&&Ea!==ua.mc||0!==Ga++%2||(Aa.ra(wa.bg),wa.bg.yo(Pb));sb=ib},.016);return!0};S.capture_image=function(K,
R,Y,la){Ya.bc=K;Ya.isEnabled=!0;"undefined"===typeof isAllocate&&(Y=!1);(la="undefined"===typeof la?!1:la)&&Aa.qe(!1);L();Ya.D=function(){Aa.hj(0);c.flush();var Ga=mb.ai(Y);R(Ga);la&&Aa.qe(!0)}};S.capture_detection=function(K,R){var Y=null===ca.Ib?ca.kb:ca.$c;f(K,function(){return{pd:ma.pc.clone(),cg:ab.ii(),Yf:ab.gi(),background:Y.clone(),pa:ya.La.ji().clone(),Xf:nb}}).then(R)};S.process_image=function(K){function R(){return new Promise(function(Bb,ub){Ya.Yg=ib.updateLightInterval;f(ib.nSteps,Y).then(function(jb){Ya.Yg=
3;jb?1>=jb.jm().data[0]?(jb.I(),ub("FACE_NOT_FOUND")):d(jb,ib.isMask,!0).then(function(qd){Aa.ra(wa.Ja);jb.I();Bb(qd)}):ub("CRITICAL")});u()})}function Y(){return{pd:ma.pc.clone(),cg:!1,Yf:!1,background:ca.kb.clone(!0),pa:ya.La.ji().clone()}}function la(){return new Promise(function(Bb,ub){l(ib.modelSKU,ib.glassesDBURL).then(function(jb){S.load_model(jb.ln,jb.jn,function(){Bb()},ib.modelSKU,null,function(){ub("CANNOT_LOAD_MODEL")})}).catch(function(jb){ub(jb)})})}function Ga(){if(ib.image){var Bb=
ib.image;sb(Bb);return Promise.resolve(Bb)}return new Promise(function(ub){var jb=new Image;jb.onload=function(){sb(jb);ub()};jb.src=ib.imageBase64})}function sb(Bb){var ub=Bb.width,jb=Bb.height;if(ub!==J.width||jb!==J.height)Da.Pd&&(Da.element.width=ub,Da.element.height=jb),D(ub,jb,ib.overSamplingFactor);Da.Nh.drawImage(Bb,0,0);L()}var ib=Object.assign({imageBase64:null,image:null,FOVHztDeg:0,nSteps:50,updateLightInterval:3,overSamplingFactor:2,modelSKU:"undef",glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",
isMask:!0},K);if(J.Lc)throw Error("This feature cannot be called");var Pb=cb.FOVforced;ib.FOVHztDeg&&(cb.FOVforced=ib.FOVHztDeg);Aa.ra(wa.Ja);return new Promise(function(Bb,ub){return la().then(Ga).then(function(){R().then(function(jb){cb.FOVforced=Pb;Bb(jb)}).catch(ub)}).catch(ub).catch(ub)})};S.process_offlineRendering=function(K,R,Y,la,Ga){Ra.Xn();la&&(S.nk.drawImage(mb.ub(),0,0),mb.ub().parentNode.insertBefore(S.Jb,mb.ub()),S.Jb.setAttribute("class","jeefitMask"));S.set_model(R,function(){S.set_materials(Y,
function(){setTimeout(function(){d(K,la).then(Ga);Ra.Un(la?function(){mb.ub().parentNode.removeChild(S.Jb)}:!1)},1)})})};S.serialize_detection=function(K){return K.cc()};S.unserialize_detection=function(K,R,Y){return Wc.Zc(K,R,Y)};S.do_instantDetection=function(K,R){Xc.m(ma.pc);Xc.start(K,R)};S.relieve_DOM=function(K,R){if(ka.Wb)return!1;g(R||160);Pa=!1;N&&clearTimeout(N);N=setTimeout(function(){g(J.Ca);N=!1;G()},K);return!0};S.switch_slow=function(K,R){if(ka.Wb)return!1;"undefined"===typeof R&&(R=
J.vk);N&&(g(J.Ca),G(),clearTimeout(N),N=!1);K?Pa=!1:G();g(K?R:J.Ca);return!0};S.switch_sleep=function(K,R){function Y(){S.isBusy=!1;K?(vb=Ea,Ea=ua.va):(Ea=vb,u())}if(ka.Wb||S.isBusy)return R?Promise.reject():null;if(K&&Ea===ua.va||!K&&Ea!==ua.va)return R?Promise.resolve(!1):!1;pb&&(clearInterval(pb),pb=null);Ea===ua.nc?(Ea=ua.Y,Aa.ra(wa.Ja),Aa.cb(0)):Ea===ua.mc&&(Ea=ua.Ka,Aa.ra(wa.Gb),Aa.cb(1));Db.stop();var la=null;S.isBusy=!0;R?la=wc(!K).then(Y):Y();return R?la:!0};S.set_modelStandalone=function(K,
R){Aa.re(!1);Gc.instance({nd:q,url:K.model,ac:K.materials,Re:function(Y){x(Y);R&&R();Ra.Lg();Aa.re(!0)}})};S.start_rendering=Ra.Lg;S.get_partsNames=function(){return ab?ab.xf():[]};S.update_material=function(K,R,Y){if(!ab)return Promise.reject("MODEL_NOT_LOADED");var la=-1;switch(typeof K){case "number":la=K;break;case "string":la=ab.xf().findIndex(function(Ga){return Ga.includes(K)});if(-1===la)return Promise.reject("PART_NOT_FOUND");break;default:return Promise.reject("INVALID_PART_ID")}void 0===
Y&&(Y=!0);ab.$j(la,R,Y);return Promise.resolve()};S.set_model=function(K,R,Y){ab&&(K=b([J.ea,J.wa,J.Zd+"/",K]),ab.replace(K,function(){R&&R(ab.ll())},Y))};S.set_tweaker=function(K,R){function Y(la){m(la);R&&R()}"string"===typeof K?ha(J.ea+J.wa+J.Qo+"/"+K,Y):Y(K)};S.get_tweaker=function(){return{preOffset:Qb,preScale:$b,rx:t,beginBendZ:v,bendStrength:Rb,maskBranchStartEnd:Sb}};S.get_materialsSpec=function(){return ab?ab.fi():Promise.reject("NOT_READY")};S.set_materials=function(K,R){if(ab){var Y=b([J.ea,
J.wa,J.Yd+"/"]);K=K.map(function(la){var Ga=la;"string"===typeof la&&(Ga=Y+la,Ga=Ga.replace(/([^:])\/\//,"$1/"));return Ga});ab.Bg(K,R)}};S.replace_material=function(K,R){if(ab)return ab.fi().then(function(Y){Y=Object.assign({isReplaced:!0},Y[R]);ab.$j(R,K,!0);return Y})}}function I(){fa.ah(xc.Ol);Ra.Yc();J.Zb&&(Ca.reset(),ya.La.rh(Da.V),ya.La.qh());S.ready=!0;S.ed.forEach(function(K){K()});S.ed.splice(0)}function u(){Nb.reset();Db.stop();Ca.ba();k(0)}function x(K){ab&&(Aa.On(ab),ab.remove());Aa.qk(K);
ab=K}function z(){Qb=[0,0,0];$b=1;Rb=v=t=0;Sb=J.Oc}function g(K){r=K;Db.update({Ca:r})}function k(K){$a=-1;if(Ya.isEnabled)$a=Ya.bc;else if(rb.isEnabled)$a=rb.bc;else if(Pa){if(!L())return;$a=Ea===ua.Y?Nb.X():1}else if($a=J.bd[0],!L())return;Ca.ba();if(!rb.isEnabled)for(var R=0;R<$a;++R)aa.set("s64"),ca.If.J(.25*ia.width,ba.ci()),ca.kb.h(0),ma.Qc.h(1),X.l(!1,!1),ba.Aa(ca.If),Ya.isEnabled&&0===(R+1)%Ya.Yg&&n();Ya.isEnabled?(Ya.D&&Ya.D(),Ya.isEnabled=!1,c.flush(),Ea!==ua.va&&Db.ug(k)):(Aa.animate(K),
ca.qg&&Math.abs(W-wa.Hi)>wa.Pj&&J.Zb&&Ea===ua.Y&&(Ca.ba(),n(),Ca.aa()),rb.isEnabled||(Pa&&(Nb.Tj(),R=Nb.$h(1),bb=ea(J.tk,R),J.Zb&&Ea===ua.Y&&(wa.Pj=ea(J.Ji,R),wa.Xc=ea(J.bn,R),wa.Xc=Math.min(wa.Xc,.5))),W=K,Ea!==ua.va&&Db.ug(k)))}function G(){W=Fc.tf();Pa=!0}function L(){var K=15;if(!Da.Pd){if(!Da.element.videoWidth)return Db.stop(),S.request_cameraVideoStream().then(u),!1;var R=Da.element.currentTime;if(!R)return!0;K=R-Hc;0>K&&(Hc=R);if(1E3*K<J.ep)return!0}Da.V.refresh();Hc+=K;Da.wd=K;sa=!0;Ca.ba();
aa.set("s0");ma.rg.J();ma.Qc.Xk(0);X.l(!0,!0);aa.set("s62");ca.kb.J();Da.V.h(0);X.l(!1,!1);null!==ca.Ib&&(aa.set("s63"),ca.$c.u(),ca.kb.h(0),ca.Ib.h(1),X.l(!1,!1));return!0}function E(){ca.ek=Z.instance({isPot:!0,isLinear:!0,isFloat:!1,url:J.ea+J.wa+J.fp});var K={isPot:!1,isLinear:!0,isFloat:!1,width:ia.width,height:ia.height};ca.kb=Z.instance(K);ca.$c=Z.instance(K);ka.Qj.push(ca.kb,ca.$c);ca.If=rd.instance({});J.Vd&&(Tb=Z.instance({isPot:!1,isFloat:!1,isLinear:!0,url:(J.Wf||-1!==J.Vf.indexOf("//")?
"":J.ea+J.wa)+J.Vf}))}function F(){function K(){return{width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,.5,0,0,0,0,0,0,0,0,0])}}var R={width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0])};ma.Qc=Ic.instance(K());ma.rg=Z.instance(K());ma.pc=Z.instance(K());ma.de=Ic.instance(K());ma.ef=Z.instance(R);R={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0])};ma.bh=Z.instance(R);ma.Be=Z.instance(R);wa.ee=Z.instance({width:1,height:1,
isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0])})}function e(K){ca.qg=K;if(sa){sa=!1;aa.set("s70");ma.bh.J();ma.Be.h(2);var R=ea(J.Zk,Nb.$h(.5));aa.C("u67",R);ma.rg.h(1);aa.C("u68",1E3*Da.wd);X.l(!1,!1);aa.set("s71");ma.Be.u();ma.bh.h(0);X.l(!1,!1)}K.h(0);ma.Qc.vj(1);c.viewport(0,0,1,1);aa.set("s65");aa.Hg("u47",Yc.get(0));X.l(!1,!1);aa.set("s66");c.viewport(1,0,2,1);X.l(!1,!1);ma.ef.J();aa.set("s67");aa.O("u58",J.Me[0]*bb,J.Me[1]);ma.Qc.h(0);ma.de.h(1);X.l(!1,!1);aa.set("s68");ma.de.vj(1);
ma.ef.h(0);ma.Be.h(2);ma.Qc.h(3);X.l(!1,!1);aa.set("s69");ma.de.h(0);ma.pc.u();X.l(!1,!1)}function n(){wa.Hi=W;wa.ee.J();aa.set(H.yi?"s73":"s72");ca.qg.h(0);X.l(!1,!1);ya.La.dk(Da.V,wa.ee,wa.Xc)}function A(){return new Promise(function(K){var R=J.ea,Y=J.ad.split("://").shift();if("http"===Y||"https"===Y)R="";R+=J.ad;"json"!==R.split(".").pop()&&(R+=J.neuralNetworkPath);ha(R,function(la){la=JSON.parse(la);if(la.exportData){var Ga=la.exportData;H.ab=H.ab||Ga.rotationEulerAnglesFactors;H.Cc=H.Cc||Ga.deformScaleXFactor;
H.ta=H.ta||Ga.translationScalingFactors;H.Mh=Ga.dyOffset||0;H.Kh=Ga.dsOffset||0;H.yi=Ga.isLThetaSplitCosSin||!1}ba=new hc({Nc:la.layers,be:"gpuRawAvg",ae:e});K()})})}function Q(K){a(K);K=J.width;var R=J.height;P.pb[0]=1;P.pb[1]=K/R;Yc.m({ce:J.scanOverlapFactors,Si:J.scanNScaleLevels,da:K,Tb:R,nj:J.scanScale0Factor,ta:H.ta,vg:!0});ac=K>R?[K/R,1]:[1,R/K];ka.Oa=!0}function B(){aa.j("s64",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u42",value:P.pb},{type:"1f",name:"u43",
value:H.Cc},{type:"1f",name:"u45",value:H.Mh},{type:"1f",name:"u44",value:H.Kh}]);aa.j("s65",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1f",name:"u51",value:J.Oo},{type:"1f",name:"u52",value:J.sl},{type:"3f",name:"u48",value:[H.ta[0]*P.pb[0],H.ta[1]*P.pb[1],H.ta[2]]},{type:"3f",name:"u49",value:[J.oc[0][0],J.oc[1][0],J.oc[2][0]]},{type:"3f",name:"u50",value:[J.oc[0][1],J.oc[1][1],J.oc[2][1]]}]);aa.j("s66",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"2f",
name:"u55",value:J.Fn},{type:"3f",name:"u53",value:H.ab},{type:"3f",name:"u54",value:J.Sj},{type:"1f",name:"u56",value:J.Pl}]);aa.j("s67",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u57",value:1},{type:"2f",name:"u58",value:J.Me},{type:"1f",name:"u59",value:J.Vn},{type:"1f",name:"u60",value:J.En}]);aa.j("s68",[{type:"1i",name:"u57",value:1},{type:"1i",name:"u61",value:0},{type:"1i",name:"u62",value:2},{type:"1i",name:"u63",value:3},{type:"2f",name:"u42",value:P.pb},{type:"1f",name:"u65",value:ba.ci()},
{type:"2f",name:"u64",value:J.Rn}]);aa.j("s69",[{type:"1i",name:"u41",value:0},{type:"1f",name:"u66",value:J.Yn}]);aa.j("s70",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1i",name:"u62",value:2},{type:"3f",name:"u53",value:H.ab},{type:"3f",name:"u54",value:J.Sj}]);aa.j("s71",[{type:"1i",name:"u62",value:0},{type:"2f",name:"u70",value:J.Po},{type:"2f",name:"u71",value:J.Wn}]);aa.j("s72",[{type:"1i",name:"u46",value:0}]);aa.j("s73",[{type:"1i",name:"u46",value:0}]);aa.j("s63",
[{type:"1i",name:"u1",value:0},{type:"1i",name:"u72",value:1}])}function D(K,R,Y){var la=0===Y,Ga=a(la);J.width=K;J.height=R;Q(la);B();ka.Qj.forEach(function(sb){sb.resize(K,R)});Y=la?1:Y;fa.resize(Ga.width*Y,Ga.height*Y);Ra.Yc();fb.Ig(Da.element.videoWidth||Da.element.width,Da.element.videoHeight||Da.element.height);fb.Pg();fb.Nj()}function M(){Db.stop();ka.hb&&(clearTimeout(ka.hb),ka.hb=null);if(!ka.Wb){var K=ka.width,R=ka.height;if(J.width===K&&J.height===R)u();else if(Ea!==ua.Y&&Ea!==ua.Ka)ka.hb=
setTimeout(M,J.lj);else{var Y="undefined"===typeof Eb?!1:Eb.get_mode(),la=Ea;Ea=ua.va;ka.Wb=!0;Ya.isEnabled=!0;Ya.D=function(){Ya.isEnabled=!1;ka.Wb=!1;G();g(J.Ca);N&&clearTimeout(N);N=!1;Ea=la};D(K,R,0);u();Ea===ua.Ka&&(Ea=ua.Y,S.switch_viewer3D(!0,!1));Y&&Eb.switch_mode(Y)}}}var t,v,P={pb:[-1,-1]},V=null,T=[.5,0,0,.5],ia={width:-1,height:-1},O={width:-1,height:-1,hb:null,Wb:!1,Oa:!1,Qj:[]},ka=Object.assign({},O),Qa=[0,J.fe[1],J.fe[2]],H={ab:[-J.ab[0],-J.ab[1],J.ab[2]],Cc:J.Cc,ta:J.ta,Mh:0,Kh:0,
yi:!1},r=J.Ca,N=null,ba=null;a(!0);var na=[0,0,0],oa=1,xa=0,qa={kb:null,$c:null,If:null,ek:null,qg:null,Ib:null},ca=Object.assign({},qa),ma={rg:null,pc:null,de:null,ef:null,bh:null,Be:null},W=0,sa=!1,Ia={Ja:null,Gb:null,bg:null,Hi:0,Pj:J.Ji[1],Xc:.1,ee:null},wa=Object.assign({},Ia),gb=!1,Ta=!1,Pa=!0,bb=1,$a=-1,ua={va:-1,Y:0,Ka:1,mc:2,nc:3},Ea=ua.Y,pb=null,vb=ua.Y,Ya={isEnabled:!1,bc:1,Yg:3,D:null},rb={isEnabled:!1,pa:null,bc:0},Tb=null,ac=-1,nc=!1,Wa=!1,oc=!1,da=[0,0,0],za=1,hb,Ma,Gb,Qb=[0,0,0],$b=
1,Rb=v=t=0,Sb=J.Oc,yc=[0,0,0],nb={scale:1,offsetX:0,offsetY:0},Hc=0,Ra={m:function(){aa.uc([{id:"s62",name:"_",v:"attribute vec2 a0;uniform mat2 u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5)+u40*a0;}",K:["a0"],S:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u40"],precision:"lowp"},{id:"s64",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",v:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42;uniform float u43,u44,u45;const vec2 h=vec2(.16,.5),i=vec2(.5,.5),j=vec2(.84,.5),q=vec2(.5,.5);varying vec2 vv0;void main(){vec4 b=texture2D(u41,h);vec2 c=b.gb,a=b.a*u42;vec4 l=texture2D(u41,i);float m=l.y;vec2 n=vec2(mix(1.,1./cos(m),u43),1.);a*=n,a*=1.+u44;vec2 o=a0*.5;float d=texture2D(u41,j).r,e=cos(d),f=sin(d);mat2 g=mat2(e,f,-f,e);vec2 p=g*o;c+=vec2(-.5,-.5)*a*(g*vec2(0.,u45)),vv0=c+p*a,gl_Position=vec4(a0,0.,1.);}",
K:["a0"],S:[2],i:"u1 u41 u42 u43 u44 u45".split(" "),precision:"lowp"},{id:"s65",name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46,u41;uniform vec3 u47,u48,u49,u50;uniform float u51,u52;const vec4 e=vec4(.25,.25,.25,.25);const vec2 f=vec2(.16,.5),g=vec2(.5,.5),h=vec2(.83,.5);const vec3 i=vec3(1.,1.,1.);void main(){vec4 j=texture2D(u46,vec2(.625,.625)),k=texture2D(u46,vec2(.875,.625));float l=dot(j-k,e);bool m=l>u52;vec4 a=texture2D(u41,f);m?a.r=2.:a.r>u51?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u47);else{float n=dot(e,texture2D(u46,vec2(.875,.875))),o=dot(e,texture2D(u46,vec2(.125,.625))),p=dot(e,texture2D(u46,vec2(.375,.625))),b=texture2D(u41,h).r,c=cos(b),d=sin(b);vec2 q=mat2(c,d,-d,c)*vec2(n,o);float r=texture2D(u41,g).a;vec3 s=mix(u49,u50,r*i);a.r*=step(1.9,a.r),a.gba+=vec3(q,p)*u48*s*a.a;}gl_FragColor=a;}",
i:"u46 u41 u47 u51 u48 u52 u49 u50".split(" ")},{id:"s66",name:"_",g:"uniform sampler2D u46,u41;uniform vec3 u53,u54;uniform vec2 u55;uniform float u56;const vec4 v=vec4(1.),f=vec4(0.),e=vec4(.25);const vec2 g=vec2(.16,.5),h=vec2(.5,.5),i=vec2(.84,.5);varying vec2 vv0;void main(){float k=step(vv0.x,.5);vec4 l=texture2D(u41,g);if(l.r<1.9){gl_FragColor=f;return;}float m=dot(texture2D(u46,vec2(.125,.125)),e),a=smoothstep(u55.x,u55.y,m);vec4 n=texture2D(u41,h);float o=n.a;a=mix(a,o,.3);float p=dot(e,texture2D(u46,vec2(.125,.875))),q=dot(e,texture2D(u46,vec2(.375,.875))),r=dot(e,texture2D(u46,vec2(.625,.875)));vec3 s=vec3(p,q,r),b=u54+s*u53;float c=texture2D(u41,i).r,d=b.z*u56;c+=d,b.z-=d;vec4 t=vec4(b,a),u=vec4(c,0.,0.,0.);gl_FragColor=mix(u,t,k);}",
i:"u46 u41 u55 u53 u54 u56".split(" ")},{id:"s67",name:"_",g:"uniform sampler2D u41,u57;uniform vec2 u58;uniform float u59,u60;const vec4 f=vec4(1.),h=vec4(1.,0.,0.,0.),i=vec4(0.,0.,0.,1.),j=vec4(0.,0.,0.,0.);const vec2 g=vec2(.5,.5);varying vec2 vv0;void main(){vec4 k=texture2D(u41,vv0),l=texture2D(u57,vv0),q=texture2D(u41,g),m=texture2D(u57,g);float n=pow(m.a,u60),o=mix(u58.y,u58.x,n),b=step(.66,vv0.x),c=step(.34,vv0.x)*(1.-b);vec4 a=mix(h,i,c);a=mix(a,j,b);vec4 d=max(o*f,a);d*=mix(f,u59*vec4(1.,1.,1.,0.)+vec4(0.,0.,0.,1.),c);vec4 p=k-l;gl_FragColor=p*d;}",
i:["u41","u57","u58","u59","u60"],precision:"highp"},{id:"s68",name:"_",g:"uniform sampler2D u57,u61,u62,u63;uniform vec2 u42,u64;uniform float u65;const vec4 w=vec4(0.),x=vec4(1.);const vec2 j=vec2(.25,.5),k=vec2(.75,.5),g=vec2(.16,.5),l=vec2(.5,.5);varying vec2 vv0;bool f(float a){return (a<0.||0.<a||a==0.)&&a+1.!=a?false:true;}void main(){float y=step(vv0.x,.33),m=step(.33,vv0.x)*step(vv0.x,.66),z=step(.66,vv0.x);vec4 n=texture2D(u63,l);float b=n.a;b*=texture2D(u62,j).a,b*=texture2D(u62,k).a;vec4 o=texture2D(u57,vv0),p=texture2D(u61,vv0),c=o+p;c.a=mix(c.a,b,m);vec4 e=texture2D(u57,g),q=texture2D(u63,g);vec2 r=e.gb,s=q.gb;float t=e.a;vec2 h=u65*abs(r-s)/(u42*t);float u=max(h.x,h.y),v=smoothstep(u64.x,u64.y,u);vec4 i=texture2D(u63,vv0),a=mix(c,i,v);if(f(a.x)||f(a.y)||f(a.z)||f(a.w)){gl_FragColor=i;return;}gl_FragColor=a;}",
i:"u57 u61 u62 u63 u42 u65 u64".split(" "),precision:"highp"},{id:"s69",name:"_",g:"uniform sampler2D u41;uniform float u66;const vec4 g=vec4(1.);const vec2 f=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u41,vv0);float b=step(vv0.x,.33),c=texture2D(u41,f).g;a.a+=b*a.a*u66*abs(sin(c)),gl_FragColor=a;}",i:["u41","u66"],precision:"highp"},{id:"s70",name:"_",g:"uniform sampler2D u41,u62,u46;uniform vec3 u53,u54;uniform float u67,u68;const vec4 e=vec4(.25);const vec3 g=vec3(1.);const vec2 h=vec2(.5,.5);const vec3 i=vec3(1.,1.,4.);varying vec2 vv0;void main(){vec4 c=texture2D(u41,h);float d=step(vv0.x,.5),a=1.-d;vec4 j=texture2D(u62,vv0);float t=c.a;vec2 k=mix(vec2(.875,.875),vec2(.125,.875),a),l=mix(vec2(.125,.625),vec2(.375,.875),a),m=mix(vec2(.375,.625),vec2(.625,.875),a);float n=dot(e,texture2D(u46,k)),o=dot(e,texture2D(u46,l)),p=dot(e,texture2D(u46,m));vec3 q=mix(i,u53,a),b=q*vec3(n,o,p),r=c.rgb;b=mix(b,u54+b-r,a)/u68;vec4 s=mix(vec4(b,0.),j,vec4(u67*g,0.));gl_FragColor=s;}",
i:"u41 u62 u46 u67 u68 u53 u54".split(" "),precision:"highp"},{id:"s71",name:"_",g:"uniform sampler2D u62;uniform vec2 u70,u71;const vec4 h=vec4(.25,.25,.25,.25);varying vec2 vv0;void main(){float a=step(.5,vv0.x),c=mix(u70.x,u71.x,a),d=mix(u70.y,u71.y,a);vec3 b=texture2D(u62,vv0).rgb;float f=length(b),g=1.-smoothstep(c,d,f);gl_FragColor=vec4(b,g);}",i:["u62","u70","u71"],precision:"highp"},{id:"s72",name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25);const float f=3.1415;void main(){float a=dot(texture2D(u46,vec2(.375,.375)),e),b=dot(texture2D(u46,vec2(.625,.375)),e),c=f/2.*dot(texture2D(u46,vec2(.875,.375)),e),d=.75*f*dot(texture2D(u46,vec2(.125,.375)),e);gl_FragColor=vec4(d,a,b,c);}",
i:["u46"]},{id:"s73",name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25);const float f=3.1415,g=1e-7;void main(){float b=dot(texture2D(u46,vec2(.875,.375)),e),c=dot(texture2D(u46,vec2(.375,.125)),e),d=f/2.*dot(texture2D(u46,vec2(.625,.375)),e),a=dot(texture2D(u46,vec2(.125,.375)),e),h=dot(texture2D(u46,vec2(.375,.375)),e);a+=(step(0.,a)-.5)*g;float i=atan(h,a);gl_FragColor=vec4(i,b,c,d);}",i:["u46"]},{id:"s63",name:"_",g:"uniform sampler2D u1,u72;varying vec2 vv0;vec4 i(vec4 a,sampler2D g){mediump float b=a.b*63.;mediump vec2 c;c.y=floor(floor(b)/8.),c.x=floor(b)-c.y*8.;mediump vec2 d;d.y=floor(ceil(b)/8.),d.x=ceil(b)-d.y*8.;highp vec2 e;e.x=c.x*.125+9.765625e-4+.123047*a.r,e.y=c.y*.125+9.765625e-4+.123047*a.g;highp vec2 f;f.x=d.x*.125+9.765625e-4+.123047*a.r,f.y=d.y*.125+9.765625e-4+.123047*a.g;lowp vec4 j=texture2D(g,e),k=texture2D(g,f),l=mix(j,k,fract(b));return l;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=i(a,u72);}",
i:["u1","u72"]}]);F();Db.m({xi:!1,Ca:r});Nb.m({fg:0,n:J.bd[1]-J.bd[0]+1,Ii:J.bd[0]});S.set_videoRotation=function(K){cb.rotate=K;S.ready&&(fb.Ig(Da.element.videoWidth,Da.element.videoHeight),fb.Pg())};S.set_viewRotation=function(){};S.set_LUT=function(K){return new Promise(function(R){K?Z.instance({url:K,isFloat:!1,isFlipY:!1,D:function(Y){ca.Ib=Y;Ra.Yc();R()}}):(ca.Ib=null,Ra.Yc(),R())})};S.resize=function(K,R,Y,la){S.ready&&(ka.hb&&(clearTimeout(ka.hb),ka.hb=null),Db.stop(),Y=Y?xc.lf:1,ka.width=
K*Y,ka.height=R*Y,ka.hb=setTimeout(M,la?0:J.lj))};return A()},Ql:D,Lo:function(){E();Q(!0);B();Ra.Nj();y();S.dd.forEach(function(K){K()});S.dd.splice(0);U.model&&!S.isBusy?Ra.Ki(U.model):J.Lc||I();return Promise.resolve()},im:function(){return ia},A:function(){return new Promise(function(K,R){S.ready?(Db.A(),S.switch_sleep(!0,!0).finally(function(){ba&&ba.A();fa.A();mb.A();c&&(c=null);ba=null;J.Wf=!1;ab=null;Ta=gb=!1;Pa=!0;bb=1;$a=-1;Ea=ua.Y;pb=null;vb=ua.Y;Object.assign(ka,O);Object.assign(Da,Zc);
Object.assign(ca,qa);Object.assign(wa,Ia);S.ready=!1;S.isBusy=!1;S.load_model=null;K()}).catch(function(Y){R(Y)})):R("NOT_READY")})},Yc:function(){Aa.tj(ma.pc,null===ca.Ib?ca.kb:ca.$c,wa.ee,ca.ek)},gm:function(){return nb},Bj:function(K){nb=K},xe:function(){yc[0]=na[0]-nb.offsetX;yc[1]=na[1]+nb.offsetY;yc[2]=na[2];Aa.eo(Qa,Qb,yc)},ye:function(){Aa.fo(oa*J.An,$b,nb.scale)},ak:function(){Aa.ho(xa+t)},Vo:function(){Aa.bo(J.jd+v,J.Mb+Rb)},Xo:function(){Aa.co(Sb)},ze:function(){Ra.xe();Ra.ye();Ra.ak();
Ra.Vo();Ra.Xo()},Xn:function(){Db.stop();pb&&(clearInterval(pb),pb=null);rb.isEnabled=!0;rb.bc=0;nc=Aa.fm();Wa=ab.ii();oc=ab.gi();za=$b;da=Qb;hb=Sb;Ma=v;Gb=Rb;Ya.isEnabled=!1;Aa.qe(!1)},Un:function(K){function R(){2===++Y&&(rb.isEnabled=!1,$b=za,Qb=da,Sb=hb,v=Ma,Rb=Gb,Ra.ze(),Aa.ra(nc),u(),K&&K())}var Y=0;Ea===ua.mc?Ea=ua.Ka:Ea===ua.nc&&(Ea=ua.Y);Aa.cb(Ea===ua.Y?0:1);ab.replace(Wa,R);ab.Bg(oc,R);Ra.Yc();Aa.qe(!0)},Nj:function(){var K=Math.tan(Da.qf/2);Aa.sj({pf:J.pf/K,Zn:K,Dn:Da.cj,Ha:J.Ha,dg:J.dg,
eg:J.eg,hk:P.pb,mk:J.ip,Gc:J.Gc,Ef:J.Ef,Cf:J.Cf,Df:J.Df,Oc:Sb,Ne:J.Ne,$e:J.$e,tg:J.tg,jc:J.jc,Fo:J.Hj,Go:J.Ij,pe:J.pe,kc:J.kc,qd:J.qd,cf:J.cf,bf:J.bf,af:J.af,Qe:J.Qe,Pe:J.ea+J.wa+J.Pe,jd:J.jd+v,Mb:J.Mb+Rb,Af:J.Af,hh:J.hh,gh:J.gh,Ee:J.Ee,op:J.np,De:Da.De,Vd:J.Vd,dn:Tb,Ud:J.Ud,Wd:J.Wd,Uf:J.Uf,cn:ac,Qg:J.Qg})},il:function(){var K=cb.He,R=cb.Ge,Y=1/Math.tan(.5*Da.qf),la=mb.$()/mb.P();Da.cj=[Y,0,0,0,0,Y/la,0,0,0,0,-(R+K)/(R-K),-1,0,0,-2*K*R/(R-K),0];Da.De=1/Math.tan(J.lp*Math.PI/360)/Y},Ig:function(K,
R){V=[.5,.5];K=R/K;R=mb.$()/mb.P();90===Math.abs(cb.rotate)&&(K=1/K);K>R?V[1]*=R/K:V[0]*=K/R;T[0]=0;T[1]=0;T[2]=0;T[3]=0;switch(cb.rotate){case 0:T[0]=V[0];T[3]=V[1];break;case 180:T[0]=-V[0];T[3]=-V[1];break;case 90:T[1]=V[0];T[2]=-V[1];break;case -90:T[1]=-V[0],T[2]=V[1]}J.Ai||(T[0]*=-1,T[1]*=-1);R=V;var Y=!1,la=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(la)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(la.substr(0,
4)))Y=!0;la=cb.FOVforced;Y=(la?la:Y?cb.FOVmobile:cb.FOVdesktop)*Math.PI/180;Y=2*Math.atan(Math.max(K,1/K)/(16/9)*Math.tan(.5*Y));Da.qf=2*Math.atan(2*R[0]*Math.tan(.5*(1<K?2*Math.atan(1/K*Math.tan(.5*Y)):Y)));Ra.il()},Pg:function(){aa.j("s62",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u40",value:T}])},Hf:function(K,R){return Ta?Promise.resolve():new Promise(function(Y,la){Ra.Am(K,R);Promise.all([Ra.m(),Ra.Bm()]).then(function(){Ra.ri();Ta=!0;Y()}).catch(function(Ga){S.ob&&S.ob("GL_INCOMPATIBLE",
"Cannot init JEELIZVTO");la(Ga)})})},Am:function(K,R){S.Kb=document.createElement("canvas");S.Jb=document.createElement("canvas");S.Jb.width=J.width;S.Jb.height=J.height;S.nk=S.Jb.getContext("2d");S.replace_video=function(Y){Da.element=Y;Da.Wg.la=Da.element;return!0};S.tc=S.Kb.getContext("2d");S.capture_background=function(Y,la){Y="undefined"===typeof Y?K:Y;la="undefined"===typeof la?R:la;S.Kb.width=Y;S.Kb.height=la;var Ga=Y/la,sb=0,ib=0;if(K/R>Ga){var Pb=R*Ga;Ga=R;sb=Math.round((K-Pb)/2)}else Pb=
K,Ga=K/Ga,ib=Math.round((R-Ga)/2);S.tc.save();S.tc.translate(Y,0);S.tc.scale(-1,1);S.tc.drawImage(Da.element,sb,ib,Pb,Ga,0,0,Y,la);S.tc.restore();Y=document.createElement("canvas");Y.width=S.Kb.width;Y.height=S.Kb.height;Y.getContext("2d").drawImage(S.Kb,0,0);return Y}},ri:function(){window.CanvasListeners&&(Eb.init({sa:mb.ub()}),S.init_listeners=Ra.ri,S.add_listener=Eb.add_listener,S.remove_listener=Eb.remove_listener,S.animate_swipe=Eb.animate_swipe,S.switch_modeInteractor=Eb.switch_mode,S.get_modeInteractor=
Eb.get_mode,Eb.add_listener("move",function(K,R){Ea===ua.Y&&(J.en&&(nb.offsetX-=R[0]*J.Mi,nb.offsetX=Math.min(Math.max(nb.offsetX,-J.Xd),J.Xd)),nb.offsetY-=R[1]*J.Mi,nb.offsetY=Math.min(Math.max(nb.offsetY,-J.Xd),J.Xd),Ra.xe())},!0).add_listener("pinch",function(K,R){Ea===ua.Y&&(nb.scale+=R*J.fn,nb.scale=Math.min(Math.max(nb.scale,J.Ni[0]),J.Ni[1]),Ra.ye())},!0))},Bm:function(){return new Promise(function(K,R){fa.m({Ld:!1,gl:!1,expand:!1,sa:mb.ub(),Rb:mb,onload:function(){wa.Gb=mc.instance({Lb:J.ea+
J.wa+db.gp,wc:J.ea+J.wa+db.hp,vc:db.fk,xc:db.gk});J.Zb?(wa.Ja=mc.instance({}),ya.La.ra(wa.Ja)):wa.Ja=wa.Gb;Aa.ra(wa.Ja);wa.bg=J.Zb?sd.instance({an:wa.Ja,Zm:wa.Gb}):wa.Gb;K()}})||R("CANNOT_INIT_JE3D")})},Lg:function(){gb||(gb=!0,Ra.ze(),I(),W=0,J.Lc&&u())},Ki:function(K,R){K=Gc.instance({Re:function(){Ra.Lg();R&&R()},nd:q,url:K.url,ac:K.ac});x(K)},Oj:function(){if(J.Zb){var K=Object.assign({},db,{Cb:b([J.ea,J.wa,db.Cb])});ya.La.ib(K)}}};return Ra}function $c(){return new Promise(function(a,b){S.Je&&
S.Je();Da.Pd=!1;var d={width:{min:cb.minWidth,max:cb.maxWidth,ideal:cb.idealWidth},height:{min:cb.minHeight,max:cb.maxHeight,ideal:cb.idealHeight},facingMode:{ideal:"user"}},f={video:d,audio:!1};Da.zh=f;d&&-1!==Da.deviceId&&vc(f,Da.deviceId);Tc(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?document.createElement("video"):!1,function(l){S.Ke&&S.Ke(l);ad(l).then(a).catch(b)},function(l){S.ob&&S.ob("WEBCAM_UNAVAILABLE",l);b(l)},f)})}function ad(a){Da.element=a;a=Da.element.videoWidth||
Da.element.width;var b=Da.element.videoHeight||Da.element.height;Da.Wg={la:Da.element,isPot:!1,isFloat:!1,isFlipY:!0};Da.V=Z.instance(Da.Wg);fb.Ig(a,b);return fb.Hf(a,b).then(function(){fb.Pg();return fb.Lo()}).catch(function(d){return Promise.reject(d)})}function td(){var a=document.createElement("canvas");a.width=J.width;a.height=J.height;Da.Nh=a.getContext("2d");Da.Pd=!0;return ad(a)}function bc(a){return 3===arguments.length?this.sb(arguments):this.set(a)}function bd(a,b){b=Math.floor(b);a.r=
(b>>16&255)/255;a.Z=(b>>8&255)/255;a.b=(b&255)/255}function ud(a,b){function d(h){void 0!==h&&1>parseFloat(h)&&console.warn("JETHREE.Color: Alpha component of "+b+" will be ignored.")}var f;if(f=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var l=f[2];switch(f[1]){case "rgb":case "rgba":if(f=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){a.r=Math.min(255,parseInt(f[1],10))/255;a.Z=Math.min(255,parseInt(f[2],10))/255;a.b=Math.min(255,parseInt(f[3],10))/255;d(f[5]);return}if(f=
/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){a.r=Math.min(100,parseInt(f[1],10))/100;a.Z=Math.min(100,parseInt(f[2],10))/100;a.b=Math.min(100,parseInt(f[3],10))/100;d(f[5]);return}break;case "hsl":case "hsla":if(f=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){l=parseFloat(f[1])/360;var p=parseInt(f[2],10)/100,w=parseInt(f[3],10)/100;d(f[5]);a.ao(l,p,w);return}}}else if(f=/^#([A-Fa-f0-9]+)$/.exec(b)){f=f[1];l=f.length;if(3===l){a.r=
parseInt(f.charAt(0)+f.charAt(0),16)/255;a.Z=parseInt(f.charAt(1)+f.charAt(1),16)/255;a.b=parseInt(f.charAt(2)+f.charAt(2),16)/255;return}if(6===l){a.r=parseInt(f.charAt(0)+f.charAt(1),16)/255;a.Z=parseInt(f.charAt(2)+f.charAt(3),16)/255;a.b=parseInt(f.charAt(4)+f.charAt(5),16)/255;return}}b&&0<b.length&&(f=vd[b],void 0!==f?bd(a,f):console.warn("JETHREE.Color: Unknown color "+b))}function zc(a,b,d,f){this.F=a||0;this.G=b||0;this.H=d||0;this.T=void 0!==f?f:1}function cd(a,b,d){var f=b.F,l=b.G,p=b.H;
b=b.T;var w=d.F,h=d.G,m=d.H;d=d.T;a.F=f*d+b*w+l*m-p*h;a.G=l*d+b*h+p*w-f*m;a.H=p*d+b*m+f*h-l*w;a.T=b*d-f*w-l*h-p*m;return a}function cc(a,b){this.x=a||0;this.y=b||0}function Xa(a,b,d){this.x=a||0;this.y=b||0;this.z=d||0}function dd(a,b){var d=a.x,f=a.y,l=a.z;a.x=f*b.z-l*b.y;a.y=l*b.x-d*b.z;a.z=d*b.y-f*b.x}function dc(a,b,d,f){this.F=a||0;this.G=b||0;this.H=d||0;this.Sa=f||dc.ik}function Jc(a,b){this.min=void 0!==a?a:new Xa(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new Xa(-Infinity,-Infinity,
-Infinity)}function Ac(a){return(new Xa).fd(a.min,a.max).Fa(.5)}function wd(a,b){a.min.min(b);a.max.max(b)}function ec(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("JETHREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function ed(a,b,d){var f=b.elements,l=d.elements;d=a.elements;b=f[0];var p=f[4],w=f[8],h=f[12],m=f[1],q=f[5],y=f[9],I=f[13],u=f[2],x=f[6],z=f[10],g=f[14],k=f[3],G=f[7],L=f[11];f=f[15];var E=l[0],F=
l[4],e=l[8],n=l[12],A=l[1],Q=l[5],B=l[9],D=l[13],M=l[2],t=l[6],v=l[10],P=l[14],V=l[3],T=l[7],ia=l[11];l=l[15];d[0]=b*E+p*A+w*M+h*V;d[4]=b*F+p*Q+w*t+h*T;d[8]=b*e+p*B+w*v+h*ia;d[12]=b*n+p*D+w*P+h*l;d[1]=m*E+q*A+y*M+I*V;d[5]=m*F+q*Q+y*t+I*T;d[9]=m*e+q*B+y*v+I*ia;d[13]=m*n+q*D+y*P+I*l;d[2]=u*E+x*A+z*M+g*V;d[6]=u*F+x*Q+z*t+g*T;d[10]=u*e+x*B+z*v+g*ia;d[14]=u*n+x*D+z*P+g*l;d[3]=k*E+G*A+L*M+f*V;d[7]=k*F+G*Q+L*t+f*T;d[11]=k*e+G*B+L*v+f*ia;d[15]=k*n+G*D+L*P+f*l;return a}function Kc(a,b,d,f,l,p){this.a=a;this.b=
b;this.c=d;this.Ga=f instanceof Xa?f:new Xa;this.Ce=Array.isArray(f)?f:[];this.color=l instanceof bc?l:new bc;this.eh=Array.isArray(l)?l:[];this.$b=void 0!==p?p:0}function xd(a,b,d){var f=new XMLHttpRequest;f.open("GET",a,!0);var l=f.withCredentials=!1;f.onreadystatechange=function(){404!==f.status||l||(l=!0,d&&d(404));if(4===f.readyState&&200===f.status){var p=null;try{p=JSON.parse(f.responseText)}catch(w){d&&d(-1)}b&&p&&b(p)}};f.onerror=function(){d&&d(0)};f.send()}function Lc(a,b,d){"object"===
typeof a?b(a):xd(a,b,d)}function yd(a){return new Promise(function(b,d){Lc(a,b,d)})}function zd(a,b){for(var d=new Xa,f=new Xa,l=0,p=b.length;l<p;l++){var w=b[l],h=a[w.a],m=a[w.b],q=a[w.c];h&&m&&q&&(d.gb(q,m),f.gb(h,m),dd(d,f),0!==d.Pf()&&(d.normalize(),w.Ga.N(d)))}}function Ad(a,b){for(var d=Array(a.length),f=0,l=a.length;f<l;++f)d[f]=new Xa;f=new Xa;l=new Xa;for(var p=0,w=b.length;p<w;++p){var h=b[p],m=a[h.a],q=a[h.b],y=a[h.c];m&&q&&y&&(f.gb(y,q),l.gb(m,q),dd(f,l),d[h.a].add(f),d[h.b].add(f),d[h.c].add(f))}f=
0;for(a=a.length;f<a;++f)d[f].normalize();a=0;for(f=b.length;a<f;++a)h=b[a],l=h.Ce,p=d[h.a],w=d[h.b],h=d[h.c],p&&w&&h&&(3===l.length?(l[0].N(p),l[1].N(w),l[2].N(h)):(l[0]=p.clone(),l[1]=w.clone(),l[2]=h.clone()));return d}function Bd(a,b,d,f){function l(n){F.N(b[n]);e.N(F);var A=h[n];L.N(A);L.sub(F.Fa(F.sd(A))).normalize();var Q=e.x,B=e.y,D=e.z,M=A.x,t=A.y;A=A.z;E.x=B*A-D*t;E.y=D*M-Q*A;E.z=Q*t-B*M;Q=0>E.sd(m[n])?-1:1;w[4*n]=L.x;w[4*n+1]=L.y;w[4*n+2]=L.z;w[4*n+3]=Q}for(var p=a.length,w=new Float32Array(4*
p),h=Array(p),m=Array(p),q=0;q<p;q++)h[q]=new Xa,m[q]=new Xa;var y=new Xa,I=new Xa,u=new Xa,x=new cc,z=new cc,g=new cc,k=new Xa,G=new Xa;f.forEach(function(n){var A=n.a,Q=n.b;n=n.c;y.N(a[A]);I.N(a[Q]);u.N(a[n]);x.N(d[A]);z.N(d[Q]);g.N(d[n]);var B=I.x-y.x,D=u.x-y.x,M=I.y-y.y,t=u.y-y.y,v=I.z-y.z,P=u.z-y.z,V=z.x-x.x,T=g.x-x.x,ia=z.y-x.y,O=g.y-x.y,ka=1/(V*O-T*ia);k.set((O*B-ia*D)*ka,(O*M-ia*t)*ka,(O*v-ia*P)*ka);G.set((V*D-T*B)*ka,(V*t-T*M)*ka,(V*P-T*v)*ka);h[A].add(k);h[Q].add(k);h[n].add(k);m[A].add(G);
m[Q].add(G);m[n].add(G)});var L=new Xa,E=new Xa,F=new Xa,e=new Xa;f.forEach(function(n){l(n.a);l(n.b);l(n.c)});return w}function fd(a,b,d,f){return Math.sqrt((a-d)*(a-d)+(b-f)*(b-f))}var U={Ch:!0,Op:!1,Pp:!1,rl:!1,Bh:!1,Np:!1,Qa:!1,Ld:!1,Aq:!1,ea:"",Pi:"",Pk:700,Ok:200,Dh:!1,Zo:!1,$o:!1,Yo:!1,wk:3,Ob:!1,oh:!0,Lb:"images/backgrounds/interior2.jpg",wc:"images/backgrounds/interior_light.jpg",Rk:[256,256,512,512],vc:2.1,xc:8,Qk:[64,128,256,256],Hm:[60,96,160,250],Gm:[8,12,18,40],Rc:2.2,ng:1,Se:300,sh:500,
Te:50,al:0,bl:0,Cp:45,Ep:1,Dp:1E3,th:20,qp:10,sp:10,tp:5,zn:.1,Xi:20,$i:100,aj:100,yn:-Math.PI/3,xn:Math.PI/3,Zi:0,Rj:0,wd:[40,32,16,16],uk:[0,.87,.92,.9],un:2,on:100,ga_:!1,xk:16,yk:.4,Ak:[.72,.73,.72,.74],Kk:1.2,Hk:[.5,.5,.5,1],Mk:140,Lk:280,Nk:1.2,Bk:20,Ck:40,Jk:[6,9,9,12],Gk:[.03,.02,.02,.018],Fk:[.35,.35,.4,.5],Dk:[.2,.2,.2,.2],zk:[.1,.15,.15,.15],Ik:[200,200,150,120],Ek:[1,2,3,5],Ho:1.1,Tq:[.25,.5,1,2],Uq:256,Sq:256,Rq:200,Io:[40,80,200,500],Jo:[35,45,80,120],ml:!0,nl:"CCW"},gd={},aa=function(){function a(t,
v,P){v=t.createShader(v);t.shaderSource(v,P);t.compileShader(v);return t.getShaderParameter(v,t.COMPILE_STATUS)?v:null}function b(t,v,P){v=a(t,t.VERTEX_SHADER,v);P=a(t,t.FRAGMENT_SHADER,P);t===c&&h.push(v,P);var V=t.createProgram();t.attachShader(V,v);t.attachShader(V,P);t.linkProgram(V);return V}function d(t){return["float","sampler2D","int"].map(function(v){return"precision "+t+" "+v+";\n"}).join("")}function f(t,v){v.R=v.R?!0:!1;if(!v.R){v.v=v.v||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";
v.K=v.K||["a0"];v.S=v.S||[2];v.precision=v.precision||u;v.id=y++;void 0!==v.oj&&(v.oj.forEach(function(T,ia){v.g=v.g.replace(T,v.Ia[ia])}),v.oj.splice(0));v.fh=0;v.S.forEach(function(T){v.fh+=4*T});var P=d(v.precision);v.qa=b(t,P+v.v,P+v.g);v.B={};v.i.forEach(function(T){v.B[T]=t.getUniformLocation(v.qa,T)});v.attributes={};v.xa=[];v.K.forEach(function(T){var ia=t.getAttribLocation(v.qa,T);v.attributes[T]=ia;v.xa.push(ia)});if(v.o){t.useProgram(v.qa);q=v;m=v.id;for(var V in v.o)t.uniform1i(v.B[V],
v.o[V])}v.Oa=!0}}function l(t){Cb.Fj(M);m!==t.id&&(M.M(),m=t.id,q=t,c.useProgram(t.qa),t.xa.forEach(function(v){0!==v&&c.enableVertexAttribArray(v)}))}function p(t,v,P){f(t,v,P);t.useProgram(v.qa);t.enableVertexAttribArray(v.attributes.a0);m=-1;return q=v}function w(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],o:{u1:0}}}var h=[],m=-1,q=null,y=0,I=!1,u="highp",x=["u1"],z=["u0"],g={u1:0},k={u0:0},G={u1:0,u2:1},L={u1:0,u3:1},E=["u1","u3","u4"],
F={u5:0},e=["u6","u7","u8","u9"],n={u6:0,u7:1},A={s0:w(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:x,o:g,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],o:G},s3:{g:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],o:g,R:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:x,o:g},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],o:G},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:x,o:g},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:x,o:g},s8:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],o:k},s9:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],o:k},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:x,o:g},s11:{g:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],o:{u1:0,u12:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],o:g},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:x,o:g,R:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:x,o:g,R:!0},s15:{g:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],o:g},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:z,o:k,R:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:z,o:k,R:!0},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:z,o:k,R:!0},s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:z,o:k,R:!0},s20:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:z,o:k},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:z,o:k},s22:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:z,o:k,R:!0},s23:{g:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],o:{u0:0,u16:1},R:!0},s24:{g:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],o:g},s25:{g:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],o:Object.assign({u19:2},n),R:!0},s26:{g:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:e,o:n},s27:{g:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(e),o:n,R:!0},s28:{g:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(e),o:Object.assign({u25:3,u22:4,u23:5,u24:6},n),R:!0},s29:{g:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h,n=floor(.5*(u9-1.)*(f-u28));b=floor(u28*b+n);vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 o=texture2D(u7,j),p=texture2D(u6,a),q=o*p,r=texture2D(u3,j);gl_FragColor=(q*u27*u27+r)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(e),o:Object.assign({u3:2},n)},s30:{g:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],o:n,R:!0},s31:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:E,o:L},s32:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(E),o:L,R:!0},s33:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:E,o:L,R:!0},s34:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(E),o:L,R:!0},s35:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:E,o:L,R:!0},s36:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:x,o:g,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],o:g,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],o:g,precision:"lowp"},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],o:G,R:!0},s40:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],o:G,R:!0},s41:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],o:F},s42:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
o:F,R:!0},s43:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],o:g,precision:"lowp",R:!0},s44:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
o:g,precision:"lowp",R:!0},s45:{g:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],o:{u1:0,u16:1,u31:2},R:!0}},Q={s46:{g:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],Ia:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{g:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),Ia:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},B=null,D=null,M={Ab:function(){return I},m:function(){if(!I){B=Na(A,2);D=Na(Q,2);u="highp";c.getShaderPrecisionFormat&&(c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT),c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT));for(var t in B)f(c,B[t],t);aa.set("s0");c.enableVertexAttribArray(0);I=!0}},uc:function(t){t.forEach(function(v){M.oa(v)})},oa:function(t){B[t.id]=t;f(c,t,t.id)},Em:function(t,
v,P){v||(v=t);B[v]=Object.create(D[t]);B[v].Nm=!0;D[t].Ia&&D[t].Ia.forEach(function(V,T){var ia="";"gl_Frag"===V.substring(0,7)?(V=new RegExp("[,;]?"+V,"g"),ia=";"):V=new RegExp(V,"g");B[v].g=B[v].g.replace(V,ia+P[T])});f(c,B[v],v)},set:function(t){var v=B[t];v.R&&(v.R=!1,f(c,v,t));l(v)},Db:function(t){return p(t,w(),"s48")},ke:function(t){return p(t,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:u},"s49")},Nl:function(t){return"undefined"===typeof B[t]?!1:B[t].Oa},M:function(){-1!==
m&&(m=-1,q.xa.forEach(function(t){0!==t&&c.disableVertexAttribArray(t)}))},me:function(){var t=0;q.xa.forEach(function(v,P){P=q.S[P];c.vertexAttribPointer(v,P,c.FLOAT,!1,q.fh,t);t+=4*P})},Ml:function(){c.enableVertexAttribArray(0)},fc:function(){M.hc(c)},hc:function(t){t.vertexAttribPointer(q.xa[0],2,t.FLOAT,!1,8,0)},le:function(t,v){c.uniform1i(q.B[t],v)},C:function(t,v){c.uniform1f(q.B[t],v)},O:function(t,v,P){c.uniform2f(q.B[t],v,P)},Fg:function(t,v){c.uniform2fv(q.B[t],v)},Hg:function(t,v){c.uniform3fv(q.B[t],
v)},Gg:function(t,v,P,V){c.uniform3f(q.B[t],v,P,V)},Ao:function(t,v,P,V,T){c.uniform4f(q.B[t],v,P,V,T)},Ba:function(t,v){c.uniform4fv(q.B[t],v)},Bo:function(t,v){c.uniformMatrix2fv(q.B[t],!1,v)},Co:function(t,v){c.uniformMatrix3fv(q.B[t],!1,v)},Vc:function(t,v){c.uniformMatrix4fv(q.B[t],!1,v)},j:function(t,v){M.set(t);v.forEach(function(P){switch(P.type){case "4f":c.uniform4fv(q.B[P.name],P.value);break;case "3f":c.uniform3fv(q.B[P.name],P.value);break;case "2f":c.uniform2fv(q.B[P.name],P.value);
break;case "1f":c.uniform1f(q.B[P.name],P.value);break;case "1i":c.uniform1i(q.B[P.name],P.value);break;case "mat2":c.uniformMatrix2fv(q.B[P.name],!1,P.value);break;case "mat3":c.uniformMatrix3fv(q.B[P.name],!1,P.value);break;case "mat4":c.uniformMatrix4fv(q.B[P.name],!1,P.value)}})},cq:function(){return"lowp"},A:function(){M.M();c.disableVertexAttribArray(0);for(var t in B){var v=B[t];v.Oa&&(v.Oa=!1,c.deleteProgram(v.qa));v.Nm&&delete B[t]}h.forEach(function(P){c.deleteShader(P)});h.splice(0);y=
0;I=!1;q=null;m=-1}};return M}(),c=null,mb=function(){function a(x){console.log("ERROR in ContextFF: ",x);return!1}function b(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(x,z,g){x.setAttribute("width",z);x.setAttribute("height",g)}function f(x){if(b())return!1;var z=document.createElement("canvas");d(z,5,5);var g=null;try{g=z.getContext("webgl2",x)}catch(k){return!1}if(!g)return!1;l(g);Ha.Oh(g);x=Ha.df(g);if(!x.Wa&&!x.Ya)return Hb.A(),Ha.reset(),!1;g=Hb.uh(g,
x);Hb.A();Ha.reset();return g?!0:!1}function l(x){x.clearColor(0,0,0,0);x.disable(x.DEPTH_TEST);x.disable(x.BLEND);x.disable(x.DITHER);x.disable(x.STENCIL_TEST);x.disable(x.CULL_FACE);x.GENERATE_MIPMAP_HINT&&x.FASTEST&&x.hint(x.GENERATE_MIPMAP_HINT,x.FASTEST);x.disable(x.SAMPLE_ALPHA_TO_COVERAGE);x.disable(x.SAMPLE_COVERAGE);x.depthFunc(x.LEQUAL);x.clearDepth(1)}var p=null,w=null,h=null,m=!0,q=null,y=null,I=[],u={P:function(){return p.width},$:function(){return p.height},ub:function(){return p},Sl:function(){return c},
na:function(){return m},flush:function(){c.flush()},lq:function(){Ca.reset();Ca.ba();u.Sn()},Sn:function(){Z.reset();X.reset();aa.M();aa.Ml();c.disable(c.DEPTH_TEST);c.disable(c.BLEND);X.md();aa.fc()},Xl:function(){q||(q=new Uint8Array(p.width*p.height*4));c.readPixels(0,0,p.width,p.height,c.RGBA,c.UNSIGNED_BYTE,q);return q},Zp:function(){return p.toDataURL("image/jpeg")},$p:function(){Ca.aa();w||(w=document.createElement("canvas"),h=w.getContext("2d"));d(w,p.width,p.height);for(var x=u.Xl(),z=h.createImageData(w.width,
w.height),g=w.width,k=w.height,G=z.data,L=0;L<k;++L)for(var E=k-L-1,F=0;F<g;++F){var e=4*(L*g+F),n=4*(E*g+F);G[e]=x[n];G[e+1]=x[n+1];G[e+2]=x[n+2];G[e+3]=x[n+3]}h.putImageData(z,0,0);return w.toDataURL("image/png")},ai:function(x){!w&&x&&(w=document.createElement("canvas"),h=w.getContext("2d"));var z=x?w:document.createElement("canvas");d(z,p.width,p.height);(x?h:z.getContext("2d")).drawImage(p,0,0);return z},m:function(x){x=Object.assign({Xa:null,hg:null,sa:null,Ze:null,width:512,height:512,premultipliedAlpha:!1,
Km:!0,antialias:!1,debug:!1,Mp:!1},x);x.Xa?(c=x.Xa,p=x.Xa.canvas):x.Ze&&!x.sa?p=document.getElementById(x.Ze):x.sa&&(p=x.sa);p||(p=document.createElement("canvas"));p.width=x.width;p.height=x.height;if(c)m=c instanceof WebGL2RenderingContext;else{m=!0;var z={antialias:x.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:x.premultipliedAlpha,stencil:!1,depth:x.Km,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(z.antialias=!1);var g=f(z);g||!z.antialias||b()||(z.antialias=!1,g=f(z));g&&(c=p.getContext("webgl2",z));c?m=!0:((c=p.getContext("webgl",z))||(c=p.getContext("experimental-webgl",z)),m=!1)}if(!c)return a("WebGL1 and 2 are not enabled");x.hg&&p.addEventListener&&(y=x.hg,p.addEventListener("webglcontextlost",y,!1));if(!Ha.m())return a("Not enough GL capabilities");l(c);aa.m();X.m();Hb.uh(c,Ha.Ul());I.forEach(function(k){k(c)});I.splice(0);return!0},Bp:function(){return new Promise(function(x){c?x(c):
I.push(x)})},A:function(){c&&(Ha.A(),aa.A(),Hb.A());y&&(p.removeEventListener("webglcontextlost",y,!1),y=null);c=q=h=w=p=null;I.splice(0)}};return u}(),Cb=function(){function a(){null===b&&("undefined"!==typeof aa?b=aa:"undefined"!==typeof C&&(b=C))}var b=null;return{reset:function(){b=null},Fj:function(d){b!==d&&(b&&b.M(),b=d)},Ab:function(){return b.Ab()},fc:function(){return b.fc()},hc:function(d){return b.hc(d)},me:function(){return b.me()},M:function(){return b.M()},set:function(d){a();return b.set(d)},
Db:function(d){a();return b.Db(d)},ke:function(d){a();return b.ke(d)}}}(),Z=function(){function a(D){c.bindTexture(c.TEXTURE_2D,D)}function b(D){var M=new Uint16Array(D.length);D.forEach(function(t,v){n[0]=t;var P=A[0];var V=P>>16&32768;t=P>>12&2047;var T=P>>23&255;P=103>T?V:142<T?V|31744|((255==T?0:1)&&P&8388607):113>T?(t|=2048,V|(t>>114-T)+(t>>113-T&1)):(V|T-112<<10|t>>1)+(t&1);M[v]=P});return M}function d(){if(null!==Q.Ff)return Q.Ff;var D=f(b([.5,.5,.5,.5]),!0);return null===D?!0:Q.Ff=D}function f(D,
M){if(!Cb.Ab()||!x)return null;var t=null,v=Math.sqrt(D.length/4);try{var P=c.getError();if("FUCKING_BIG_ERROR"===P)return!1;t=B.instance({isFloat:!1,U:M,array:D,width:v});P=c.getError();if(P!==c.NO_ERROR)return!1}catch(V){return!1}Ca.aa();c.viewport(0,0,v,v);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);Cb.set("s0");t.ya(0);X.l(!0,!0);D=4*v*v;M=new Uint8Array(D);c.readPixels(0,0,v,v,c.RGBA,c.UNSIGNED_BYTE,M);v=!0;for(P=0;P<D;++P)v=v&&3>Math.abs(M[P]-127);t.remove();Ca.ba();return v}var l=0,p=
null,w=0,h=null,m=null,q=null,y=null,I=null,u=null,x=!1,z=[],g={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,zi:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,la:null,li:null,Mm:!1,U:!1,D:null,L:4,Zf:0},k=!1,G=null,L=null,E=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],F=!1,e=!1,n=new Float32Array(1),A=new Int32Array(n.buffer),Q={Ff:null,Gf:null},B={m:function(){x||(I=[c.RGBA,null,c.RGBA,c.RGBA],u=[c.RGBA,null,
c.RGBA,c.RGBA],p=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7],F="undefined"!==typeof fa,e="undefined"!==typeof Ha,h=[-1,-1,-1,-1,-1,-1,-1,-1],y=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT],x=!0)},qo:function(){c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR)},to:function(){c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST)},
Cm:function(){if(!m){for(var D=new Float32Array(16384),M=0;16384>M;++M)D[M]=2*Math.random()-1;m={random:B.instance({isFloat:!0,isPot:!0,array:D,width:64}),Vj:B.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}B.Wo()},Aj:function(D){c.framebufferTexture2D(Ca.vf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,D,0)},ki:function(){return m.Vj},Wo:function(){y[1]=Ha.uf(c)},vo:function(){u=I=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},ij:function(D){aa.set("s1");Ca.aa();var M=D.P(),t=D.$();c.viewport(0,0,
M,t);D.h(0);X.l(!1,!1)},Cq:function(D,M){B.ij(D);c.readPixels(0,0,D.P(),D.$(),c.RGBA,c.UNSIGNED_BYTE,M)},Dq:function(D,M){B.ij(D);return Ha.sg(0,0,D.P(),D.$(),M)},Vh:function(D,M,t,v,P,V,T){D.activeTexture(D.TEXTURE0);var ia=D.createTexture();D.bindTexture(D.TEXTURE_2D,ia);P=P instanceof Float32Array?P:new Float32Array(P);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,D.CLAMP_TO_EDGE);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,D.CLAMP_TO_EDGE);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,D.NEAREST);
D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,D.NEAREST);D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,V);D.texImage2D(D.TEXTURE_2D,0,D.RGBA,t,v,0,D.RGBA,D.FLOAT,P);D.bindTexture(D.TEXTURE_2D,null);D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!1);T&&(Ca.ba(),aa.Db(D));D.viewport(0,0,t,v);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,M,0);D.bindTexture(D.TEXTURE_2D,ia);T?X.l(!0,!0):X.Qb(D);D.deleteTexture(ia);x&&(h[0]=-1,q=null,l=0)},Le:function(D){D!==l&&(c.activeTexture(p[D]),l=D)},instance:function(D){function M(){qa=
void 0!==O.la.videoWidth?O.la.videoWidth:O.la.width;ca=void 0!==O.la.videoHeight?O.la.videoHeight:O.la.height}function t(da){var za=c.getError();if("FUCKING_BIG_ERROR"===za)return!1;c.texImage2D(c.TEXTURE_2D,0,Pa,bb,$a,da);za=c.getError();za!==c.NO_ERROR&&bb!==c.RGBA&&(bb=c.RGBA,c.texImage2D(c.TEXTURE_2D,0,Pa,bb,$a,da));return!0}function v(){if(!W){a(na);ua&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,ua);O.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,O.isMirrorX?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_T,O.isMirrorY?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));O.isAnisotropicFiltering&&"undefined"!==typeof U&&c.texParameterf(c.TEXTURE_2D,fa.Yl().TEXTURE_MAX_ANISOTROPY_EXT,U.wk);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,O.isLinear?c.LINEAR:c.NEAREST);var da=O.isMipmap&&!pb;c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,O.zi?c.LINEAR_MIPMAP_LINEAR:O.isLinear?da?
c.NEAREST_MIPMAP_LINEAR:c.LINEAR:da?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);bb=I[O.L-1];Pa=u[O.L-1];$a=y[Qa];Ha.na()&&(da=Ha.$l(),bb===c.RGBA&&$a===c.FLOAT?O.isMipmap||O.isLinear?Pa=Hb.bm(c):Ha.ja()?da&&(Pa=da):Pa=c.RGBA16F||c.RGBA:bb===c.RGB&&$a===c.FLOAT&&da&&(Pa=da,bb=c.RGBA));if(O.U&&!O.isFloat||O.isFloat&&O.isMipmap&&Hb.Vm())Pa=Ha.am(),$a=Ha.uf(c);O.Zf&&(Ya=O.Zf);O.isSrgb&&4===O.L&&(bb=fa.um());if(O.la)t(O.la);else if(O.url)t(oa);else if(xa){da=xa;try{"FUCKING_BIG_ERROR"!==c.getError()&&(c.texImage2D(c.TEXTURE_2D,
0,Pa,qa,ca,0,bb,$a,da),c.getError()!==c.NO_ERROR&&(c.texImage2D(c.TEXTURE_2D,0,Pa,qa,ca,0,bb,$a,null),c.getError()!==c.NO_ERROR&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,qa,ca,0,c.RGBA,c.UNSIGNED_BYTE,null)))}catch(Qb){c.texImage2D(c.TEXTURE_2D,0,Pa,qa,ca,0,bb,$a,null)}O.isKeepArray||(xa=null)}else da=c.getError(),"FUCKING_BIG_ERROR"!==da&&(c.texImage2D(c.TEXTURE_2D,0,Pa,qa,ca,0,bb,$a,null),da=c.getError(),da!==c.NO_ERROR&&(bb=c.RGBA,O.U&&$a!==c.FLOAT&&($a=c.FLOAT,c.texImage2D(c.TEXTURE_2D,0,Pa,qa,ca,0,
bb,$a,null))));if(O.isMipmap)if(!pb&&Wa)Wa.Ec(),Tb=!0;else if(pb){da=Math.log2(Math.min(qa,ca));vb=Array(1+da);vb[0]=na;for(var za=1;za<=da;++za){var hb=Math.pow(2,za),Ma=qa/hb;hb=ca/hb;var Gb=c.createTexture();a(Gb);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,Pa,Ma,hb,0,bb,$a,null);a(null);vb[za]=Gb}Tb=!0}a(null);h[l]=-1;ua&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);ma=!0;O.D&&Wa&&(O.D(Wa),O.D=
null)}}function P(){for(var da=qa*ca,za=2*da,hb=3*da,Ma=0;Ma<da;++Ma)Ia[0][Ma]=Ta[Ma],Ia[1][Ma]=Ta[Ma+da],Ia[2][Ma]=Ta[Ma+za],Ia[3][Ma]=Ta[Ma+hb]}function V(){var da=qa*ca*4;wa=[new Uint8Array(da),new Uint8Array(da),new Uint8Array(da),new Uint8Array(da)];Ia=[new Float32Array(wa[0].buffer),new Float32Array(wa[1].buffer),new Float32Array(wa[2].buffer),new Float32Array(wa[3].buffer)];gb=new Uint8Array(4*da);Ta=new Float32Array(gb.buffer);sa=!0}function T(){ia=new Uint8Array(qa*ca*4);nc=new Float32Array(ia.buffer);
ac=!0}var ia,O=Object.assign({},g,D),ka=w++;null===O.isFlipY&&(O.isFlipY=O.url?!0:!1);O.data&&(O.array="string"===typeof O.data?Ob(O.data):O.isFloat?new Float32Array(O.data):new Uint8Array(O.data),O.isFlipY=!1);var Qa=0,H=O.la?!0:!1,r=null,N=null,ba=!1;O.U=O.U||O.isFloat;O.U&&(Qa=1);!O.Mm&&O.isFloat&&e&&!Ha.ja()&&(O.isFloat=!1);O.isFloat&&(Qa=2);O.isAnisotropicFiltering&&F&&!fa.Tm()&&(O.isAnisotropicFiltering=!1);var na=O.li||c.createTexture(),oa=null,xa=!1,qa=0,ca=0,ma=!1,W=!1,sa=!1,Ia=null,wa=null,
gb=null,Ta=null,Pa=null,bb=null,$a=null,ua=O.isFlipY,Ea=(D=O.U&&O.isMipmap)&&Hb.dl(),pb=D&&!Ea?!0:!1,vb=null,Ya=-1,rb=-1,Tb=!1,ac=!1,nc=ia=null;O.width&&(qa=O.width,ca=O.height?O.height:qa);var Wa={get:function(){return na},P:function(){return qa},$:function(){return ca},vm:function(){return O.url},Um:function(){return O.isFloat},rq:function(){return O.U},Pq:function(da){na=da},tq:function(){return O.isLinear},Ec:function(){c.generateMipmap(c.TEXTURE_2D)},Wk:function(da,za){pb?(da||(da=Wa.hi()),B.Le(za),
a(vb[da]),h[za]=-1):Wa.h(za)},hi:function(){-1===Ya&&(Ya=Math.log2(qa));return Ya},Cj:function(da){c.TEXTURE_MAX_LEVEL&&c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAX_LEVEL,da)},Rl:function(da){da||(da=Wa.hi());if(pb){aa.set("s12");B.Le(0);for(var za=qa,hb=ca,Ma=1;Ma<=da;++Ma)za/=2,hb/=2,aa.O("u14",.25/za,.25/hb),c.viewport(0,0,za,hb),a(vb[Ma-1]),c.framebufferTexture2D(Ca.vf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,vb[Ma],0),X.l(!1,1===Ma);h[0]=-1}else da!==rb&&(rb=da,Wa.Cj(da)),Wa.Ec()},Qq:function(da){(H=
!(Array.isArray(da)||da.constructor===Float32Array||da.constructor===Uint8Array))?(xa=null,O.la=da,M()):xa=da},h:function(da){if(!ma)return!1;B.Le(da);if(h[da]===ka)return!1;a(na);h[da]=ka;return!0},ya:function(da){c.activeTexture(p[da]);l=da;a(na);h[da]=ka},u:function(){q=Wa;B.Aj(na)},J:function(){c.viewport(0,0,qa,ca);q=Wa;B.Aj(na)},ve:B.ve,no:function(da,za){qa=da;ca=za},resize:function(da,za){Wa.no(da,za);v()},clone:function(da){da=B.instance({width:qa,height:ca,U:O.U,isFloat:O.isFloat,isLinear:O.isLinear,
isMirrorY:O.isMirrorY,isFlipY:da?!ua:ua,isPot:O.isPot});Cb.set("s0");Ca.ba();da.J();Wa.h(0);X.l(!0,!0);return da},Wc:function(){c.viewport(0,0,qa,ca)},remove:function(){c.deleteTexture(na);W=!0;z.splice(z.indexOf(Wa),1);Wa=null},refresh:function(){Wa.ya(0);ua&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);H?c.texImage2D(c.TEXTURE_2D,0,Pa,bb,$a,O.la):c.texImage2D(c.TEXTURE_2D,0,Pa,qa,ca,0,bb,$a,xa);ua&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},gj:function(){sa||V();c.readPixels(0,0,qa,4*ca,c.RGBA,c.UNSIGNED_BYTE,
gb);P();return Ia},In:function(){sa||V();return Ha.sg(0,0,qa,4*ca,gb).then(function(){P();return Ia})},Kn:function(){ac||T();c.readPixels(0,0,qa,ca,c.RGBA,c.UNSIGNED_BYTE,ia);return nc},Jn:function(){ac||T();return Ha.sg(0,0,qa,ca,ia)},Hh:function(da){Ca.aa();aa.set("s15");Wa.h(0);if(da)c.viewport(0,0,qa,ca),aa.Ao("u15",.25,.25,.25,.25),X.l(!1,!0);else for(da=0;4>da;++da)c.viewport(0,ca*da,qa,ca),aa.Ba("u15",E[da]),X.l(!1,0===da)},$g:function(da){var za;if(za=$a===y[0])null!==Q.Gf?za=Q.Gf:(za=f(new Uint8Array([127,
127,127,127]),!1),za=null===za?!0:Q.Gf=za),za=!za;a(na);ua&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);za?(ba||(r=document.createElement("canvas"),r.width=qa,r.height=ca,N=r.getContext("2d"),N.createImageData(qa,ca),ba=!0),null.data.set(da),N.putImageData(null,0,0),c.texImage2D(c.TEXTURE_2D,0,Pa,bb,$a,r)):c.texImage2D(c.TEXTURE_2D,0,Pa,qa,ca,0,bb,$a,da);h[l]=ka;ua&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},dr:function(da,za){a(na);za&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,
0,Pa,bb,$a,da);h[l]=ka;za&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},cc:function(da,za){var hb=qa*ca,Ma=4*hb;da=O.U?da?"RGBE":"JSON":"RGBA";za&&(da=za);za=Ha.na()&&!1;var Gb=null;switch(da){case "RGBE":Gb="s13";break;case "JSON":Gb=za?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Gb="s7"}sa||("RGBA"===da||"RGBE"===da||"RGBAARRAY"===da?(wa=new Uint8Array(Ma),sa=!0):"JSON"!==da||za||V());Ca.aa();aa.set(Gb);Wa.h(0);Ma=null;if("RGBA"===da||"RGBE"===da||"RGBAARRAY"===da){c.viewport(0,0,qa,ca);X.l(!0,!0);
c.readPixels(0,0,qa,ca,c.RGBA,c.UNSIGNED_BYTE,wa);if("RGBAARRAY"===da)return{data:wa};k||(G=document.createElement("canvas"),L=G.getContext("2d"),k=!0);G.width=qa;G.height=ca;hb=L.createImageData(qa,ca);hb.data.set(wa);L.putImageData(hb,0,0);Ma=G.toDataURL("image/png")}else if("JSON"===da)if(za)Ma=new Float32Array(hb),c.viewport(0,0,qa,ca),X.l(!0,!0),c.readPixels(0,0,qa,ca,c.RGBA,c.FLOAT,Ma);else{for(Ma=0;4>Ma;++Ma)c.viewport(0,ca*Ma,qa,ca),aa.Ba("u15",E[Ma]),X.l(!Ma,!Ma);Wa.gj();Ma=Array(hb);for(za=
0;za<hb;++za)Ma[4*za]=Ia[0][za],Ma[4*za+1]=Ia[1][za],Ma[4*za+2]=Ia[2][za],Ma[4*za+3]=Ia[3][za]}return{format:da,data:Ma,width:qa,height:ca,isMirrorY:O.isMirrorY,isFlipY:"RGBA"===da?O.isFlipY:!O.isFlipY}}};O.isMipmap&&!pb&&ma&&!Tb&&(Wa.Ec(),Tb=!0);if(O.url)a(na),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),oa=new Image,oa.Kp="Anonymous",oa.crossOrigin="Anonymous",oa.src=O.url,oa.onload=function(){qa=oa.width;ca=oa.height;v()};else if(O.la){var oc=function(){M();qa?v():setTimeout(oc,
1)};oc()}else O.array?(O.U&&!O.isFloat?O.array instanceof Uint16Array?(xa=O.array,v()):d()?(xa=b(O.array),v()):(v(),B.Vh(c,na,Wa.P(),Wa.$(),O.array,ua,!0)):(xa=O.isFloat?O.array instanceof Float32Array?O.array:new Float32Array(O.array):O.array instanceof Uint8Array?O.array:new Uint8Array(O.array),v()),O.isKeepArray||(xa&&xa!==O.array&&(xa=null),delete O.array)):O.li?ma=!0:v();Wa.hq=Wa.P;O.D&&ma&&(O.D(Wa),O.D=null);z.push(Wa);return Wa},aa:function(D){D!==l&&(c.activeTexture(p[D]),l=D);h[D]=-1;a(null)},
Yk:function(D){m.random.h(D)},ve:function(){q=null;c.framebufferTexture2D(Ca.vf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},reset:function(){0!==l&&c.activeTexture(p[0]);for(var D=0;D<p.length;++D)h[D]=-1;l=-1},Gq:function(){l=-1},Xj:function(){for(var D=0;D<p.length;++D)B.aa(D)},I:function(){m&&(m.random.remove(),m.Vj.remove())},Zc:function(D,M){if("RGBA"===D.format||"RGBE"===D.format){var t=new Image;t.src=D.data;t.onload=function(){B.instance({isMirrorY:D.isMirrorY,isFlipY:D.isFlipY,isFloat:!1,
la:t,D:function(v){if("RGBA"===D.format)M(v);else{var P=D.width,V=D.height,T=B.instance({isMirrorY:D.isMirrorY,isFloat:!0,width:P,height:V,isFlipY:D.isFlipY});Ca.ba();c.viewport(0,0,P,V);aa.set("s14");T.u();v.h(0);X.l(!0,!0);B.aa(0);M(T);Ha.flush();v.remove()}}})}}else"JSON"===D.format?M(B.instance({isFloat:!0,isFlipY:D.isFlipY,width:D.width,height:D.height,array:new Float32Array(D.data)})):M(!1)},jl:b,A:function(){q&&(Ca.ba(),B.ve(),Ca.aa());B.Xj();z.slice(0).forEach(function(D){D.remove()});z.splice(0);
x=!1;w=0;"undefined"!==typeof Hb&&Hb.A();m=null}};return B}(),Ic={instance:function(a){var b=[Z.instance(a),Z.instance(a)],d=[b[1],b[0]],f=d,l={vj:function(p){f[1].u();f[0].h(p);l.Jj()},wj:function(p){f[1].J();f[0].h(p);l.Jj()},Jj:function(){f=f===b?d:b},refresh:function(){f[0].refresh();f[1].refresh()},h:function(p){f[0].h(p)},ya:function(p){f[0].ya(p)},Xk:function(p){f[1].h(p)},di:function(){return f[0]},fq:function(){return f[1]},$g:function(p){f[0].$g(p);f[1].$g(p)},remove:function(){f[0].remove();
f[1].remove();f=null},sync:function(){l.wj(0);aa.set("s0");X.l(!1,!1)}};return l}},X=function(){function a(m){var q={ka:null,indices:null};q.ka=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,q.ka);m.bufferData(m.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),m.STATIC_DRAW);q.indices=m.createBuffer();m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,q.indices);m.bufferData(m.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),m.STATIC_DRAW);return q}var b=null,d=0,f=!1,l=[],p=-2,w=-2,h={reset:function(){w=p=-2},m:function(){f||
(b=a(c),h.md(),f=!0)},instance:function(m){var q=d++,y=m.indices?m.indices.length:0,I="undefined"===typeof m.mode?c.STATIC_DRAW:m.mode,u=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,u);c.bufferData(c.ARRAY_BUFFER,m.ka instanceof Float32Array?m.ka:new Float32Array(m.ka),I);p=q;var x=null,z=null,g=null;if(m.indices){x=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,x);var k=null;65536>m.indices.length?(k=Uint16Array,z=c.UNSIGNED_SHORT,g=2):(k=Uint32Array,z=c.UNSIGNED_INT,g=4);k=m.indices instanceof
k?m.indices:new k(m.indices);c.bufferData(c.ELEMENT_ARRAY_BUFFER,k,I);w=q}var G={yc:function(L){p!==q&&(c.bindBuffer(c.ARRAY_BUFFER,u),p=q);L&&Cb.me()},Uk:function(){w!==q&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,x),w=q)},bind:function(L){G.yc(L);G.Uk()},W:function(){c.drawElements(c.TRIANGLES,y,z,0)},Na:function(L,E){c.drawElements(c.TRIANGLES,L,z,E*g)},remove:function(){c.deleteBuffer(u);m.indices&&c.deleteBuffer(x);G=null}};l.push(G);return G},md:function(){-1!==p&&(c.bindBuffer(c.ARRAY_BUFFER,b.ka),
p=-1);-1!==w&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.indices),w=-1)},l:function(m,q){m&&X.md();q&&Cb.fc();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},Qb:function(m){m=m||c;var q=a(m);m.bindBuffer(m.ARRAY_BUFFER,q.ka);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,q.indices);Cb.hc(m);m.clear(m.COLOR_BUFFER_BIT);m.drawElements(m.TRIANGLES,3,m.UNSIGNED_SHORT,0);m.flush();m.bindBuffer(m.ARRAY_BUFFER,null);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,null);m.deleteBuffer(q.ka);m.deleteBuffer(q.indices);h.reset();f&&
(h.md(),Cb.fc())},I:function(){var m=c,q=b;m.deleteBuffer(q.ka);m.deleteBuffer(q.indices)},A:function(){h.I();l.forEach(function(m){m.remove()});c.bindBuffer(c.ARRAY_BUFFER,null);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);h.reset();f=!1;l.splice(0);d=0}};return h}(),Ca=function(){var a=null,b=null,d=null,f=!1,l=[],p={ma:-2,Uh:1},w={Ab:function(){return f},m:function(){if(!f){a=c.createFramebuffer();var h=Ha.na();b=h&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;d=h&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:
c.FRAMEBUFFER;f=!0}},Zl:function(){return b},bi:function(){return d},vf:function(){return c.FRAMEBUFFER},gq:function(){return p},Wp:function(){return a},instance:function(h){void 0===h.Hc&&(h.Hc=!1);var m=h.V?h.V:null,q=h.width,y=void 0!==h.height?h.height:h.width,I=a,u=null,x=!1,z=!1,g=0;m&&(q=q?q:m.P(),y=y?y:m.$());var k={pj:function(){x||(I=c.createFramebuffer(),x=!0,g=p.Uh++)},gd:function(){k.pj();k.u();u=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,u);c.renderbufferStorage(c.RENDERBUFFER,
c.DEPTH_COMPONENT16,q,y);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,u);c.clearDepth(1)},bind:function(G,L){g!==p.ma&&(c.bindFramebuffer(b,I),p.ma=g);m&&m.u();L&&c.viewport(0,0,q,y);G&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},ph:function(){g!==p.ma&&(c.bindFramebuffer(b,I),p.ma=g)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Ve:function(){c.clear(c.COLOR_BUFFER_BIT)},wh:function(){c.clear(c.DEPTH_BUFFER_BIT)},Wc:function(){c.viewport(0,0,q,y)},u:function(){g!==
p.ma&&(c.bindFramebuffer(b,I),p.ma=g)},rtt:function(G){m=G;p.ma!==g&&(c.bindFramebuffer(c.FRAMEBUFFER,I),p.ma=g);G.u()},aa:function(){c.bindFramebuffer(b,null);p.ma=-1},resize:function(G,L){q=G;y=L;u&&(c.bindRenderbuffer(c.RENDERBUFFER,u),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,q,y))},remove:function(){I===a||z||(c.bindFramebuffer(b,I),c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0),u&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null),c.bindFramebuffer(b,
null),p.ma=-1,c.deleteFramebuffer(I),u&&c.deleteRenderbuffer(u));z=!0}};h.Hc&&k.gd();l.push(k);return k},aa:function(){c.bindFramebuffer(b,null);p.ma=-1},br:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);Ha.Gj();p.ma=-1},reset:function(){p.ma=-2},ba:function(){0!==p.ma&&(c.bindFramebuffer(b,a),p.ma=0)},clear:function(){Ha.Gj();c.clear(c.COLOR_BUFFER_BIT)},A:function(){w.aa();l.forEach(function(h){h.remove()});null!==a&&(c.deleteFramebuffer(a),a=null);w.reset();
f=!1;l.splice(0);p.Uh=1}};return w}(),Ha=function(){function a(){h="undefined"===typeof mb?fa:mb;m=!0}function b(e,n,A){for(var Q=0;Q<n.length;++Q){var B=A.getExtension(n[Q]+"_"+e);if(B)return B}return null}function d(){null!==k.ue&&(clearTimeout(k.ue),k.ue=null);k.Ub=!1}function f(e){if(0===k.xb.length){k.Da=c.PIXEL_PACK_BUFFER;k.xb.splice(0);k.Hd.splice(0);for(var n=0;n<k.Bc;++n)k.xb.push(c.createBuffer()),k.Hd.push(-1);k.Ua=0;k.gg=0}c.bindBuffer(k.Da,k.xb[k.Ua]);e.byteLength!==k.Hd[k.Ua]&&(c.bufferData(k.Da,
e.byteLength,c.STREAM_READ),k.Hd[k.Ua]=e.byteLength);k.mq=!0}function l(){c.bindBuffer(k.Da,null)}function p(){k.Sb.forEach(function(e){c.deleteSync(e)});k.Sb.splice(0)}function w(){k.Ua=(k.Ua+1)%k.Bc;++k.gg}var h=null,m=!1,q={vi:!1,Sg:null,Tg:null,Ci:!1,Rm:!1,Ug:null,Di:!1,Vg:null,wi:!1,We:null,Im:!1,Xe:null,Jm:!1},y=null,I={Wa:!0,Ya:!0,mf:!0,fj:!1},u=null,x=!0,z=null,g=null,k={kl:1,Bc:-1,Ua:0,gg:0,Ub:!1,xb:[],Sb:[],Hd:[],Da:null,ue:null},G="EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),L=["OES",
"MOZ_OES","WEBKIT_OES"],E="undefined"===typeof window?{}:window,F={m:function(){if(m)return!0;F.reset();m||a();var e=c;if(!y.vi){y.Sg=F.Rh(e);E.GL_EXT_FLOAT=y.Sg;y.Ci=y.Sg?!0:!1;if(y.Ci||F.na())y.Tg=F.Sh(e),y.Rm=y.Tg?!0:!1,E.GL_EXT_FLOATLINEAR=y.Tg;y.vi=!0}if(!y.wi){y.Ug=F.yd(e);y.Ug&&(y.Di=!0,E.GL_EXT_HALFFLOAT=y.Ug);if(y.Di||F.na())y.Vg=F.Th(e),E.GL_EXT_HALFFLOATLINEAR=y.Vg;y.pq=y.Vg?!0:!1;y.wi=!0}y.We=F.Ph(e);y.Im=y.We?!0:!1;E.GL_EXT_COLORBUFFERFLOAT=y.We;y.Xe=F.Qh(e);y.Jm=y.Xe?!0:!1;E.GL_EXT_COLORBUFFERHALFFLOAT=
y.Xe;Ca.m();Z.m();if(!F.ul())return!1;X.m();Z.Cm();return!0},reset:function(){y=Object.assign({},q);u=Object.assign({},I)},P:function(){m||a();return h.P()},$:function(){m||a();return h.$()},na:function(){m||a();return h.na()},Oh:function(e){F.Ph(e);F.Qh(e);F.Rh(e);F.Sh(e);F.yd(e);F.Th(e)},Ph:b.bind(null,"color_buffer_float",G),Qh:b.bind(null,"color_buffer_half_float",G),Rh:b.bind(null,"texture_float",L),Sh:b.bind(null,"texture_float_linear",L),yd:b.bind(null,"texture_half_float",L),Th:b.bind(null,
"texture_half_float_linear",L),uf:function(e){var n=F.yd(e);return n&&n.HALF_FLOAT_OES?n.HALF_FLOAT_OES:e.HALF_FLOAT||e.FLOAT},$l:function(){return g||c.RGBA32F||c.RGBA},am:function(){return z||c.RGBA16F||c.RGBA},Ul:function(){return u},ja:function(){return u.Wa},Fp:function(){return u.Ya},cl:function(){return u.mf},fl:function(){return u.fj&&x},Uj:function(e){x=e;!e&&k.Ub&&(p(),c.bindBuffer(k.Da,null),k.Ub=!1)},uq:function(){return k.Ub},se:function(e,n,A){function Q(){e.bindTexture(e.TEXTURE_2D,
null);e.bindFramebuffer(B,null);e.deleteTexture(t);e.deleteFramebuffer(M)}var B=e.FRAMEBUFFER,D=e.NEAREST,M=e.createFramebuffer();e.bindFramebuffer(B,M);var t=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,t);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,D);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,
D);e.texImage2D(e.TEXTURE_2D,0,n,3,3,0,e.RGBA,A,null);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);if(e.checkFramebufferStatus(e.READ_FRAMEBUFFER||e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE)return Q(),!1;Cb.ke(e);e.clearColor(0,0,0,0);e.viewport(0,0,3,3);e.disable(e.DEPTH_TEST);e.clear(e.COLOR_BUFFER_BIT);X.Qb(e);e.bindFramebuffer(B,null);Cb.Db(e);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,t);X.Qb(e);n=new Uint8Array(36);e.readPixels(0,0,3,3,e.RGBA,e.UNSIGNED_BYTE,
n);Q();for(A=0;36>A;++A)if(3!==A%4&&3<Math.abs(n[A]-127))return!1;return!0},df:function(e){var n={Wa:!1,Ya:!1};e.disable(e.BLEND);e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);e.RGBA32F&&F.se(e,e.RGBA32F,e.FLOAT)&&(n.Wa=!0,g=e.RGBA32F);!n.Wa&&F.se(e,e.RGBA,e.FLOAT)&&(n.Wa=!0,g=e.RGBA);var A=F.uf(e);z=null;e.RGBA16F&&F.se(e,e.RGBA16F,A)&&(n.Ya=!0,z=e.RGBA16F);!n.Ya&&F.se(e,e.RGBA,A)&&(n.Ya=!0,z=e.RGBA);return n},wl:function(){var e=Ca.instance({width:2});e.pj();var n=Z.instance({width:2,isFloat:!0,
L:3});e.u();n.u();F.flush();c.checkFramebufferStatus(Ca.bi())!==c.FRAMEBUFFER_COMPLETE?(Z.vo(),u.mf=!1):u.mf=!0;e.remove();n.remove()},xl:function(){var e=!1;F.na()&&(e="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(n){return"undefined"!==typeof c[n]}));u.fj=e},ul:function(){var e=F.df(c);Object.assign(u,e);if(!u.Wa&&!u.Ya)return!1;F.wl();F.xl();return!0},Ln:function(e,n,A,Q,B){c.readPixels(e,n,A,Q,c.RGBA,c.UNSIGNED_BYTE,
B);return Promise.resolve(B,!1)},sg:function(e,n,A,Q,B,D,M){if(!F.fl())return F.Ln(e,n,A,Q,B);k.Bc=M||k.kl;f(B);c.readPixels(e,n,A,Q,c.RGBA,c.UNSIGNED_BYTE,0);k.Sb[k.Ua]=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);F.flush();var t=!1;return new Promise(function(v,P){function V(){if(!k.Ub)return d(),l(),w(),P(),!1;var T=(k.Ua+1)%k.Bc;switch(c.clientWaitSync(k.Sb[T],0,0)){case c.TIMEOUT_EXPIRED:case c.WAIT_FAILED:break;default:return d(),c.deleteSync(k.Sb[T]),k.Sb[T]=null,c.bindBuffer(k.Da,k.xb[T]),
c.getBufferSubData(k.Da,0,B),l(),w(),v(B,t),!0}k.ue=setTimeout(V,0);return!1}d();k.gg+1<k.Bc?(l(),w(),v(B,!1)):(k.Ub=!0,V()||!D||t||(t=!0,D()))})},Gj:function(){c.viewport(0,0,F.P(),F.$())},flush:function(){c.flush()},A:function(){d();p();Z.A();Ca.A();X.A();k.xb.forEach(function(e){c.deleteBuffer(e)});k.xb.splice(0);Cb.reset();m=!1}};return F}(),Hb=function(){function a(e,n,A,Q){k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,Q?k.NEAREST_MIPMAP_NEAREST:k.LINEAR);var B=null;if(null!==A)try{B=k.getError();
if("FUCKING_BIG_ERROR"===B)return!1;k.texImage2D(k.TEXTURE_2D,0,e,4,4,0,k.RGBA,n,A);B=k.getError();if(B!==k.NO_ERROR)return!1}catch(D){return!1}Q&&k.generateMipmap(k.TEXTURE_2D);k.clear(k.COLOR_BUFFER_BIT);X.Qb(k);B=k.getError();if("FUCKING_BIG_ERROR"===B)return!1;k.readPixels(0,0,2,2,k.RGBA,k.UNSIGNED_BYTE,y);B=k.getError();B===k.INVALID_OPERATION&&"undefined"!==typeof k.PIXEL_PACK_BUFFER&&(k.bindBuffer(k.PIXEL_PACK_BUFFER,null),k.readPixels(0,0,2,2,k.RGBA,k.UNSIGNED_BYTE,y),B=k.getError());if(B!==
k.NO_ERROR)return!1;A=!0;for(Q=0;16>Q;++Q)A=A&&4>Math.abs(y[Q]-127);A&&(m.bj=n,m.ui=e);return A}function b(e,n){return G.Wa&&a(e,k.FLOAT,new Float32Array(I),n)?(h=w.lh,!0):!1}function d(e,n,A){if(!G.Ya)return!1;var Q=Z.jl(I),B=Ha.yd(k);if(B&&B.HALF_FLOAT_OES&&a(e,B.HALF_FLOAT_OES,Q,n)||k.HALF_FLOAT&&a(e,k.HALF_FLOAT,Q,n))return h=w.sc,!0;Q=new Float32Array(I);if(a(e,k.FLOAT,Q,n))return h=w.sc,!0;k.bindTexture(k.TEXTURE_2D,A);k.texImage2D(k.TEXTURE_2D,0,k.RGBA,2,2,0,k.RGBA,k.UNSIGNED_BYTE,null);k.bindFramebuffer(m.td,
F);Z.Vh(k,A,2,2,Q,!1,!1);k.bindFramebuffer(m.td,null);k.bindTexture(k.TEXTURE_2D,A);return a(e,null,null,n)?(h=w.sc,!0):!1}function f(e,n,A){q=!0;if(d(e,!0,A)||b(n,!0))return!0;q=!1;return d(e,!1,A)||b(n,!1)?!0:!1}function l(e){if(h===w.M){k=e||c;h=w.RGBA8;q=!0;Ha.Oh(k);G||(G=Ha.df(k));Ca.reset();F=k.createFramebuffer();m.td=k.DRAW_FRAMEBUFFER||k.FRAMEBUFFER;k.bindFramebuffer(m.td,null);k.clearColor(0,0,0,0);k.viewport(0,0,2,2);aa.M();L=aa.Db(k);e=k.createTexture();k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,
e);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.REPEAT);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.REPEAT);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST);E=e;var n=e=k.RGBA,A=k.RGBA16F,Q=k.RGBA32F;Q&&(e=Q);A&&(n=A);if((A||Q)&&f(n,e,E))return p(),!0;e=n=k.RGBA;if(f(n,e,E))return p(),!0;h=w.RGBA8;p();return!1}}function p(){k.deleteProgram(L.qa);k.deleteTexture(E);E=L=null}for(var w={M:-1,lh:3,sc:2,RGBA8:0},h=w.M,m={bj:null,ui:null,td:null},q=!0,y=new Uint8Array(16),I=Array(64),
u=0;4>u;++u)for(var x=0;4>x;++x){var z=0===(x+u)%2?1:0,g=4*u+x;I[4*g]=z;I[4*g+1]=z;I[4*g+2]=z;I[4*g+3]=z}var k=null,G=null,L=null,E=null,F=null;return{dl:function(e){l(e);return q},uh:function(e,n){h===w.M&&(typeof("undefined"!==n)&&(G=n),l(e));return h!==w.RGBA8},qq:function(e){l(e);return h===w.lh},Vm:function(e){l(e);return h===w.sc},bq:function(e){l(e);return m.bj},bm:function(e){l(e);return m.ui},A:function(){k=null;q=!0;h=w.M;G=null}}}(),md={instance:function(a){function b(){y&&y.remove();y=
Z.instance({isFloat:!1,isPot:!1,width:d.size*d.za[0],height:d.size*d.za[1]})}var d=Object.assign({mask:null,size:-1,preprocessing:"none",preprocessingSize:a.size,customInputShader:null,nBlurPass:1,varianceMin:.1,blurKernelSizePx:5,gain:1,overlap:0,isNormalized:!1,tilt:-1,za:[1,1]},a),f=null,l=!1,p=!1,w=null,h=!1;a=!1;var m=null;d.mask&&(l=!0,J&&void 0!==J.ea&&(d.mask=J.ea+d.mask),f=Z.instance({isFloat:!1,url:d.mask}));var q=null;d.customInputShader&&(q="s50",aa.oa({name:"_",id:q,g:d.customInputShader,
cr:["uSource"],precision:"lowp"}),aa.j(q,[{type:"1i",name:"_",value:0}]));switch(d.preprocessing){case "sobel":m="s39";h=!0;break;case "meanNormalization":m="s40";h=!0;break;case "grayScale":m="s36";h=!1;break;case "grayScaleTilt":m="s37";a=!0;h=!1;break;case "rgbGrayTilt":m="s38";a=!0;h=!1;break;case "copy":m=q?q:"s0";break;case "inputLightRegulation":m=q?q:"s36";w=Cd.instance({ti:d.preprocessingSize,Wi:d.size,Ri:d.nBlurPass,Ea:!1});p=!0;break;case "inputMix0":m="none";w=Dd.instance({da:d.preprocessingSize,
jb:d.varianceMin,Ta:d.blurKernelSizePx,gain:d.gain||1,Ea:!1});p=!0;break;case "inputMix1":m="none";w=Ed.instance({da:d.preprocessingSize,jb:d.varianceMin,Ta:d.blurKernelSizePx,gain:d.gain||1,Ea:!1});p=!0;break;case "inputCut4":m="none";w=Fd.instance({da:d.preprocessingSize,jb:d.varianceMin,Ta:d.blurKernelSizePx,gain:d.gain||1,Jc:d.isNormalized||!1,mg:d.overlap||0,Ea:!1});d.preprocessingSize*=w.cm();p=!0;break;case "direct":case "none":case "abort":m="abort";break;default:m="s4"}d.preprocessingSize=
Math.ceil(d.preprocessingSize);a&&aa.j(m,[{name:"u29",type:"1f",value:d.tilt}]);l&&(m+="Mask");var y=null;b();var I={P:function(){return d.size},dm:function(){return d.preprocessingSize},wf:function(){return I.P()},hm:function(){return p?w.Fc():y},we:function(u){d.za=u;b()},Aa:function(u){Ca.ba();if("abort"===m)return u.h(0),u;"none"!==m&&(aa.set(m),h&&aa.C("u30",1/d.size),y.J(),l&&f.h(1),X.l(!1,!1),y.h(0),u=y);p&&w.process(u)},A:function(){y.remove();l&&f.remove()}};return I}},nd={instance:function(a){function b(){if(F.lc){l.input&&
(l.input.remove(),l.Kd.remove());var n=a.size*a.sparsity;E=Math.log(n/a.size)/Math.log(2);l.input=Z.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:n*a.za[0],height:n*a.za[1],Zf:E});l.Kd=Z.instance({isFloat:!0,isPot:!0,width:a.size*a.za[0],height:a.size*a.za[1]})}}function d(){l.output&&l.output.remove();l.output=Z.instance({isFloat:!0,isPot:!w,isLinear:!w&&h.isLinear,width:a.size*a.za[0],height:a.size*a.za[1]})}function f(n){h.buffer.forEach(function(A,Q){h.results[Q][0]=n[0][A];h.results[Q][1]=
n[1][A];h.results[Q][2]=n[2][A];h.results[Q][3]=n[3][A]});return h.results}a.normalize=a.normalize||!1;var l={input:null,bias:null,Kd:null,output:null,lg:null,jg:null,kg:null},p=null,w=!0,h={type:"undef",D:null,isLinear:!1,buffer:[],results:[],Od:!1},m=-1,q=a.isReorganize?a.isReorganize:!1,y=a.kernelsCount?!0:!1,I=[a.Ic?"s32":"s31",a.Ic?"s34":"s33","s35"][a.shiftRGBAMode||0],u={isEnabled:!1},x=1/a.size;a.Om?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.ge.wf(),w=!1):"full"===a.connectivityUp&&
(a.sparsity=a.ge.wf());var z={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],g=a.sparsity*a.sparsity,k=!1,G=a.size,L="";if(a.maxPooling){switch(a.maxPooling.size){case 2:L="s41";break;case 4:L="s42"}k=!0;G/=a.maxPooling.size;l.jg=Z.instance({isFloat:!0,isPot:!1,width:G})}var E=-1,F=null;w&&d();l.bias=Z.instance(a.bias);var e={P:function(){return a.size},wf:function(){return G},Zh:function(){return a.classesCount},Vk:function(n){p.h(n)},
Cn:function(){a.remap&&a.remap.isEnabled&&(u={isEnabled:!0,hn:Z.instance(a.remap.maskTexture),Nc:a.remap.layers.map(function(n){return a.parent.em(n)}),depth:a.remap.depth})},wo:function(){switch(a.connectivityUp){case "direct":F=Gd.instance(a.connectivity);break;case "square":F=Hd.instance(a.connectivity);break;case "squareFast":F=Id.instance(a.connectivity,a.activation);break;case "full":F=Jd.instance(Object.assign({Ic:a.Ic},a.connectivity));break;case "conv":m=a.kernelsCount,F=Kd.instance(a.connectivity),
q&&(l.lg=Z.instance({width:G,isFloat:!0,isFlipY:!1,isPot:!1}))}b()},Aa:function(n,A){p=n;F.lc?(l.input.J(),y&&l.bias.h(2),F.Aa(u),l.input.h(0),l.input.Rl(E),l.Kd.J(),y?aa.set("s0"):(aa.set(I),aa.C("u4",g),l.bias.h(1)),l.input.Wk(E,0),X.l(!1,!1),aa.set(z),l.output.u(),l.Kd.h(0),X.l(!1,!1)):(l.output.J(),l.bias.h(1),F.Aa());if(w)return A=l.output,k&&(l.jg.J(),A.h(0),aa.set(L),aa.O("u14",x,x),X.l(!1,!1),A=l.jg),q&&(l.lg.u(),aa.set("s24"),aa.O("u18",m,G/m),A.h(0),X.l(!1,!1),A=l.lg),A.h(0),A;var Q=l.output;
if(a.normalize||h.Od)n=a.normalize,aa.set(h.Od?"s9":"s8"),aa.C("u10",n?x:1),l.kg.J(),Q.h(0),X.l(!1,!1),Q=l.kg;n=null;switch(h.type){case "cpuRGBA2Float":Q.Hh(!1);A?n=e.Gn(Q).then(h.D):(Q=e.Hn(Q),h.D(Q));break;case "cpuMeanFloat":Q.Hh(!0);if(A)n=Q.Jn().then(h.D);else{Q=Q.Kn();for(var B=0;B<Q.length;++B);h.D(Q)}break;case "gpuRawAvg":case "gpuRaw":Q.h(0);case "none":null!==h.D&&h.D(Q)}A&&null===n&&(n=Promise.resolve());return n},we:function(n){a.za=n;b();d()},Eo:function(n){n&&(h.type=n.be||"none",
h.D=n.ae||null,h.isLinear=n.ig?!0:!1);d();n="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var A=0,Q=0,B=0;A<n;++A)h.buffer.push(Q+(a.size-1-B)*a.size),h.results.push([-1,-1,-1,-1]),++Q,Q===a.size&&(Q=0,++B);h.Od="gpuRawAvg"===h.type||"cpuMeanFloat"===h.type;if(a.normalize||h.Od)l.kg=Z.instance({isFloat:!0,isPot:!0,width:a.size})},Gn:function(n){return n.In().then(f)},Hn:function(n){n=n.gj();f(n);return h.results},A:function(){for(var n in l){var A=l[n];A&&A.remove()}F&&
(F.A(),F=null)}};a.ge&&e.wo(a.ge);return e}},Gd={instance:function(a){var b=Z.instance(a.weights);return{lc:!0,Ed:function(){return 1},A:function(){b.remove()},wm:function(){return b},Aa:function(){aa.set("s30");b.h(1);X.l(!1,!1)}}}},Jd={instance:function(a){var b=a.fromLayerSize,d=Z.instance(a.weights),f=a.Ic?"s27":"s26";return{lc:!0,Ed:function(){return b},A:function(){d.remove()},Aa:function(l){if(l.isEnabled){aa.set("s28");l.hn.h(3);for(var p=Math.min(l.Nc.length,l.depth),w=0;w<p;++w)l.Nc[w].Vk(4+
w)}else aa.set(f);aa.C("u8",a.toLayerSize);aa.C("u9",a.fromLayerSize);d.h(1);X.l(!1,!1)}}}},Hd={instance:function(a){for(var b=a.fromLayerSize,d=a.toLayerSize,f=a.toSparsity,l=f*d,p=l/b,w=b/d,h=0,m=0,q=0,y=Array(f*d*f*d*4),I=Array(f*d*f*d*4),u=Array(b*b),x=0;x<u.length;++x)u[x]=0;x=Math.floor(f/2);for(var z=.5/d,g=.5/b,k=.5/l,G=0;G<d;++G)for(var L=Math.round(G*w),E=0;E<d;++E){var F=Math.round(E*w),e=G/d,n=E/d;e+=z;n+=z;for(var A=0;A<f;++A){var Q=L+A-x;0>Q&&(Q+=b);Q>=b&&(Q-=b);for(var B=0;B<f;++B){var D=
h/l,M=m/l,t=F+B-x;0>t&&(t+=b);t>=b&&(t-=b);var v=Q/b,P=t/b;M=1-M-1/l;v+=g;P+=g;D+=k;M+=k;var V=G*f+A,T=E*f+B;T=d*f-T-1;V=T*d*f+V;y[4*V]=D;y[4*V+1]=M;y[4*V+2]=v;y[4*V+3]=P;P=u[t*b+Q]++;V=P%p;v=Q*p+V;t=t*p+(P-V)/p;t=b*p-1-t;t=t*b*p+v;I[4*t]=D;I[4*t+1]=M;I[4*t+2]=e;I[4*t+3]=n;++h>=l&&(h=0,++m);++q}}}u=null;var ia=Z.instance(a.weights);delete a.weights.data;var O=Z.instance({width:l,isFloat:!0,array:new Float32Array(I),isPot:!0});I=null;var ka=Z.instance({width:l,isFloat:!0,array:new Float32Array(y),
isPot:!0});y=null;return{lc:!0,Ed:function(){return p},A:function(){O.remove();ka.remove();ia.remove()},Aa:function(){aa.set("s25");ia.h(1);ka.h(2);X.l(!1,!1)}}}},Kd={instance:function(a){var b=a.kernelsCount,d=a.toSparsity,f=d*a.toLayerSize/a.fromLayerSize,l=a.inputScale||[1,1],p=Z.instance(a.weights);return{lc:!0,Ed:function(){return f},jq:function(){return d},wm:function(){return p},A:function(){p.remove()},Aa:function(){aa.set("s29");aa.Fg("u28",l);aa.C("u26",b);aa.C("u27",d);aa.C("u8",a.toLayerSize);
aa.C("u9",a.fromLayerSize);p.h(1);X.l(!1,!1)}}}},Id={instance:function(a,b){var d=a.fromLayerSize,f=a.toLayerSize,l=a.toSparsity,p=a.stride?a.stride:1,w=l*f/d,h=f<d,m=d/f,q=Z.instance(a.weights),y="s51"+[d.toString(),f.toString(),l.toString(),p.toString(),b].join("_");aa.Nl(y)||(a=wb(b),f=[{type:"1f",name:"u8",value:f},{type:"1f",name:"u32",value:p}],h&&f.push({type:"1f",name:"u9",value:d}),d=[(h?w:l).toFixed(1),a],h&&d.push(m.toFixed(1)),aa.Em(h?"s47":"s46",y,d),aa.j(y,f.concat([{type:"1i",name:"u6",
value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));return{lc:!1,Ed:function(){return w},A:function(){q.remove()},Aa:function(){aa.set(y);q.h(3);X.l(!1,!1)}}}},Cd={instance:function(a){var b=a.Ri?a.Ri:3,d=a.ti?a.ti:64,f=a.Wi?a.Wi:64,l=a.Ea?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=Z.instance(a),w=Z.instance(a),h=Z.instance(a),m=Z.instance(a),q=Z.instance({isFloat:!0,width:f,isPot:!1,isFlipY:!1}),y=1/d;return{process:function(I){aa.set("s43");m.u();X.l(l,!1);aa.set("s44");
for(var u=0;u<b;++u)p.u(),aa.O("u14",y,0),X.l(l,!1),h.u(),m.h(0),X.l(l,!1),w.u(),p.h(0),aa.O("u14",0,y),X.l(l,!1),m.u(),h.h(0),X.l(l,!1),u!==b-1&&w.h(0);aa.set("s45");q.u();I.h(0);w.h(1);m.h(2);X.l(l,!1);q.h(0)},Fc:function(){return q}}}},Dd={instance:function(a){function b(y){return Z.instance({isFloat:y,width:d.da,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,Ta:9,da:128,gain:1,Ea:!1},a),f=b(!1),l=[b(!1),b(!1),b(!1)],p=[b(!1),b(!1),b(!1)],w=b(!0),h=[f,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.Ta-1)/2).toFixed(2)).replace("2.2222",(1/d.da).toFixed(6));var m="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),q={u1:0};aa.uc([{id:"s53",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",o:q,i:["u1"],precision:"lowp"},{id:"s54",name:"_",g:a,o:q,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",g:m,o:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){aa.set("s53");f.J();X.l(d.Ea,!1);aa.set("s54");for(var y=0;3>y;++y)aa.O("u33",1,0),l[y].u(),h[y].h(0),
X.l(!1,!1),aa.O("u33",0,1),p[y].u(),l[y].h(0),X.l(!1,!1);aa.set("s55");w.u();f.h(0);p[0].h(1);p[1].h(2);p[2].h(3);X.l(!1,!1);w.h(0)},Fc:function(){return w}}}},Ed={instance:function(a){function b(q){return Z.instance({isFloat:q,width:d.da,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,Ta:9,da:128,gain:1,Ea:!1},a),f=b(!1),l=b(!1),p=b(!1),w=b(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.Ta-1)/2).toFixed(2)).replace("2.2222",(1/d.da).toFixed(6));var h="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),m={u1:0};aa.uc([{id:"s56",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
o:m,i:["u1"],precision:"lowp"},{id:"s57",name:"_",g:a,o:m,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",g:h,o:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){aa.set("s56");f.J();X.l(d.Ea,!1);aa.set("s57");aa.O("u33",1,0);l.u();f.h(0);X.l(!1,!1);aa.O("u33",0,1);p.u();l.h(0);X.l(!1,!1);aa.set("s58");w.u();f.h(0);p.h(1);X.l(!1,!1);w.h(0)},Fc:function(){return w}}}},Fd={instance:function(a){function b(y){return Z.instance({isFloat:y,width:d.da,isPot:!1,isFlipY:!1})}var d=
Object.assign({jb:.1,Ta:9,da:128,gain:1,mg:0,Jc:!1,Ea:!1},a),f=b(!1),l=null,p=null,w=null;d.Jc&&(l=b(!1),p=b(!1),w=b(!0));a={u1:0};var h=[{id:"s59",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.mg.toFixed(4)),o:a,i:["u1"],precision:"lowp"}];if(d.Jc){var m="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.Ta-1)/2).toFixed(2)).replace("2.2222",(1/d.da).toFixed(6)),q="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4));h.push({id:"s60",name:"_",g:m,o:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",g:q,o:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}aa.uc(h);return{process:function(){aa.set("s59");f.J();X.l(d.Ea,!1);d.Jc?(aa.set("s60"),aa.O("u33",1,0),l.u(),f.h(0),X.l(!1,!1),aa.O("u33",0,1),p.u(),l.h(0),X.l(!1,!1),aa.set("s61"),w.u(),f.h(0),p.h(1),X.l(!1,!1),w.h(0)):f.h(0)},cm:function(){return 2-d.mg},Fc:function(){return d.Jc?w:f}}}},Nb=function(){function a(g,
k,G,L,E,F,e){if(!x)if(e===F.length)E();else{switch(F[e]){case "A":G();break;case "D":g();break;case "S":k().then(function(n,A){z.Tj();a(g,k,G,A?null:L,E,F,++e)}).catch(function(n){console.log("An error occurred in the WebAR loop: ",n);E()});return;case "R":L&&L()}a(g,k,G,L,E,F,++e)}}var b={n:5,fg:1,Ii:0,Bd:[35,49],xd:[2,200],k:.7,To:200,wn:.05},d=-1,f=null,l=-1,p=-1,w=0,h=-1,m=-1,q=0,y=0,I=b.xd[1],u=Math.log(2),x=!0,z={X:function(){switch(d){case -1:return-1;case 0:return m+f.Ii;case 1:return q}},
$h:function(g){return Math.pow(Math.min(Math.max(h,0),f.n-1)/(f.n-1),g||1)},m:function(g){f=Object.assign({},b,g);h=m=f.fg;d=0;z.reset()},Tj:function(g){g=("undefined"===typeof g?Date.now():g)||0;var k=Math.min(Math.max(g-y,f.xd[0]),f.xd[1]);I=k;y=g;var G=-1===l?0:f.k;l=Math.min(Math.max(1E3/k,5),120)*(1-G)+l*G;g-p>f.To&&5<++w&&(k=f.k,h=h*(1-k)+(l<f.Bd[0]?m-1:l>f.Bd[1]?m+1:m)*k,Math.abs(h-m)>1-f.wn&&(k=Math.min(Math.max(Math.round(h),0),f.n-1),k!==m&&(h=m=k,l=(f.Bd[1]-f.Bd[0])/2)),p=g)},ug:function(g,
k,G,L,E,F){x=!1;a(g,k,G,L,E,F,0)},stop:function(){x=!0},po:function(g){q=g;d=1},So:function(){d=0;z.reset()},reset:function(){I=b.xd[1];p=l=-1;w=0},Wq:function(g,k,G){G=Math.exp(-u*I/G);return(1-G)*g+G*k},aq:function(){return I}};return z}(),Yc=function(){function a(I,u){var x=I[0]-.5;I=I[1]-.5;var z=u[0]-.5;u=u[1]-.5;return x*x+I*I-(z*z+u*u)}var b={Si:4,ce:[1.5,1.5,2],ta:[.1,.1,.1],nj:1,da:-1,Tb:-1,No:2,tn:1,vg:!0,Ll:.8},d=null,f=[],l=[],p=[],w=[0],h=[.5,.5,1],m=null,q=0,y=[0,0,0];return{m:function(I){d=
Object.assign({},b,I);f.splice(0);l.splice(0);p.splice(0);q=0;I=d.ce[0]*d.ta[0];var u=d.ce[1]*d.ta[1],x=1/(1+d.ce[2]*d.ta[2]),z=d.nj*Math.min(d.da,d.Tb),g=z/d.da;z/=d.Tb;var k=.5*d.Ll;k*=k;for(var G=0;G<d.Si;++G){var L=[];l.push(L);var E=Math.pow(x,G),F=g*E,e=z*E;E=F*d.tn;p.push(E);var n=F*I,A=e*u;F/=2;e/=2;for(var Q=1+(1-F-F)/n,B=1+(1-e-e)/A,D=0;D<B;++D)for(var M=e+D*A,t=M-.5,v=0;v<Q;++v){var P=F+v*n,V=P-.5;V*V+t*t>k||(P=[P,M,E],f.push(P),L.push(P))}d.vg&&L.sort(a);m=f}d.vg&&f.sort(a)},get:function(I){var u=
m.length;if(0===u)return h;for(;I>=w.length;)w.push(0);w[I]>=u&&(w[I]=0);var x=m[Math.floor(w[I])%u];w[I]=(w[I]+1/d.No)%u;if(0===q)return x;y[0]=x[0];y[1]=x[1];y[2]=q;return y},Bq:function(I){I>=w.length||(w[I]=Math.floor(Math.random()*m.length))},Oq:function(I){q=I;if(0===q)m=f;else{for(var u=p.length,x=u-1,z=0;z<u;++z)if(p[z]<=I){x=z;break}m=l[x]}},reset:function(){for(var I=f.length/w.length,u=0;u<w.length;++u)w[u]=Math.floor(u*I);q=0;m=f}}}(),Db=function(){function a(){d(g+x.$f);k.port.postMessage("DONE")}
function b(){F.hd=0===x.Ca?L(d):L(f)}function d(B){E.Xb&&null!==z&&(B-=g,B=Math.min(Math.max(B,x.Lh[0]),x.Lh[1]),g+=B,p(),e.isEnabled&&e.Kc&&E.Pa&&g-e.Nf>x.kh&&(q(),e.Nf=g),z(g))}function f(B){E.Xb&&(F.timeout=setTimeout(d.bind(null,B),x.Ca))}function l(){z=null;E.Xb=!1;p()}function p(){F.hd&&(window.cancelAnimationFrame(F.hd),F.hd=null);F.timeout&&(window.clearTimeout(F.timeout),F.timeout=null)}function w(B){B&&!E.Pa?(E.Pa=!0,G&&Nb.So(),k.port.postMessage("STOP"),Ha.Uj(!0),b()):!B&&E.Pa&&(E.Pa=!1,
G&&Nb.po(1),Ha.Uj(!1),k.port.postMessage("START"))}function h(B){B.target.hidden?A():n()}function m(B,D,M){D=B.createShader(D);B.shaderSource(D,M);B.compileShader(D);return D}function q(){e.Kc=!1;var B=e.Xa,D=e.Id,M=e.Jd,t=e.Da;B.uniform1f(e.mi,Math.random());e.Yb?D.beginQueryEXT(t,M):B.beginQuery(t,M);B.drawElements(B.POINTS,1,B.UNSIGNED_SHORT,0);e.Yb?D.endQueryEXT(t):B.endQuery(t);Ha.flush();I().then(function(v){0===v||isNaN(v)?(e.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",
v)):(v=x.kk*x.jh*1E3/v,e.Ae=(e.Ae+1)%x.rc,e.Of[e.Ae]=v,++e.Gi>x.rc&&(e.Qd.set(e.Of),e.Qd.sort(function(P,V){return P-V}),v=e.Qd[Math.floor(x.rc/2)],e.Ad=Math.max(e.Ad,v),x.ih(v/e.Ad)),e.Kc=!0)}).catch(function(){e.Kc=!0})}function y(B){var D=e.Xa,M=e.Id,t=e.Jd;t=e.Yb?M.Vp(t,M.QUERY_RESULT_AVAILABLE_EXT):D.getQueryParameter(t,D.QUERY_RESULT_AVAILABLE);D=D.getParameter(M.GPU_DISJOINT_EXT);t?B(!D):setTimeout(y.bind(null,B),.1)}function I(){return new Promise(function(B,D){y(function(M){if(M){M=e.Xa;
var t=e.Id,v=e.Jd;M=e.Yb?t.getQueryObjectEXT(v,t.QUERY_RESULT_EXT):M.getQueryParameter(v,M.QUERY_RESULT);B(M)}else D()})})}var u={xi:!0,Lh:[1,200],$f:20,Ca:0,jh:50,kk:240,kh:3E3,rc:3,ih:null},x=null,z=null,g=0,k=null,G=!1,L=null,E={Oa:!1,Pa:!0,Mf:!1,Kf:!1,Jf:!1,Xb:!1},F={hd:null,timeout:null},e={isEnabled:!1,Kc:!1,Xa:null,Id:null,Jd:null,Da:null,mi:null,Yb:!0,Nf:0,Gi:0,Of:null,Qd:null,Ae:0,Ad:0},n=w.bind(null,!0),A=w.bind(null,!1),Q={m:function(B){x=Object.assign(u,B);Object.assign(E,{Pa:!0,Oa:!0,
Xb:!1});L=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==x.ih){B=document.createElement("canvas");B.setAttribute("width","1");B.setAttribute("height","1");var D={antialias:!1};B=B.getContext("webgl2",D)||B.getContext("webgl",D);if(D=B.getExtension("EXT_disjoint_timer_query")||B.getExtension("EXT_disjoint_timer_query_webgl2")){e.Xa=B;e.Id=D;e.isEnabled=!0;e.Yb=D.beginQueryEXT?!0:!1;var M=m(B,B.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),t=m(B,B.FRAGMENT_SHADER,
"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",x.jh.toString())),v=B.createProgram();B.attachShader(v,M);B.attachShader(v,t);B.linkProgram(v);M=B.getAttribLocation(v,"a0");e.mi=B.getUniformLocation(v,"u39");B.useProgram(v);B.enableVertexAttribArray(M);v=B.createBuffer();B.bindBuffer(B.ARRAY_BUFFER,v);B.bufferData(B.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),B.STATIC_DRAW);B.vertexAttribPointer(M,4,B.FLOAT,
!1,16,0);v=B.createBuffer();B.bindBuffer(B.ELEMENT_ARRAY_BUFFER,v);B.bufferData(B.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),B.STATIC_DRAW);B.disable(B.DEPTH_TEST);B.disable(B.DITHER);B.disable(B.STENCIL_TEST);B.viewport(0,0,1,1);v=e.Yb?D.createQueryEXT():B.createQuery();e.Jd=v;e.Da=D.TIME_ELAPSED_EXT||B.TIME_ELAPSED;e.Nf=-x.kh;e.Of=new Float32Array(x.rc);e.Qd=new Float32Array(x.rc);e.Ad=0;e.Ae=0;e.Gi=0;e.Kc=!0}}if(x.xi){B=!1;try{if("undefined"===typeof SharedWorker){var P=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
x.$f.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),V=new Worker(P);V.addEventListener("message",a);k={ej:V,port:V};E.Mf=!0}else{var T=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
x.$f.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ia=new SharedWorker(T);ia.port.start();ia.port.addEventListener("message",a);k={ej:ia,port:ia.port};E.Kf=!0}B=!0}catch(O){}B&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",h):(window.addEventListener("blur",A),window.addEventListener("focus",n)),window.addEventListener("pagehide",
A),window.addEventListener("pageshow",n),E.Jf=!0)}G="undefined"!==typeof Nb},A:function(){l();E.Jf&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",h):(window.removeEventListener("blur",A),window.removeEventListener("focus",n)),window.removeEventListener("pagehide",A),window.removeEventListener("pageshow",n),E.Jf=!1);E.Kf?(k.port.close(),E.Kf=!1):E.Mf&&(k.ej.terminate(),E.Mf=!1);Object.assign(E,{Pa:!0,Oa:!1,Xb:!1});z=null},xq:function(){return E.Pa},update:function(B){Object.assign(x,
B)},ug:function(B){E.Oa||Q.m({});p();E.Xb=!0;z=B;E.Pa&&b()},stop:l};return Q}(),Fc={tf:function(){return Date.now()},Yp:function(){return performance.now()}},rd=function(){var a={Lm:!0,isLinear:!0,ag:[4,11]};return{Tp:function(b,d,f){return d.isDetected?Math.floor(d.s*b):(b=Math.floor(Math.log2(b/4)),b=Math.min(Math.max(b,4),9),Math.max(f,Math.pow(2,b)))},instance:function(b){var d=Object.assign({},a,b),f=[],l=null,p=-1,w=null,h=!1;for(b=d.ag[0];b<=d.ag[1];++b)f[b]=null;return{J:function(m,q){q!==
p&&(l&&l.remove(),l=Z.instance({isLinear:d.isLinear,isPot:!0,width:q}));if(h=d.Lm&&q<.5*m){m=Math.floor(Math.log2(m));var y=d.ag;y=m=Math.min(Math.max(m,y[0]),y[1]);if(!f[y]){var I=Z.instance({isPot:!0,isMipmap:!0,zi:!0,width:Math.pow(2,y)});f[y]={V:I,Qi:-1}}m=f[m];w=m.V;m.Qi!==q&&(y=Math.log2(q),w.h(0),w.Cj(y),Z.aa(0),m.Qi=q)}else w=l;p=q;w.J()},h:function(m){w.h(m);h&&w.Ec()},ya:function(m){w.ya(m)},remove:function(){l&&l.remove();f.forEach(function(m){m&&m.V.remove()})}}}}}(),Eb=function(){function a(W){switch(n){case e.movePinch:var sa=
-W.deltaY;0===A&&g("pinch",-1,.001*sa,null)}W.deltaY;W.preventDefault()}function b(W){if(-1!==A)switch(n){case e.swipe:if(1!==A)break;m();y(W,B);var sa=B[0]-Q[0];l(sa);W=sa/(20*L.offsetWidth/100);g("swipeMove",Math.min(Math.max(W,-1),1),W,null);break;case e.movePinch:if(2===A||3===A){y(W,B);sa=B[0]-Q[0];var Ia=B[1]-Q[1];2===A?(N+=Math.sqrt(sa*sa+Ia*Ia),10>N?(Q[0]=B[0],Q[1]=B[1]):(oa||(oa=!0,g("moveStart",null,null,null)),ba[0]=sa,ba[1]=Ia,M[0]=sa-D[0],M[1]=Ia-D[1],g("move",ba,M,null),D[0]=ba[0],D[1]=
ba[1])):3===A&&(W=q(W)/na,g("pinch",W,W-xa,null),xa=W)}}}function d(W){if(-1!==A)switch(n){case e.swipe:if(1!==A)break;m();y(W,B);W=B[0]-Q[0];var sa=0>W;(W=20<100*Math.abs(W)/L.offsetWidth)&&sa?g("swipeLeft",t,null,null):W&&!sa&&g("swipeRight",t,null,null);var Ia=function(){setTimeout(function(){h();A=0;g("swipeEnd",null,null,null)},202)};W?(W=function(){var wa=(sa?-1:1)*L.width,gb=(sa?1:-1)*wa/L.width;t.style.transitionDuration=(400).toString()+"ms";t.style.left=(ia[0]+wa).toString()+"px";t.style.top=
ia[1].toString()+"px";t.style.transform="rotate( "+gb.toString()+"rad )";Ia()},T?W():O=W):(t.style.transitionDuration=(200).toString()+"ms",t.style.opacity="0",t.style.left=ia[0].toString()+"px",t.style.top=ia[1].toString()+"px",t.style.transform="",Ia());A=-1;break;case e.movePinch:if(2===A||3===A)A===A.move?g("moveEnd",null,null,null):3===A&&g("pinchEnd",null,null,null),A=0}}function f(W){W.preventDefault();if(-1!==A)switch(n){case e.swipe:if(0!==A)break;m();A=1;ka=setTimeout(function(){h();ka=
null;1===A&&(A=0,g("swipeEnd",null,null,null))},1E3);p();g("swipeStart",null,null,null);g("swipeGetCanvas",t,P,v);y(W,Q);break;case e.movePinch:0!==A?2!==A||oa||void 0===W.changedTouches&&void 0===W.touches||(na=q(W),20<na&&(A=3,xa=1,g("pinchStart",null,null,null))):3!==A&&(oa=!1,y(W,Q),D[0]=0,D[1]=0,A=2,N=0)}}function l(W){var sa=0>W;t.style.left=ia[0]+W+"px";t.style.transformOrigin=sa?H:Qa;t.style.transform="rotate( "+((sa?1:-1)*W/L.width).toString()+"rad )"}function p(){T=!1;var W=L.getBoundingClientRect();
ia[0]=W.left;ia[1]=W.top;t.width=Math.round(L.width/4);t.height=Math.round(L.height/4);v.width=t.width;v.height=t.height;t.style.width=L.offsetWidth+"px";t.style.height=L.offsetHeight+"px";t.style.left=ia[0]+"px";t.style.top=ia[1]+"px";setTimeout(w,0)}function w(){P.drawImage(L,0,0,t.width,t.height);V.drawImage(t,0,0);T=!0;document.body.appendChild(t);O&&(O(),O=!1)}function h(){t.style.transitionDuration="0ms";t.style.opacity="1";t.style.transform="";T&&(document.body.removeChild(t),T=!1)}function m(){ka&&
(window.clearTimeout(ka),ka=null)}function q(W){I(W,qa,0);I(W,ca,1);return Math.sqrt(qa[0]*qa[0]+ca[0]*ca[0])}function y(W,sa){void 0!==W.changedTouches||void 0!==W.touches?I(W,sa,0):(sa[0]=W.pageX,sa[1]=W.pageY)}function I(W,sa,Ia){W.touches.length>Ia?(sa[0]=W.touches[Ia].pageX,sa[1]=W.touches[Ia].pageY):(sa[0]=W.changedTouches[Ia].pageX,sa[1]=W.changedTouches[Ia].pageY)}function u(){F.forEach(function(W){L.removeEventListener(W.type,W.tb,!1)});return F.splice(0,F.length)}function x(W){W.forEach(function(sa){z(sa.type,
sa.tb)})}function z(W,sa){L.removeEventListener(W,sa,!1);t.removeEventListener(W,sa,!1);L.addEventListener(W,sa,!1);t.addEventListener(W,sa,!1);0===F.filter(function(Ia){return Ia.type===W&&Ia.tb===sa}).length&&F.push({type:W,tb:sa})}function g(W,sa,Ia,wa){E[W].forEach(function(gb){gb.tb(sa,Ia,wa)})}function k(W){return W[0]+"% "+(100-W[1]).toString()+"%"}var G=!1,L=null,E={swipeStart:[],swipeEnd:[],swipeLeft:[],swipeRight:[],swipeMove:[],swipeGetCanvas:[],pinch:[],pinchStart:[],pinchEnd:[],move:[],
moveStart:[],moveEnd:[]},F=[],e={idle:0,swipe:1,movePinch:2},n=e.idle,A=0,Q=[0,0],B=[0,0],D=[0,0],M=[0,0],t=document.createElement("canvas"),v=document.createElement("canvas"),P=t.getContext("2d"),V=v.getContext("2d");t.style.position="fixed";t.style.zIndex="800";t.style.cursor="move";t.style.pointerEvents="none";t.className="swipeImage";t.setAttribute("draggable",!1);var T=!1,ia=[0,0],O=null,ka=null,Qa=k([50,100]),H=k([50,0]),r=null,N=0,ba=[0,0],na=0,oa=!1,xa=1,qa=[0,0],ca=[0,0],ma={init:function(W){if(G)ma.switch_canvas(W.sa);
else return L=W.sa,z("mousedown",f),z("mouseup",d),z("mouseout",d),z("mousemove",b),z("mousemove",b),z("wheel",a),z("touchstart",f),z("touchend",d),z("touchmove",b),G=!0,ma},switch_canvas:function(W){if(!G)ma.init({sa:W});else if(L!==W){var sa=u();L=W;x(sa);for(var Ia in E)for(W=E[Ia],sa=W.length-1;0<=sa;--sa)W[sa].Nn&&W.splice(sa,1)}},get_mode:function(){for(var W in e)if(e[W]===n)return W;return!1},switch_mode:function(W){G&&"undefined"!==typeof e[W]&&(W=e[W],n!==W&&(m(),n=W,A=0))},add_listener:function(W,
sa,Ia){E[W].push({tb:sa,Nn:"undefined"===typeof Ia?!1:Ia});return ma},remove_listener:function(W){E[W].splice(0,E[W].length);return ma},animate_swipe:function(W,sa){r&&(clearInterval(r),r=null);p();var Ia=L.width/(sa/1E3)*("left"===W?-1:1),wa=0,gb,Ta=Date.now();r=setInterval(function(){r&&(gb=Date.now(),wa+=(gb-Ta)/1E3*Ia,l(wa),Ta=gb,Math.abs(wa)>.75*L.width&&r&&(clearInterval(r),r=null,h()))},16)}};return ma}();window.CanvasListeners=Eb;var S={VERSION:"4.4.5",ed:[],dd:[],Je:!1,Ie:!1,Ke:!1,ready:!1,
isBusy:!1},cb={idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,FOVdesktop:60,rotate:0,FOVmobile:60,FOVforced:0,He:10,Ge:8E3},J=Object.assign({},{Lc:!0,Zd:"models3D",Yd:"materials",Qo:"tweakers",neuralNetworkPath:"built/jeefitNNC_65_0.json",neuralNetworkVersion:"65_0",ea:"",wa:"",ad:"",Ca:0,vk:20,width:1024,height:1024,Ai:!0,vn:[2,3.5],lj:300,bd:[1,6],scanOverlapFactors:[2,2,3],scanNScaleLevels:2,scanScale0Factor:.7,ta:[.2,.2,.3],oc:[[.8,.5],[.8,.5],[1,1]],Oo:30,
sl:1,Fn:[.4,.75],En:1,Po:[.008,.03],Wn:[.002,.006],Qg:[0,.6],Pl:.2,ab:[.698111,1.047166,.122169],Sj:[-.1,0,0],fe:[0,-62,8],An:1.03,Ha:[0,-60,0],dg:50,eg:20,Cc:.4,pf:73,Me:[.05,1],tk:[4,1],Zk:[0,.5],Yn:.15,Vn:1,Rn:[1,4.5],ep:20,Sp:!1,Gc:145,Ef:-18,Cf:20,Df:3,Oc:[-110,0],jc:1,Hj:.4,Ij:3,pe:[0,0,0],kc:[1.1,1],qd:0,cf:.95,bf:90,af:50,jd:25,Mb:.1,Af:!0,Vd:!0,Vf:"images/masks/target.jpg",Wf:!1,Ud:[1/255,175/255,236/255,0],Wd:-.001,Uf:3.14,Qe:0,Pe:"images/masks/burka.png",Ne:Math.PI-Math.PI/4,$e:Math.PI/
4,tg:[.3,.2,.1],Zb:!0,Ji:[700,90],bn:[.2,.04],fp:"images/backgrounds/viewer3D.png",hh:[0,0,0],gh:[0,15,60],Ee:.3,np:50,jp:gd?Ka:!1,kp:gd?Ka:!1,mp:1E3,pp:1E3,lp:40,ip:[0,0,-400],Mi:.1,fn:.5,Ni:[.5,1.5],Xd:30,en:!0});U.Ch=!0;U.Dh=!0;U.Bh=!1;U.Qa=!0;var db={he:3.5,Cb:"images/debug/picsou.png",Tc:45,Sf:.785,Tf:.3925,Sd:5,Rd:2,Rf:0,Qf:0,gp:"images/backgrounds/bg1.jpg",hp:"images/backgrounds/bg1_light.jpg",fk:1,gk:2};J.fx=[4,50];J.Oc=[-110,0];J.Hj=.25;J.Ij=3;J.pe=[0,-2,20];J.kc=[.95,1];U.Rc=2.1289;U.ng=
1;db.he=2.5858;db.Sf=.4388;db.Tf=.118;db.Cb="images/debug/hdri2.png";db.Tc=180;db.wg=.8065;db.Sd=5.3887;db.Rd=.5351;db.Rf=-.3019;db.Qf=0;db.fk=3.5288;db.gk=6.2168;var Zc={element:null,Nh:null,Pd:!1,zh:null,V:null,Wg:null,deviceId:-1,qf:-1,wd:0,cj:null,De:-1},Da=Object.assign({},Zc),ab=null,hd=J.vn,Mc=window.devicePixelRatio?window.devicePixelRatio:1;var xc={Ol:Math.max(hd[0],Mc)/Mc,lf:Math.min(Mc,hd[1])};var fb=null;S.onLoad=function(a){S.ready?a():S.ed.push(a)};S.onHalfLoad=function(a){S.load_model?
a():S.dd.push(a)};S.onWebcamAsk=function(a){S.Je=a};S.onContextLost=function(a){S.Ie=a};S.onWebcamGet=function(a){S.Ke=a};S.get_onHalfLoadCallstack=function(){return S.dd};S.set_size=function(a,b,d){d=d?xc.lf:1;J.width=a*d;J.height=b*d};S.get_videoDevices=function(a){Vc(a)};S.set_videoDevice=function(a){Da.deviceId=a};S.set_videoSizes=function(a,b,d,f,l,p){cb.idealWidth=a;cb.idealHeight=b;cb.minWidth=d;cb.maxWidth=f;cb.minHeight=l;cb.maxHeight=p};S.set_loading=function(a,b,d){a&&(J.Wf=!0,J.Vf=a);
"number"===typeof b&&(a=new bc(b),J.Ud=[a.r,a.Z,a.b,0]);"number"===typeof d&&(J.Wd=d)};S.set_settings=function(a,b,d){a&&Object.assign(J,a);b&&Object.assign(cb,b);d&&Object.assign(db,d)};S.get_size=function(){return{width:J.width,height:J.height}};S.get_cv=function(){return mb.ub()};S.set_NNCPath=function(a){J.ad=a};S.set_materialsPath=function(a){J.Yd=a};S.set_modelsPath=function(a){J.Zd=a};S.destroy=function(){return fb?fb.A():Promise.resolve()};S.update_lightSettings=function(a){a=Object.assign({screenTextureURL:null,
screenLuminosity:-1,lightDirFactor:-1,lightAmbFactor:-1,screenWidthAngle:-1},a);0<=a.lightDirFactor&&(db.Sd=a.lightDirFactor);0<=a.lightAmbFactor&&(db.Rd=a.lightAmbFactor);0<=a.screenLuminosity&&(db.he=a.screenLuminosity);0<=a.screenWidthAngle&&(db.Tc=a.screenWidthAngle);a.screenTextureURL&&(db.Cb=a.screenTextureURL);S.ready&&(fb.Oj(),ya.La.rh(Da.V))};S.init2=function(a){var b=Object.assign({basePath:null,modelsPath:null,materialsPath:null,materialTextureBasePath:null,NNCPath:null,cv:null,isRequestCamera:!0,
width:512,height:512,isMirror:!0,isApplyOverSampling:!1,scanOverlapFactors:null,scanNScaleLevels:null,scanScale0Factor:null,callbackReady:null},a);J.Lc=b.isRequestCamera;S.set_size(b.width,b.height,b.isApplyOverSampling);S.update_lightSettings(a);b.modelsPath&&(J.Zd=b.modelsPath);b.materialsPath&&(J.Yd=b.materialsPath);b.materialTextureBasePath&&(U.Pi=b.materialTextureBasePath);b.NNCPath&&(J.ad=b.NNCPath);J.scanOverlapFactors=b.scanOverlapFactors||J.scanOverlapFactors;J.scanNScaleLevels=b.scanNScaleLevels||
J.scanNScaleLevels;J.scanScale0Factor=b.scanScale0Factor||J.scanScale0Factor;J.Ai=b.isMirror;return new Promise(function(d,f){S.onHalfLoad(d);S.init(b.basePath,function(){b.callbackReady&&b.callbackReady()},f,b.cv)})};S.init=function(a,b,d,f){fb=pd();S.ob=d?function(l,p){d(l,p);S.ob=!1}:function(){};S.vp=fb;a&&(J.ea=a);b&&S.ed.push(b);fb.Oj();a=fb.im();return mb.m({Ze:"jeefitCanvas",sa:f,width:a.width,height:a.height,debug:!1,hg:function(){S.Ie&&S.Ie()},premultipliedAlpha:!0})?J.Lc?$c():td():(S.ob&&
S.ob("GL_INCOMPATIBLE","Cannot init Context"),!1)};S.request_cameraVideoStream=function(){return $c().then(function(){fb.Ql(J.width,J.height,0)})};JEELIZVTO=S;var Xc=function(){function a(){Ca.aa();c.viewport(0,0,1,1);aa.set("s74");f.h(0);X.l(!1);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,p);b(0<p[0])}var b=null,d=!1,f=null,l=!1,p=null,w={m:function(h){if(l)return!1;f=h;aa.uc([{id:"s74",name:"_",g:"uniform sampler2D u41;const vec2 e=vec2(.16,.5);void main(){vec4 a=texture2D(u41,e);float b=step(1.99,a.r);gl_FragColor=vec4(b,0.,0.,1.);}",
i:["u41"],precision:"lowp"}]);aa.j("s74",[{type:"1i",name:"u41",value:0}]);p=new Uint8Array(4);return l=!0},start:function(h,m){w.stop();b=m;d=window.setInterval(a,h)},stop:function(){d&&(window.clearInterval(a),d=!1)}};return w}(),Nc={};bc.prototype={constructor:bc,r:1,Z:1,b:1,set:function(a){a instanceof bc?this.N(a):"number"===typeof a?bd(this,a):"string"===typeof a&&ud(this,a);return this},ao:function(){function a(b,d,f){0>f&&(f+=1);1<f&&--f;return f<1/6?b+6*(d-b)*f:.5>f?d:f<2/3?b+6*(d-b)*(2/
3-f):b}return function(b,d,f){b=Nc.Math.Up(b,1);d=Nc.Math.Ue(d,0,1);f=Nc.Math.Ue(f,0,1);0===d?this.r=this.Z=this.b=f:(d=.5>=f?f*(1+d):f+d-f*d,f=2*f-d,this.r=a(f,d,b+1/3),this.Z=a(f,d,b),this.b=a(f,d,b-1/3));return this}}(),clone:function(){return new this.constructor(this.r,this.Z,this.b)},N:function(a){this.r=a.r;this.Z=a.Z;this.b=a.b;return this},add:function(a){this.r+=a.r;this.Z+=a.Z;this.b+=a.b;return this},multiply:function(a){this.r*=a.r;this.Z*=a.Z;this.b*=a.b;return this},Fa:function(a){this.r*=
a;this.Z*=a;this.b*=a;return this},sb:function(a,b){void 0===b&&(b=0);this.r=a[b];this.Z=a[b+1];this.b=a[b+2];return this}};var vd={};zc.prototype={constructor:zc,get x(){return this.F},set x(a){this.F=a},get y(){return this.G},set y(a){this.G=a},get z(){return this.H},set z(a){this.H=a},get w(){return this.T},set w(a){this.T=a},set:function(a,b,d,f){this.F=a;this.G=b;this.H=d;this.T=f;return this},clone:function(){return new this.constructor(this.F,this.G,this.H,this.T)},N:function(a){this.F=a.x;
this.G=a.y;this.H=a.z;this.T=a.w;return this},inverse:function(){this.F*=-1;this.G*=-1;this.H*=-1;this.normalize();return this},sd:function(a){return this.F*a.F+this.G*a.G+this.H*a.H+this.T*a.T},Pf:function(){return this.F*this.F+this.G*this.G+this.H*this.H+this.T*this.T},length:function(){return Math.sqrt(this.F*this.F+this.G*this.G+this.H*this.H+this.T*this.T)},normalize:function(){var a=this.length();0===a?(this.H=this.G=this.F=0,this.T=1):(a=1/a,this.F*=a,this.G*=a,this.H*=a,this.T*=a);return this},
multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),cd(this,a,b)):cd(this,this,a)},sb:function(a,b){void 0===b&&(b=0);this.F=a[b];this.G=a[b+1];this.H=a[b+2];this.T=a[b+3];return this}};cc.prototype={constructor:cc,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},qj:function(a){this.x=a;
return this},rj:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y)},N:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.fd(a,b);this.x+=a.x;this.y+=a.y;return this},fd:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.gb(a,b);this.x-=a.x;this.y-=a.y;return this},gb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},Fa:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},ff:function(a){return this.Fa(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},Ue:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},sd:function(a){return this.x*a.x+this.y*a.y},Pf:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.ff(this.length())},
sb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this}};Xa.prototype={constructor:Xa,set:function(a,b,d){this.x=a;this.y=b;this.z=d;return this},qj:function(a){this.x=a;return this},rj:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y,this.z)},N:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
this.fd(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},fd:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.gb(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},gb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this;this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},Fa:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},ff:function(a){return this.Fa(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},Ue:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},sd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},Pf:function(){return this.x*
this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.ff(this.length())},sb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this}};dc.ik="XYZ";dc.prototype={constructor:dc,get x(){return this.F},set x(a){this.F=a},get y(){return this.G},set y(a){this.G=a},get z(){return this.H},set z(a){this.H=a},get order(){return this.Sa},set order(a){this.Sa=a},set:function(a,b,d,f){this.F=
a;this.G=b;this.H=d;this.Sa=f||this.Sa;return this},clone:function(){return new this.constructor(this.F,this.G,this.H,this.Sa)},N:function(a){this.F=a.F;this.G=a.G;this.H=a.H;this.Sa=a.Sa;return this},sb:function(a){this.F=a[0];this.G=a[1];this.H=a[2];void 0!==a[3]&&(this.Sa=a[3]);return this}};Jc.prototype={constructor:Jc,set:function(a,b){this.min.N(a);this.max.N(b);return this},clone:function(){return(new this.constructor).N(this)},N:function(a){this.min.N(a.min);this.max.N(a.max);return this},
empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},size:function(a){return(a||new Xa).gb(this.max,this.min)},getParameter:function(a,b){return(b||new Xa).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},translate:function(a){this.min.add(a);this.max.add(a);return this}};ec.prototype={constructor:ec,set:function(a,b,d,f,l,p,w,h,m,q,y,I,u,x,z,g){var k=this.elements;k[0]=a;k[4]=b;
k[8]=d;k[12]=f;k[1]=l;k[5]=p;k[9]=w;k[13]=h;k[2]=m;k[6]=q;k[10]=y;k[14]=I;k[3]=u;k[7]=x;k[11]=z;k[15]=g;return this},clone:function(){return(new ec).sb(this.elements)},N:function(a){this.elements.set(a.elements);return this},multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),ed(this,a,b)):ed(this,this,a)},Fa:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=
a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},translate:function(){console.error("JETHREE.Matrix4: .translate() has been removed.")},scale:function(a){var b=this.elements,d=a.x,f=a.y;a=a.z;b[0]*=d;b[4]*=f;b[8]*=a;b[1]*=d;b[5]*=f;b[9]*=a;b[2]*=d;b[6]*=f;b[10]*=a;b[3]*=d;b[7]*=f;b[11]*=a;return this},sb:function(a){this.elements.set(a);return this}};Kc.prototype={constructor:Kc,
clone:function(){return(new this.constructor).N(this)},N:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.Ga.N(a.Ga);this.color.N(a.color);this.$b=a.$b;for(var b=0,d=a.Ce.length;b<d;b++)this.Ce[b]=a.Ce[b].clone();b=0;for(d=a.eh.length;b<d;b++)this.eh[b]=a.eh[b].clone();return this}};var C=function(){function a(e,n,A){n=e.createShader(n);e.shaderSource(n,A);e.compileShader(n);return e.getShaderParameter(n,e.COMPILE_STATUS)?n:!1}function b(e,n){fa.na()&&(n.g=n.g.replace(/gl_FragData\[([0-3])\]/g,"gbuf$1"));
n.zf=a(e,e.VERTEX_SHADER,n.v,n.name+" VERTEX");n.yf=a(e,e.FRAGMENT_SHADER,n.g,n.name+" FRAGMENT");var A=e.createProgram();e.attachShader(A,n.zf);e.attachShader(A,n.yf);e.linkProgram(A);return A}function d(e){e.v="#version 300 es\n"+e.v.replace(/varying/g,"out");e.g="#version 300 es\n"+e.g.replace(/varying/g,"in");e.v=e.v.replace(/texture2D\(/g,"texture(");e.g=e.g.replace(/texture2D\(/g,"texture(");e.fa||(e.g=e.g.replace(/void main/g,"out vec4 FragColor;\nvoid main"),e.g=e.g.replace(/gl_FragColor/g,
"FragColor"));var n=0,A=[];e.v=e.v.replace(/attribute ([a-z]+[0-4]*) ([_a-zA-Z,0-9\s]+);/g,function(Q,B,D){var M="";D.split(",").forEach(function(t){t=t.trim();M+="layout(location = "+n+") in "+B+" "+t+";\n";A.push(t);++n});return M});e.pk=A}function f(e){return["float","sampler2D","int"].map(function(n){return"precision "+e+" "+n+";\n"}).join("")}function l(e,n){if(n.si)return!1;var A=fa.na();U.oq||A||e.enableVertexAttribArray(0);void 0===n.fa&&(n.fa=!1);n.fa&&(n.cd=A?3:2);n.id=L++;void 0===n.cd&&
(n.cd=2);void 0===n.precision&&(n.precision=E.high);n.fa&&(n.g=(fa.na()?"precision highp float;\n          layout(location = 0) out vec4 gbuf0;\n          layout(location = 1) out vec4 gbuf1;\n          layout(location = 2) out vec4 gbuf2;\n          layout(location = 3) out vec4 gbuf3;\n":"#extension GL_EXT_draw_buffers : require\n")+n.g);void 0===n.v&&(n.v="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");var Q=f(n.precision);
n.g=Q+n.g;n.v=Q+n.v;A&&3<=n.cd&&d(n);n.Ia&&n.Ia.forEach(function(B){n.v=n.v.replace(B.search,B.replace);n.g=n.g.replace(B.search,B.replace)});n.qa=b(e,n);n.B={};n.i.forEach(function(B){n.B[B]=e.getUniformLocation(n.qa,B)});n.attributes={};n.xa=[];n.dh=0;void 0===n.K&&(n.K=["a0"]);void 0===n.S&&(n.S=[2]);n.K.forEach(function(B,D){var M=A&&3<=n.cd?n.pk.indexOf(B):e.getAttribLocation(n.qa,B);n.attributes[B]=M;n.xa.push(M);n.dh+=4*n.S[D]});n.set=function(){k!==n.id&&(-1!==k&&G.M(),k=n.id,G=n,e.useProgram(n.qa),
n.xa.forEach(function(B){0!==B&&e.enableVertexAttribArray(B)}))};n.M=function(){k=-1;n.xa.forEach(function(B){0!==B&&e.disableVertexAttribArray(B)})};n.si=!0}function p(e,n){l(e,n);n.set();k=-1;return n}function w(){return{name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:E.high}}function h(){F.j("s107",[{type:"1i",name:"u1",value:0}]);F.j("s108",[{type:"1i",name:"u156",value:0}]);F.j("s109",[{type:"1i",name:"u75",value:0}])}function m(){var e=
"u41 u146 u147 u148 u149 u42 u80".split(" ").concat(x,z);g.s110={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",v:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u154;uniform float u147,u152,u153,u148,u149,u155;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u87*e;vec3 c=u87*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u81,0.,0.),u84,c);float u=mix(texture2D(u41,r).r,0.,u87);a.z+=u;mat3 v=s(a);vec3 w=mix(u146,u85,c);float x=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u83,1.,u87);vec2 j=u82/t;vec3 k=a0;float A=max(0.,-a0.z-u148)*u149;k.x+=A*sign(a0.x)*(1.-u87);vec3 l=v*(k+w)*x+b;vec2 B=j*z;vec3 C=vec3(g*B,-j)+l*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(C,1.)),vv0=l,vv1=smoothstep(u152,u153,a0.z);}",
i:["u152","u153"].concat(e),K:["a0"],precision:E.high};g.s111={name:"_",g:"uniform sampler2D u1;uniform vec3 u150;uniform float u73,u74;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u150,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u150,b,u73),a.a*(1.-u74));gl_FragColor=c;}",v:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u154;uniform float u147,u148,u149,u155;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u87*e;vec3 c=u87*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u81,0.,0.),u84,c);float s=mix(texture2D(u41,p).r,0.,u87);a.z+=s;mat3 t=q(a);vec3 u=mix(u146,u85,c);float v=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u83,1.,u87);vec2 j=u82/r;vec3 k=a0;float y=max(0.,-a0.z-u148)*u149;k.x+=y*sign(a0.x)*(1.-u87);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u150"].concat(I,e),K:["a0","a1"],S:[3,2],precision:E.low};g.s112={name:"_",g:"uniform vec3 u150;void main(){gl_FragColor=vec4(u150,0.);}",v:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u154;uniform float u147,u148,u149,u155;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u87*e;vec3 c=u87*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u81,0.,0.),u84,c);float r=mix(texture2D(u41,o).r,0.,u87);a.z+=r;mat3 s=p(a);vec3 t=mix(u146,u85,c);float u=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u83,1.,u87);vec2 j=u82/q;vec3 k=a0;float x=max(0.,-a0.z-u148)*u149;k.x+=x*sign(a0.x)*(1.-u87);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(A,1.));}",
i:["u150"].concat(e),S:[3],precision:E.low};g.s113={name:"_",g:"uniform vec4 u13;varying vec3 vv0;varying float vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv1);gl_FragColor=vec4(normalize(vv0),a);}",v:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u154;uniform float u147,u148,u149,u155;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u87*e;vec3 c=u87*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u81,0.,0.),u84,c);float u=mix(texture2D(u41,r).r,0.,u87);a.z+=u;mat3 h=s(a);vec3 v=mix(u146,u85,c);float w=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 x=mat2(i,j,-j,i);b.xy=x*b.xy;float y=mix(u83,1.,u87);vec2 k=u82/t;vec3 l=a0;float z=max(0.,-a0.z-u148)*u149;l.x+=z*sign(a0.x)*(1.-u87);vec3 A=h*(l+v)*w+b;vec2 B=k*y;vec3 C=vec3(g*B,-k)+A*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(C,1.)),vv0=h*a2*vec3(1.,-1.,-1.),vv1=a0.y;}",
i:["u13","u80"].concat(e),K:["a0","a2"],precision:E.high};g.s114={name:"_",g:"uniform sampler2D u156;uniform vec4 u13;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=vec3(0.,0.,-1.),c=normalize(vv1),b=texture2D(u156,vv2).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv1:a;float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3);gl_FragColor=vec4(a,m);}",v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u154;uniform float u147,u148,u149,u155;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 F=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 f=u87*e;vec3 c=u87*q;vec2 v=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u81,0.,0.),u84,c);float w=mix(texture2D(u41,t).r,0.,u87);a.z+=w;mat3 h=u(a);vec3 x=mix(u146,u85,c);float y=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u83,1.,u87);vec2 k=u82/v;vec3 l=a0;float B=max(0.,-a0.z-u148)*u149;l.x+=B*sign(a0.x)*(1.-u87);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv0=a3,vv2=a1,vv3=a0.y;}",
i:["u13","u80","u156"].concat(e),K:["a3","a0","a2","a1"],S:[4,3,3,2],precision:E.high};g.s115={name:"_",g:"uniform vec4 u114;uniform float u151;void main(){float b=u151;vec4 a=u114;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",v:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u154;uniform float u147,u148,u149,u155;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u87*e;vec3 c=u87*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u81,0.,0.),u84,c);float r=mix(texture2D(u41,o).r,0.,u87);a.z+=r;mat3 s=p(a);vec3 t=mix(u146,u85,c);float u=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u83,1.,u87);vec2 j=u82/q;vec3 k=a0;float x=max(0.,-a0.z-u148)*u149;k.x+=x*sign(a0.x)*(1.-u87);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(A,1.));}",
i:["u114","u151"].concat(e),precision:E.low};g.s116={name:"_",g:"uniform sampler2D u75;uniform vec4 u114,u76;uniform float u151;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u151;vec4 a=u114,d=texture2D(u75,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u76*e),c=mix(c,l,u76.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
v:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u154;uniform float u147,u148,u149,u155;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u87*e;vec3 c=u87*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u81,0.,0.),u84,c);float s=mix(texture2D(u41,p).r,0.,u87);a.z+=s;mat3 t=q(a);vec3 u=mix(u146,u85,c);float v=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u83,1.,u87);vec2 j=u82/r;vec3 k=a0;float y=max(0.,-a0.z-u148)*u149;k.x+=y*sign(a0.x)*(1.-u87);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u114","u151"].concat(u,e),K:["a0","a1"],S:[3,2],precision:E.low};e=["u139","u127","u140"];g.s117={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",v:"attribute vec3 a0;uniform mat4 u139,u127,u140;varying vec3 vv0;varying float vv1;void main(){vec4 a=u140*vec4(a0,1.);gl_Position=u139*u127*a,vv0=a.xyz,vv1=1.;}",i:e,precision:E.high};g.s118={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(normalize(vv0),1.);}",v:"attribute vec3 a0,a2;uniform mat4 u139,u127,u140;varying vec3 vv0;varying float vv1;void main(){vec4 a=u140*vec4(a2,0.);gl_Position=u139*u127*u140*vec4(a0,1.),vv0=a.xyz,vv1=a0.y;}",
i:e,K:["a0","a2"],precision:E.high};g.s108={name:"_",g:"uniform sampler2D u156;uniform vec3 u157;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=normalize(vv1+u157),c=normalize(vv2),b=texture2D(u156,vv3).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv2:a,gl_FragColor=vec4(a,1.);}",v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u139,u127,u140;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;void main(){vec4 b=u140*vec4(a2,0.),a=u140*vec4(a0,1.);gl_Position=u139*u127*a,vv0=a3,vv2=b.xyz,vv3=a1,vv1=a.xyz;}",
i:["u156","u157"].concat(e),K:["a0","a2","a1","a3"],precision:E.high};g.s107={name:"_",g:"uniform sampler2D u1;uniform vec3 u150;uniform float u73,u74;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u150,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u150,b,u73),a.a*(1.-u74));gl_FragColor=c;}",v:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u139,u127,u140;varying vec2 vv0;const vec4 f=vec4(0.,0.,5e-4,0.);void main(){gl_Position=u139*u127*u140*vec4(a0,1.)+f,vv0=a1;}",i:["u150"].concat(I,e),
K:["a0","a1"],Ia:[{search:"0.0005",replace:Ha.ja()?"0.0005":"0.0"}],precision:E.low};g.s119={name:"_",g:"uniform vec4 u114;uniform float u151;void main(){float b=u151;vec4 a=u114;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",v:"attribute vec3 a0;uniform mat4 u139,u127,u140;void main(){gl_Position=u139*u127*u140*vec4(a0,1.);}",i:["u114"].concat(e),precision:E.high};g.s109={name:"_",g:"uniform sampler2D u75;uniform vec4 u114,u76;uniform float u151;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u151;vec4 a=u114,d=texture2D(u75,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u76*e),c=mix(c,l,u76.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
v:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u139,u127,u140;varying vec2 vv0;void main(){gl_Position=u139*u127*u140*vec4(a0,1.),vv0=a1;}",i:["u114"].concat(u,e),K:["a0","a1"],S:[3,2],precision:E.high}}function q(){for(var e in g)l(c,g[e])}var y=!1,I=["u1","u73","u74"],u=["u75","u76"],x="u77 u78 u79 u80 u81 u82 u83".split(" "),z="u84 u85 u86 u87 u88 u89".split(" "),g={},k=-1,G=null,L=0,E={high:"highp",zq:"mediump",low:"lowp"},F={oa:function(e,n){g[e]=n;y&&l(c,g[e])},Fq:function(e,n){g[e]=n;
n.si=!1;l(c,g[e])},Ab:function(){return y},m:function(){g.s0=w();g.s75={name:"_",g:"uniform sampler2D u1;uniform vec2 u90;uniform float u91;varying vec2 vv0;void main(){vec4 a=texture2D(u1,u90*vv0);gl_FragColor=vec4(pow(a.rgb,u91*vec3(1.)),a.a);}",i:["u1","u91","u90"],precision:E.high};g.s1={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:E.low};g.s76={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(-1.,1.)*vv0+vec2(1.,0.));}",
i:["u1"],precision:E.low};g.s77={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec3 f=vec3(1.);void main(){gl_FragColor=vec4(mix(texture2D(u12,vv0).rgb,texture2D(u1,vv0).rgb,u13*f),1.);}",i:["u1","u12","u13"],precision:E.high};g.s78={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){gl_FragColor=mix(texture2D(u12,vv0),texture2D(u1,vv0),u13*f);}",i:["u1","u12","u13"],precision:E.high};g.s12={name:"_",g:"uniform sampler2D u1,u92;uniform vec2 u93;uniform float u94;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 b=texture2D(u92,vv0*u93),c=texture2D(u1,vv0*u93);float a=smoothstep(u94,0.,vv0.y);a+=smoothstep(1.-u94,1.,vv0.y),gl_FragColor=mix(c,b,a*f);}",
i:["u1","u93","u92","u94"],precision:E.high};g.s80={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);if(a.a<.5)discard;gl_FragColor=a;}",i:["u1"],precision:E.low};g.s81={name:"_",g:"uniform sampler2D u1,u95;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;gl_FragColor=vec4(b/5.,1.);}",
i:["u1","u14"],precision:E.low};g.s82={name:"_",g:"uniform sampler2D u1,u95,u41;uniform vec2 u14,u96;varying vec2 vv0;const vec3 k=vec3(1.,1.,1.);const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;float c=texture2D(u41,vec2(.5,.5)).a,d=u96.x+pow(c,2.)*(u96.y-u96.x);vec3 j=mix(b/5.,texture2D(u95,a).rgb,d);gl_FragColor=vec4(j,1.);}",
i:["u1","u95","u14","u41","u96"],precision:E.low};g.s83={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec3 f=vec3(.299,.587,.114);const float m=.007813,n=.125,h=8.;void main(){vec2 x=vv0;vec3 o=texture2D(u1,vv0+vec2(-1.,-1.)*u14).xyz,p=texture2D(u1,vv0+vec2(1.,-1.)*u14).xyz,q=texture2D(u1,vv0+vec2(-1.,1.)*u14).xyz,r=texture2D(u1,vv0+vec2(1.,1.)*u14).xyz,s=texture2D(u1,vv0).xyz;float b=dot(o,f),c=dot(p,f),e=dot(q,f),g=dot(r,f),i=dot(s,f),t=min(i,min(min(b,c),min(e,g))),u=max(i,max(max(b,c),max(e,g)));vec2 a;a.x=-(b+c-(e+g)),a.y=b+e-(c+g);float v=max((b+c+e+g)*(.25*n),m),w=1./(min(abs(a.x),abs(a.y))+v);a=min(vec2(h,h),max(vec2(-h,-h),a*w))*u14;vec3 j=.5*(texture2D(u1,vv0+a*-.166667).rgb+texture2D(u1,vv0+a*.166667).rgb),k=j*.5+.25*(texture2D(u1,vv0+a*-.5).rgb+texture2D(u1,vv0+a*.5).rgb);float l=dot(k,f);gl_FragColor=l<t||l>u?vec4(j,1.):vec4(k,1.);}",
i:["u1","u14"],precision:E.low};g.s84={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);gl_FragColor=b/5.;}",i:["u1","u14"],precision:E.low};g.RGBEtoRGB={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",
i:["u1"],precision:E.high};g.s13={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(0.);vec4 g(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),h=exp2(c);vec3 i=clamp(b/h,0.,1.);return vec4(i,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=g(max(a,f));}",i:["u1"],precision:E.high};g.s85={name:"_",g:"uniform sampler2D u1;uniform vec2 u90;uniform float u91;varying vec2 vv0;const vec3 j=vec3(0.),f=vec3(1.);vec4 g(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),h=exp2(c);vec3 i=clamp(b/h,0.,1.);return vec4(i,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0*u90).rgb,b=pow(a,u91*f);gl_FragColor=g(b);}",
i:["u1","u91","u90"],precision:E.high};g.s86={name:"_",g:"uniform sampler2D u97,u98;uniform float u99,u100;varying vec2 vv0;void main(){vec3 a=texture2D(u98,vv0).rgb,b=texture2D(u97,vv0).rgb;gl_FragColor=vec4(b*u100+u99*a,1.);}",i:["u97","u98","u99","u100"],precision:E.high};g.s87={name:"_",g:"uniform sampler2D u101,u102;uniform float u91;varying vec2 vv0;const int j=8888;const float e=3.141592;const vec2 k=vec2(0.,0.);const vec3 n=vec3(1.,1.,1.),o=vec3(0.,0.,0.);void main(){float p=e*(vv0.x*2.-1.),q=e/2.*(vv0.y*2.-1.),b,c,r,l,m;vec4 d;vec3 f=o;vec2 g=k,a=k;for(int h=0;h<j;h+=1)a.x=float(h),a.y=floor(a.x/64.),d=texture2D(u102,a/64.),b=e*d.r,c=2.*asin(sqrt(.25+d.g*.25)),l=p+c*cos(b),m=q+c*sin(b),g.x=.5+.5*l/e,g.y=.5+m/e,f+=pow(texture2D(u101,g).rgb,u91*n);f/=float(j),gl_FragColor=vec4(f,1.);}",
i:["u101","u102","u91"],precision:E.low,Ia:[{search:"8888",replace:U.Hm[fa.X()]}]};g.s88={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);float b=.031496*texture2D(u1,vv0-3.*u14).a+.110236*texture2D(u1,vv0-2.*u14).a+.220472*texture2D(u1,vv0-u14).a+.275591*a.a+.220472*texture2D(u1,vv0+u14).a+.110236*texture2D(u1,vv0+2.*u14).a+.031496*texture2D(u1,vv0+3.*u14).a;gl_FragColor=vec4(a.rgb,4.*b);}",i:["u1","u14"],precision:E.low};g.s89={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=.3*pow(a.a,2.);gl_FragColor=vec4(a.rgb+b*f,1.);}",
i:["u1"],precision:E.low};g.s90={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.031496*texture2D(u1,vv0-3.*u14)+.110236*texture2D(u1,vv0-2.*u14)+.220472*texture2D(u1,vv0-u14)+.275591*texture2D(u1,vv0)+.220472*texture2D(u1,vv0+u14)+.110236*texture2D(u1,vv0+2.*u14)+.031496*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u1","u14"],precision:E.low};g.s91={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0-3.*u14)+texture2D(u1,vv0-2.*u14)+texture2D(u1,vv0-u14)+texture2D(u1,vv0)+texture2D(u1,vv0+u14)+texture2D(u1,vv0+2.*u14)+texture2D(u1,vv0+3.*u14);gl_FragColor=a/7.;}",
i:["u1","u14"],precision:E.low};g.s92={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.);const float e=256.;void main(){vec4 b=g;float c=0.;vec2 d;for(float a=0.;a<e;a+=1.)d=vec2((a+.5)/e,vv0.y),b+=texture2D(u1,d),c+=1.;gl_FragColor=b/c;}",i:["u1"],precision:E.high};g.s93={name:"_",g:"uniform sampler2D u1,u92;varying vec2 vv0;const vec4 h=vec4(1.,1.,1.,1.);const float f=0.,g=.3;void main(){vec4 b=texture2D(u92,vv0),c=texture2D(u1,vv0);float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=mix(c,b,a*h);}",
i:["u1","u92"],precision:E.high};g.s94={name:"_",g:"uniform sampler2D u1,u92;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);const float f=0.,g=.3;vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),j=exp2(c);vec3 k=clamp(b/j,0.,1.);return vec4(k,(c+128.)/256.);}void main(){vec3 b=texture2D(u92,vv0).rgb,c=texture2D(u1,vv0).rgb;float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=i(mix(c,b,a*h));}",i:["u1","u92"],precision:E.high};g.s95=
{name:"_",g:"uniform sampler2D u1,u103,u2,u104;uniform vec4 u105;uniform vec2 u106;uniform float u107,u108,u109,u110;varying vec2 vv0;const vec2 g=vec2(1.,1.),h=vec2(.5,.5);const float e=3.141592;void main(){vec4 d=texture2D(u1,vv0),i=texture2D(u103,vec2(1.-vv0.x,vv0.y));float j=step(texture2D(u104,vec2(.25,.5)).r,1.);vec2 a=vv0*2.-g;float k=texture2D(u2,a*u106*.5+h).r,l=atan(a.x,a.y),m=-(mod(u107,2.*e)-e),b=mod(l-m+e,2.*e)-e,n=smoothstep(0.,u108,b),c=.5+u110*(.5-n);c*=(sign(b)+1.)/2.;vec4 o=i+c*u105*k;gl_FragColor=mix(d,o,j*u109);}",
i:"u1 u2 u104 u103 u105 u107 u108 u109 u106 u110".split(" "),precision:E.low};var e="u111 u112 u113 u114 u101 u115 u3 u116 u103 u117 u118 u119 u120 u121 u14".split(" ");U.ga_&&(g.s96={name:"_",g:"uniform sampler2D u111,u112,u113,u114,u101,u115,u122,u103;uniform vec3 u116,u119;uniform vec2 u14;uniform float u3,u123,u118,u120,u117;varying vec2 vv0;const float j=3.141592;const vec3 u=vec3(0.,0.,0.),v=vec3(.299,.587,.114);const float w=2.;vec3 l(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 x(vec3 a){float b=atan(a.x,a.z),c=acos(-a.y);return vec2(.5-.5*b/j,1.-c/j);}vec2 y(vec3 a,float b){vec2 d=vec2(1.,.5)/pow(2.,b),f=vec2(0.,1.-pow(.5,b));float g=atan(a.x,a.z),h=acos(-a.y),c=.5+.5*g/j,i=h/j,k=pow(2.,b)/u117;c=(1.-k)*c;return f+vec2(c,i)*d;}void main(){vec4 c=texture2D(u111,vv0);vec3 k=texture2D(u103,vec2(1.-vv0.x,vv0.y)).rgb;if(c.a<.01){gl_FragColor=vec4(k,0.);return;}float z=c.a;vec3 A=c.rgb,B=A+u116;vec4 b=texture2D(u114,vv0),m=texture2D(u112,vv0);vec3 d=m.rgb;float f=m.a;vec4 n=texture2D(u113,vv0);vec3 C=n.rgb;float o=b.r,D=b.g,p=floor(b.b*255.),g=floor(p/16.),E=(p-16.*g)/16.;g/=16.;float F=b.a;f=1.-(1.-f)*(1.-n.a);vec2 G=x(-d);vec3 q=(1.-F)*l(texture2D(u115,G)),r=normalize(B),h=u,s=reflect(-r,d);vec2 H=y(s,floor(D*u3));float I=acos(-s.z),J=smoothstep(u118-u120,u118+u120,I);h=mix(l(texture2D(u101,H)),u119,J);float a=o+(E-o)*pow(1.-dot(d,-r),g*16.);a=clamp(a,0.,1.);float t=1.-u123*texture2D(u122,vv0).r;h*=pow(t,2.),q*=t;vec3 i=C*mix(q,h,a),M=mix(k,i,z*(f*(1.-a)+a));float K=dot(i,v),L=max(0.,(K-1.)/(w-1.));gl_FragColor=vec4(i,L);}",
i:e.concat(["u122","u123"]),precision:E.high});g.s97={name:"_",g:"uniform sampler2D u111,u112,u113,u114,u101,u115,u103;uniform vec3 u116,u119;uniform vec2 u14;uniform float u3,u118,u120,u121,u124,u125,u117,u126;varying vec2 vv0;const float g=3.141592;const vec3 G=vec3(0.),l=vec3(1.),H=vec3(.299,.587,.114);const float I=2.;vec3 r(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 J(vec3 a){float b=atan(a.x,-a.z),c=acos(-a.y);return vec2(.5-.5*b/g,1.-c/g);}vec2 K(vec3 b,float c){float a=pow(2.,c),e=u117/8.;a=min(a,e);vec2 f=vec2(1.,.5)/a,h=vec2(-.5/u117,1.-1./a-.5/u117);float i=atan(b.x,b.z),j=acos(-b.y);vec2 k=vec2(.5+.5*i/g,j/g);return h+k*f;}float m(vec3 a,vec3 b){return abs(acos(dot(a,b)));}float n(vec2 a){float b=texture2D(u111,a).a;return step(.01,b);}vec3 o(vec2 a){return texture2D(u103,vec2(1.-a.x,a.y)).rgb;}void main(){vec4 h=texture2D(u111,vv0);if(h.a<.01)gl_FragColor=vec4(o(vv0),0.);float i=h.a;vec3 L=h.rgb,M=L+u116;vec4 c=texture2D(u114,vv0),s=texture2D(u112,vv0);vec3 a=s.rgb;float j=s.a;vec4 k=texture2D(u113,vv0);vec3 e=k.rgb;if(i>1.){gl_FragColor=vec4(mix(o(vv0),e,k.a),1.);return;}e=pow(e,u124*l);float t=c.r,N=c.g,O=c.a,u=floor(c.b*255.),p=floor(u/16.),P=(u-16.*p)/16.;p/=16.,j=1.-(1.-j)*(1.-k.a);vec2 v=vv0+vec2(-1.,0.)*u14,w=vv0+vec2(1.,0.)*u14,x=vv0+vec2(0.,1.)*u14,y=vv0+vec2(0.,-1.)*u14;vec3 Q=texture2D(u112,v).rgb,R=texture2D(u112,w).rgb,S=texture2D(u112,x).rgb,T=texture2D(u112,y).rgb;float U=m(a,Q)*n(v),V=m(a,R)*n(w),W=m(a,S)*n(x),X=m(a,T)*n(y),Y=2.*max(max(U,V),max(W,X)),Z=1.2*clamp(Y/g,0.,1.),_=max(N,Z);vec2 aa=J(a);vec3 ba=r(texture2D(u115,aa)),ca=(1.-O)*ba,z=normalize(M),A=G,B=reflect(-z,a);float da=floor(_*u3);vec2 ea=K(B,da);float fa=acos(-B.z),ga_=smoothstep(u118-u120,u118+u120,fa);vec3 ha=r(texture2D(u101,ea));A=mix(ha,u119,ga_*u121);float b=t+(P-t)*pow(1.+dot(a,z),p*15.);b=clamp(b,0.,1.);vec2 C=vv0;vec3 D=refract(vec3(0.,0.,-1.),a,.666667);float ia=smoothstep(.1,.3,length(D.xy)),E=sqrt(u14.y/u14.x),ja=smoothstep(.3,.8,i);C+=ja*D.xy*vec2(1./E,E)*ia*.03;vec3 ka=e*mix(ca,A,b);float q=i*(j*(1.-b)+b);vec3 f=mix(o(C),pow(ka,l/u124),q);float F=dot(f,H),la=max(0.,(F-1.)/(I-1.));f=mix(F*l,f,mix(1.,u125,q)*l);float ma=mix(la,q,u126);gl_FragColor=vec4(f,ma);}",
i:e.concat(["u126","u124","u125"]),precision:E.high};U.ga_&&(g.s98={name:"_",g:"uniform sampler2D u111,u112;uniform mat4 u127;uniform vec2 u128,u14,u129;uniform float u130,u131,u132,u133,u134,u135,u136,u137,u123;varying vec2 vv0;const float PI=3.141593,HALFPI=1.570796,N=8888.8;void main(){vec2 uvt=vv0+u129;vec4 pos=texture2D(u111,uvt);if(pos.a<.01){gl_FragColor=vec4(0.,0.,0.,1.);return;}vec3 co0=pos.rgb;float c=cos(u130),s=sin(u130);vec3 no0=texture2D(u112,uvt).rgb;float zv=(u127*vec4(co0,1.)).z;vec3 co;vec2 scale=u128/abs(zv),uv,duv=u14*vec2(c,s)*scale;vec3 dp,dpn;float dzMax=0.,angleMin=0.,angle;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u111,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u136,u137,length(dp)),angleMin=max(angleMin,angle),dzMax=max(dzMax,sin(angle)*length(dp));float angleMinInv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u111,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u136,u137,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMinInv=max(angleMinInv,angle);duv=u14*vec2(s,c)*scale;float angleMin2=0.;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u111,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u136,u137,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2=max(angleMin2,angle);float angleMin2Inv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u111,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u136,u137,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2Inv=max(angleMin2Inv,angle);float omegaMin=PI/4.*(angleMin+angleMinInv)*(angleMin2+angleMin2Inv),dzFactor=clamp(dzMax/u133,u134,1.),ao=dzFactor*clamp(u132*omegaMin*u135,0.,u123);gl_FragColor=vec4(ao,ao,ao,u131);}",
i:"u111 u112 u132 u131 u130 u14 u138 u133 u134 u135 u136 u137 u127 u128 u123".split(" "),Ia:[{search:"8888.8",replace:U.Jk[fa.X()].toFixed(1)}],precision:E.low},g.s99={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4),j=vec2(-1.9,.9),k=vec2(.9,1.9),l=vec2(-.9,-1.9),m=vec2(1.9,-.9);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);b+=texture2D(u1,a+u14*j)+texture2D(u1,a+u14*k)+texture2D(u1,a+u14*l)+texture2D(u1,a+u14*m),gl_FragColor=b/9.;}",
i:["u1","u14"],precision:E.low});g.s100={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(vv0,1.);}",v:"attribute vec3 a0;uniform mat4 u139,u127,u140;varying vec3 vv0;void main(){vec4 a=u139*u127*u140*vec4(a0,1.);gl_Position=a,vv0=a.xyz/a.w;}",i:["u139","u127","u140"],precision:E.low};g.s101={name:"_",g:"uniform sampler2D u141,u115,u102;uniform mat4 u139,u142;uniform vec2 u143;uniform float u144;varying vec2 vv0;const float n=8888.8,o=9999.9,p=25.,v=50.,w=1.2,e=3.141592;const vec4 x=vec4(0.,0.,0.,0.),A=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);vec2 y(vec3 a){float b=atan(a.x,a.z),c=acos(a.y);return vec2(.5-.5*b/e,1.-c/e);}void main(){float d,a,q;vec2 z=vec2(vv0.x,1.-vv0.y),b;vec3 r=vec3(u143*(z-f),0.),B=vec3(u142*vec4(r,1.)),g,s;vec4 t=x,h,c,u;vec3 i;int j;for(float k=0.;k<n;k+=1.){b.x=k,b.y=floor(b.x/64.),c=texture2D(u102,b/64.),d=e*c.r,a=2.*asin(sqrt(.25+c.g*.25)),g=vec3(cos(d)*sin(a),sin(d)*sin(a),-cos(a)),q=p+(.5+.5*c.b)*(v-p),j=0;for(float l=0.;l<=o;l+=1.){u=vec4(r+g*q*pow(l/o,w),1.),h=u139*u,i=h.xyz/h.w;if(texture2D(u141,f+f*i.xy).z<i.z){j=1;break;}}if(j==1)continue;s=vec3(u142*vec4(g,0.)),t+=texture2D(u115,y(s));}gl_FragColor=vec4(u144*t.rgb/n,1.);}",
i:"u141 u115 u102 u139 u142 u143 u144".split(" "),Ia:[{search:"8888.8",replace:U.Io[fa.X()].toFixed(1)},{search:"9999.9",replace:U.Jo[fa.X()].toFixed(1)}],precision:E.low};g.s102={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.285714*texture2D(u1,vv0-u14)+.428571*texture2D(u1,vv0)+.285714*texture2D(u1,vv0+u14);gl_FragColor=a;}",i:["u1","u14"],precision:E.low};g.s103={name:"_",g:"uniform sampler2D u1,u145;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
v:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u139,u127;varying vec2 vv0;void main(){vec4 a=u139*u127*vec4(a0,1.);gl_Position=a,vv0=a1;}",i:["u139","u127","u1"],K:["a0","a1"],precision:E.low};if(fa.ca()){e="u41 u146 u147 u148 u149 u42 u114 u150 u151 u13 u152 u153 u80".split(" ").concat(x,z);fa.Ei()||(g.s104={name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,0.,0.),gl_FragData[2]=vec4(0.,0.,0.,0.),gl_FragData[3]=vec4(0.,0.,0.,0.);}",
i:[],precision:E.low,fa:!0});g.s105={name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform vec4 color;void main(){gl_FragData[0]=color,gl_FragData[1]=color,gl_FragData[2]=color,gl_FragData[3]=color;}",i:["color"],fa:!0};g.s106NNGLcolor={name:"_",g:"uniform vec4 u114,u13;uniform vec3 u150;uniform float u151;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u151;vec4 a=u114;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u150,0.),gl_FragData[3]=a;}",
v:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u154;uniform float u147,u152,u153,u148,u149,u155;varying vec3 vv0,vv1;varying float vv2,vv3;const vec2 e=vec2(1.);const vec3 r=vec3(1.);const vec2 F=vec2(-1.,1.),s=vec2(.16,.5),t=vec2(.5,.5),u=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 v(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,s);vec2 f=u87*e;vec3 c=u87*r;vec2 w=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,t).rgb+vec3(u81,0.,0.),u84,c);float x=mix(texture2D(u41,u).r,0.,u87);a.z+=x;mat3 h=v(a);vec3 y=mix(u146,u85,c);float z=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 A=mat2(i,j,-j,i);b.xy=A*b.xy;float B=mix(u83,1.,u87);vec2 k=u82/w;vec3 l=a0;float C=max(0.,-a0.z-u148)*u149;l.x+=C*sign(a0.x)*(1.-u87);vec3 m=h*(l+y)*z+b;vec2 D=k*B;vec3 E=vec3(g*D,-k)+m*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv2=smoothstep(u152,u153,a0.z),vv0=m,vv3=a0.y;}",
i:e,K:["a0","a2"],S:[3,3],fa:!0};g.s106NNGLtexture={name:"_",g:"uniform sampler2D u1;uniform vec4 u114,u13;uniform vec3 u150;uniform float u151,u73,u74;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u151;vec4 b=u114;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u150,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u150,l,u73),a.a*(1.-u74));gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
v:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u154;uniform float u147,u152,u153,u148,u149,u155;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u87*e;vec3 c=u87*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u81,0.,0.),u84,c);float y=mix(texture2D(u41,v).r,0.,u87);a.z+=y;mat3 h=w(a);vec3 z=mix(u146,u85,c);float A=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u83,1.,u87);vec2 k=u82/x;vec3 l=a0;float D=max(0.,-a0.z-u148)*u149;l.x+=D*sign(a0.x)*(1.-u87);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u152,u153,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:e.concat(I),K:["a0","a2","a1"],S:[3,3,2],fa:!0};g.s106NNGLtextureNormalMap={name:"_",g:"uniform vec4 u114,u13;uniform vec3 u150;uniform sampler2D u1,u156;uniform float u151,u73,u74;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u156,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u151;vec4 c=u114;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u150,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u150,t,u73),a.a*(1.-u74));gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u154;uniform float u147,u152,u153,u148,u149,u155;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u87*e;vec3 c=u87*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u81,0.,0.),u84,c);float z=mix(texture2D(u41,w).r,0.,u87);a.z+=z;mat3 h=x(a);vec3 A=mix(u146,u85,c);float B=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u83,1.,u87);vec2 k=u82/y;vec3 l=a0;float E=max(0.,-a0.z-u148)*u149;l.x+=E*sign(a0.x)*(1.-u87);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u152,u153,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:e.concat(I,["u156"]),K:["a3","a0","a2","a1"],S:[4,3,3,2],fa:!0};g.s106NNGLtextureParamsMap={name:"_",g:"uniform sampler2D u1,u75;uniform vec4 u114,u13,u76;uniform vec3 u150;uniform float u151,u73,u74;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u151;vec4 a=u114,e=texture2D(u75,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u76*f),d=mix(d,r,u76.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u150,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u150,u,u73),c.a*(1.-u74));gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
v:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u154;uniform float u147,u152,u153,u148,u149,u155;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u87*e;vec3 c=u87*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u81,0.,0.),u84,c);float y=mix(texture2D(u41,v).r,0.,u87);a.z+=y;mat3 h=w(a);vec3 z=mix(u146,u85,c);float A=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u83,1.,u87);vec2 k=u82/x;vec3 l=a0;float D=max(0.,-a0.z-u148)*u149;l.x+=D*sign(a0.x)*(1.-u87);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u152,u153,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:e.concat(I,u),K:["a0","a2","a1"],S:[3,3,2],fa:!0};g.s106NNGLtextureNormalParamsMap={name:"_",g:"uniform sampler2D u1,u156,u75;uniform vec4 u114,u13,u76;uniform vec3 u150;uniform float u151,u73,u74;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u156,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u151;vec4 a=u114,f=texture2D(u75,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u76*l),e=mix(e,z,u76.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u150,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u150,C,u73),c.a*(1.-u74));gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u154;uniform float u147,u152,u153,u148,u149,u155;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u87*e;vec3 c=u87*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u81,0.,0.),u84,c);float z=mix(texture2D(u41,w).r,0.,u87);a.z+=z;mat3 h=x(a);vec3 A=mix(u146,u85,c);float B=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u83,1.,u87);vec2 k=u82/y;vec3 l=a0;float E=max(0.,-a0.z-u148)*u149;l.x+=E*sign(a0.x)*(1.-u87);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u152,u153,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:e.concat(I,["u156"],u),K:["a3","a0","a2","a1"],S:[4,3,3,2],fa:!0};e="u139 u127 u140 u114 u150 u151 u13".split(" ");g.s106color={name:"_",g:"uniform vec4 u114,u13;uniform vec3 u150;uniform float u151;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u151;vec4 a=u114;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u150,0.),gl_FragData[3]=a;}",
v:"attribute vec3 a0,a2;uniform mat4 u139,u127,u140;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){vec4 a=u140*vec4(a0,1.),b=u140*vec4(a2,0.);gl_Position=u139*u127*a,vv0=a.xyz,vv1=b.xyz,vv2=1.,vv3=a0.y;}",i:e,K:["a0","a2"],fa:!0};g.s106={name:"_",g:"uniform sampler2D u1;uniform vec4 u114,u13;uniform vec3 u150;uniform float u151,u73,u74;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u151;vec4 b=u114;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u150,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u150,l,u73),a.a*(1.-u74));gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
v:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u139,u127,u140;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u140*vec4(a0,1.),b=u140*vec4(a2,0.);gl_Position=u139*u127*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:e.concat(I),K:["a0","a2","a1"],fa:!0};var n=["u156","u157"];g.s106NormalMap={name:"_",g:"uniform sampler2D u1,u156;uniform vec4 u114,u13;uniform vec3 u157,u150;uniform float u151,u73,u74;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u156,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u151;vec4 c=u114;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u150,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u150,t,u73),a.a*(1.-u74));gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u139,u127,u140;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u140*vec4(a0,1.),b=u140*vec4(a2,0.);gl_Position=u139*u127*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:e.concat(I,n),K:["a0","a2","a1","a3"],fa:!0};g.s106ParamsMap={name:"_",g:"uniform sampler2D u1,u75;uniform vec4 u114,u13,u76;uniform vec3 u150;uniform float u151,u73,u74;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u151;vec4 a=u114,e=texture2D(u75,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u76*f),d=mix(d,r,u76.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u150,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u150,u,u73),c.a*(1.-u74));gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
v:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u139,u127,u140;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u140*vec4(a0,1.),b=u140*vec4(a2,0.);gl_Position=u139*u127*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:e.concat(I,u),K:["a0","a2","a1"],fa:!0};g.s106NormalParamsMap={name:"_",g:"uniform sampler2D u1,u156,u75;uniform vec4 u114,u13,u76;uniform vec3 u157,u150;uniform float u151,u73,u74;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u156,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u151;vec4 a=u114,f=texture2D(u75,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u76*l),e=mix(e,z,u76.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u150,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u150,C,u73),c.a*(1.-u74));gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u139,u127,u140;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u140*vec4(a0,1.),b=u140*vec4(a2,0.);gl_Position=u139*u127*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:e.concat(I,n,u),K:["a0","a2","a1","a3"],fa:!0}}else m();q();e=[{type:"1i",name:"u1",value:0}];F.j("s0",e);F.j("s75",e);F.j("s1",e);F.j("s77",[{type:"1i",name:"u12",value:1}].concat(e));F.j("s78",[{type:"1i",
name:"u12",value:1}].concat(e));F.j("s12",[{type:"1i",name:"u92",value:1}].concat(e));F.j("s80",e);F.j("s81",e);F.j("s82",[{type:"1i",name:"u95",value:1},{type:"1i",name:"u41",value:2}].concat(e));F.j("s83",e);F.j("s84",e);F.j("s13",e);F.j("s85",e);F.j("s86",[{type:"1i",name:"u97",value:0},{type:"1i",name:"u98",value:1}]);F.j("s87",[{type:"1i",name:"u101",value:0},{type:"1i",name:"u102",value:1}]);F.j("s88",e);F.j("s89",e);F.j("s90",e);F.j("s91",e);F.j("s92",e);F.j("s93",[{type:"1i",name:"u92",value:1}].concat(e));
F.j("s94",[{type:"1i",name:"u92",value:1}].concat(e));U.ga_&&(F.j("s98",[{type:"1i",name:"u111",value:0},{type:"1i",name:"u112",value:1},{type:"1f",name:"u133",value:U.xk},{type:"1f",name:"u134",value:U.yk},{type:"1f",name:"u135",value:U.Kk},{type:"1f",name:"u136",value:U.Bk},{type:"1f",name:"u137",value:U.Ck},{type:"1f",name:"u132",value:1},{type:"1f",name:"u123",value:1}]),F.j("s99",e));n=[{type:"1i",name:"u111",value:0},{type:"1i",name:"u112",value:1},{type:"1i",name:"u113",value:2},{type:"1i",
name:"u101",value:3},{type:"1i",name:"u115",value:4},{type:"1i",name:"u114",value:6},{type:"1i",name:"u103",value:7},{type:"1f",name:"u121",value:0},{type:"1f",name:"u118",value:0},{type:"1f",name:"u120",value:0}];U.ga_&&F.j("s96",n.concat([{type:"1f",name:"u123",value:U.Ak[fa.X()]},{type:"1i",name:"u122",value:5}]));F.j("s97",n.concat([{type:"1f",name:"u124",value:U.Rc},{type:"1f",name:"u125",value:U.ng},{type:"1f",name:"u126",value:0}]));F.j("s101",[{type:"1i",name:"u141",value:0},{type:"1i",name:"u115",
value:1},{type:"1i",name:"u102",value:2},{type:"1f",name:"u144",value:U.Ho}]);F.j("s102",e);F.j("s103",e);F.j("s95",[{type:"1i",name:"u2",value:1},{type:"1i",name:"u104",value:2},{type:"1i",name:"u103",value:3},{type:"1f",name:"u109",value:1},{type:"2f",name:"u106",value:[0,0]}].concat(e));fa.ca()?(F.j("s106",e),F.j("s106NormalMap",[{type:"1i",name:"u156",value:1}].concat(e)),F.j("s106ParamsMap",[{type:"1i",name:"u75",value:1}].concat(e)),F.j("s106NormalParamsMap",[{type:"1i",name:"u156",value:1},
{type:"1i",name:"u75",value:2}].concat(e))):h();y=!0},uo:function(){m();q();h()},Dd:function(){return G.id},Fd:function(){return x},Gd:function(){return z},set:function(e){Cb.Fj(F);g[e].set()},Db:function(e){return p(e,w())},ke:function(e){return p(e,{name:"_",g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:E.high})},xo:function(e){return p(e,{name:"_",g:"const vec4 d=vec4(.5,.5,.5,.5);void main(){gl_FragData[0]=d,gl_FragData[1]=d,gl_FragData[2]=d,gl_FragData[3]=d;}",i:[],precision:E.high,
fa:!0})},M:function(){-1!==k&&G.M()},me:function(){var e=0;G.xa.forEach(function(n,A){A=G.S[A];c.vertexAttribPointer(n,A,c.FLOAT,!1,G.dh,e);e+=4*A})},fc:function(){F.hc(c)},hc:function(e){e.vertexAttribPointer(G.xa[0],2,e.FLOAT,!1,8,0)},Jq:function(){c.vertexAttribPointer(G.attributes.a0,3,c.FLOAT,!1,12,0)},Ra:function(){c.vertexAttribPointer(G.attributes.a0,3,c.FLOAT,!1,32,0)},bb:function(){c.vertexAttribPointer(G.attributes.a0,3,c.FLOAT,!1,24,0)},xj:function(){c.vertexAttribPointer(G.attributes.a2,
3,c.FLOAT,!1,32,12)},yj:function(){c.vertexAttribPointer(G.attributes.a2,3,c.FLOAT,!1,24,12)},Uc:function(){c.vertexAttribPointer(G.attributes.a1,2,c.FLOAT,!1,32,24)},Kq:function(){c.vertexAttribPointer(G.attributes.a0,3,c.FLOAT,!1,20,0);c.vertexAttribPointer(G.attributes.a1,2,c.FLOAT,!1,20,12)},io:function(){c.vertexAttribPointer(G.attributes.a0,3,c.FLOAT,!1,32,0);c.vertexAttribPointer(G.attributes.a2,3,c.FLOAT,!1,32,12);c.vertexAttribPointer(G.attributes.a1,2,c.FLOAT,!1,32,24)},jo:function(){c.vertexAttribPointer(G.attributes.a0,
3,c.FLOAT,!1,32,0);c.vertexAttribPointer(G.attributes.a2,3,c.FLOAT,!1,32,12)},ko:function(){c.vertexAttribPointer(G.attributes.a0,3,c.FLOAT,!1,24,0);c.vertexAttribPointer(G.attributes.a2,3,c.FLOAT,!1,24,12)},ie:function(){c.vertexAttribPointer(G.attributes.a3,4,c.FLOAT,!1,16,0)},le:function(e,n){c.uniform1i(G.B[e],n)},C:function(e,n){c.uniform1f(G.B[e],n)},O:function(e,n,A){c.uniform2f(G.B[e],n,A)},Fg:function(e,n){c.uniform2fv(G.B[e],n)},Gg:function(e,n,A,Q){c.uniform3f(G.B[e],n,A,Q)},Hg:function(e,
n){c.uniform3fv(G.B[e],n)},Ba:function(e,n){c.uniform4fv(G.B[e],n)},Bo:function(e,n){c.uniformMatrix2fv(G.B[e],!1,n)},Co:function(e,n){c.uniformMatrix3fv(G.B[e],!1,n)},Vc:function(e,n){c.uniformMatrix4fv(G.B[e],!1,n)},j:function(e,n){F.set(e);n.forEach(function(A){switch(A.type){case "4f":c.uniform4fv(G.B[A.name],A.value);break;case "3f":c.uniform3fv(G.B[A.name],A.value);break;case "2f":c.uniform2fv(G.B[A.name],A.value);break;case "1f":c.uniform1f(G.B[A.name],A.value);break;case "1i":c.uniform1i(G.B[A.name],
A.value);break;case "mat2":c.uniformMatrix2fv(G.B[A.name],!1,A.value);break;case "mat4":c.uniformMatrix4fv(G.B[A.name],!1,A.value)}})},I:function(){for(var e in g){var n=g[e];c.detachShader(n.qa,n.zf);c.detachShader(n.qa,n.yf);c.deleteShader(n.zf);c.deleteShader(n.yf);c.deleteProgram(n.qa)}},A:function(){c.disableVertexAttribArray(0);F.M();F.I();L=0;y=!1;G=null;k=-1}};return F}(),Za=function(){var a={},b=[],d=!1,f=0,l=0,p=-1,w=-1,h=1,m=null,q=!1,y=null,I=!1,u=!1,x=!1,z=!1,g=!1,k=!1,G=-1,L=-1,E=!1,
F=!1,e=null,n=null,A=-1,Q=-1,B=null,D=-1,M,t=null,v=null,P=null,V=null,T=null,ia=null,O=null,ka=[{type:"1f",name:"u87",value:0},{type:"1f",name:"u152",value:0},{type:"1f",name:"u153",value:0},{type:"1f",name:"u82",value:1},{type:"1f",name:"u78",value:0},{type:"1f",name:"u79",value:0},{type:"1f",name:"u89",value:1}],Qa={m:function(H,r){a.Jg=H;fa.Zg();Oc.kf();Ub.kf(H.Ee);p=H.pf;w=H.op;h=H.De;G=H.dg;L=H.eg;var N=[{type:"1f",name:"u82",value:p},{type:"1f",name:"u78",value:G},{type:"1f",name:"u79",value:L},
{type:"1f",name:"u83",value:H.Zn},{type:"mat4",name:"u77",value:H.Dn},{type:"2f",name:"u42",value:H.hk}];H.Xg=N;var ba=[{type:"3f",name:"u84",value:[0,0,0]},{type:"3f",name:"u85",value:H.hh},{type:"3f",name:"u86",value:H.gh},{type:"1f",name:"u87",value:0},{type:"1f",name:"u88",value:H.Ee},{type:"1f",name:"u89",value:1}];H.Yj=ba;Qa.Dm(H,r);d||void 0!==H.Ha||(H.Ha=[0,0,120]);F=E=J.Af;if(!d&&E){r=1*fa.wb();var na=1*fa.vb(),oa={isLinear:!0,isPot:!1,width:r,height:na};e=Z.instance(oa);n=Z.instance(oa);
A=1/r;Q=1/na}N=[{type:"1i",name:"u41",value:1},{type:"3f",name:"u80",value:H.Ha},{type:"1f",name:"u148",value:H.jd},{type:"1f",name:"u149",value:H.Mb}].concat(N,ba);m=H.Oc;ba=[{type:"1f",name:"u152",value:m[0]},{type:"1f",name:"u153",value:m[1]}];fa.ca()?(r=[{type:"1i",name:"u1",value:0}],na=[{type:"1i",name:"u156",value:2}],C.j("s106NNGLcolor",N.concat(ba)),C.j("s106NNGLtexture",[].concat(r,N,ba)),C.j("s106NNGLtextureNormalMap",[].concat(r,na,N,ba)),C.j("s106NNGLtextureParamsMap",[{type:"1i",name:"u75",
value:2}].concat(r,N,ba)),C.j("s106NNGLtextureNormalParamsMap",[{type:"1i",name:"u75",value:3}].concat(r,na,N,ba))):(C.j("s110",N.concat(ba)),C.j("s111",[{type:"1i",name:"u1",value:0}].concat(N)),C.j("s112",N),C.j("s113",N),C.j("s114",N.concat([{type:"1i",name:"u156",value:0}])),C.j("s115",N),C.j("s116",N.concat([{type:"1i",name:"u75",value:0}])));C.j("s82",[{type:"2f",name:"u96",value:H.Qg}]);C.j(U.ga_?"s96":"s97",[{type:"1f",name:"u118",value:H.Ne},{type:"3f",name:"u119",value:H.tg},{type:"1f",
name:"u120",value:H.$e},{type:"1f",name:"u121",value:1},{type:"3f",name:"u116",value:H.mk}]);if(M=H.Vd)B=H.dn,D=H.Wd,C.j("s95",[{type:"4f",name:"u105",value:H.Ud},{type:"1f",name:"u108",value:H.Uf},{type:"2f",name:"u106",value:H.cn},{type:"1f",name:"u110",value:Math.sign(D)}]);b.forEach(function(xa){xa.sj(H)});d=!0},dc:function(H){u&&ya.ia.dc(H);z&&ya.ua.dc(H)},Dm:function(H,r){void 0!==ya.ia&&H.jc&&fa.ca()&&(ya.ia.m(H),I=!0,r.push(function(N){ya.ia.dc(N);u=!x}));void 0!==ya.ua&&H.qd&&(ya.ua.m(H),
r.push(function(N){ya.ua.dc(N);z=!0}));void 0!==ya.qc&&H.Qe&&(ya.qc.m(H),k=g=!0);void 0!==ya.mb&&(ya.mb.m(H),y=ya.mb.Fm({width:H.Gc,height:2*H.Gc,depth:1.5*H.Gc,Kl:-H.Ef,Va:H.Cf,ol:H.Df}),q=!0)},zo:function(H,r,N,ba){H&&(O=H,I&&ya.ia.ec(H),z&&ya.ua.ec(H),g&&ya.qc.ec(H),b.forEach(function(na){na.ec(H)}));N&&(V=N);ba&&(T=ba)},Eb:function(H){fa.ca()?(C.j("s106NNGLcolor",H),C.j("s106NNGLtexture",H),C.j("s106NNGLtextureNormalMap",H),C.j("s106NNGLtextureParamsMap",H),C.j("s106NNGLtextureNormalParamsMap",
H)):(C.j("s110",H),C.j("s111",H),C.j("s112",H),C.j("s113",H),C.j("s114",H),C.j("s115",H),C.j("s116",H))},eb:function(H,r,N){var ba=[H[0]+r[0],H[1]+r[1],H[2]+r[2]];ba=[ba[0]+N[0],ba[1]+N[1],ba[2]+N[2]];a.fe=ba;a.mn=r;a.ap=N;Qa.Eb([{type:"3f",name:"u146",value:ba}]);fa.ca()&&(I&&ya.ia.eb(H,r,N),z&&ya.ua.eb(ba));q&&ya.mb.eb(H,N)},fb:function(H,r,N){var ba=H*r*N;a.nn=r;a.bp=N;a.xm=H;Qa.Eb([{type:"1f",name:"u147",value:ba}]);fa.ca()&&(I&&ya.ia.fb(H*r,N),z&&ya.ua.fb(ba));q&&ya.mb.fb(H,N)},mj:function(){Qa.eb(a.fe,
a.mn,a.ap);Qa.fb(a.xm,a.nn,a.bp);Qa.Dj(a.rx);Qa.m(a.Jg);Qa.zj(a.Sk,a.Mb)},Dj:function(H){a.rx=H;Qa.Eb([{type:"1f",name:"u81",value:H}]);fa.ca()&&(I&&ya.ia.Dg(H),z&&ya.ua.Dg(H))},zj:function(H,r){a.Sk=H;a.Mb=r;Qa.Eb([{type:"1f",name:"u148",value:H},{type:"1f",name:"u149",value:r}])},ro:function(H){m=H;0===f&&Qa.Eb([{type:"1f",name:"u152",value:m[0]},{type:"1f",name:"u153",value:m[1]}])},cb:function(H){function r(){q&&ya.mb.toggle(!1);M&&C.j("s95",[{type:"1f",name:"u109",value:0}])}0>=H?(l=0,0!==f&&
(f=0,Ub.Tn(),q&&ya.mb.toggle(!0),M&&C.j("s95",[{type:"1f",name:"u109",value:1}]))):1<=H?(l=1,1!==f&&(f=1,Ub.Lj(!0)),r()):(l=H,2!==f&&(Ub.Lj(!1),f=2,r()));C.j("s97",[{type:"1f",name:"u121",value:1-H}]);var N=1-H;ka[0].value=l;ka[1].value=m[0]*N+-300*H;ka[2].value=m[1]*N+-300*H;ka[3].value=p*N+H*w;ka[4].value=G*N;ka[5].value=L*N;ka[6].value=N+H*h;u&&ya.ia.Eg(l,ka);z&&ya.ua.Eg(l,ka);Qa.Eb(ka)},Hl:function(H){O.h(1);H.forEach(function(r){r.Cl()});q&&y.W()},Xm:function(){return 1===f},Oe:function(H){O.ya(H)},
rk:function(H){b.push(H)},Og:function(H){x=!H;u=H&&I},Ng:function(H){k=H&&g},zg:function(H){z&&fa.ca()&&ya.ua.Do(H)},Fb:function(H){fa.ca()&&(I&&ya.ia.Fb(H),z&&ya.ua.Fb(H))},El:function(H,r){if(!F)return!1;e.J();H.h(0);C.set("s88");C.O("u14",0,Q);X.l(!1,!1);n.u();e.h(0);C.O("u14",A,0);X.l(!1,!1);C.set("s89");r.J();n.h(0);X.l(!1,!1);return!0},Kj:function(H){F=H&&E},resize:function(H,r,N){E&&(H*=N,r*=N,e.resize(H,r),n.resize(H,r),A=1/H,Q=1/r)},xg:function(H,r){var N=H.P(),ba=H.$(),na={width:N,height:ba,
isPot:!1};I&&(P&&P.remove(),P=Z.instance(na));t&&t.remove();t=Ca.instance({width:N,height:ba});g||z?(ya.qc.yg(N,ba),v&&v.remove(),v=Z.instance(na)):v=H;I&&ya.ia.yg(N,ba);r&&(ia&&ia.remove(),ia=Z.instance(na))},Al:function(H){var r=null;switch(f){case 0:r=H;break;case 2:t.bind(!1,!0);ia.u();C.set("s77");C.C("u13",l);H.h(1);T.h(0);X.l(!0,!0);r=ia;break;case 1:r=T}if(!u||1===f||!fa.ca())return r;r.ya(0);k&&ya.qc.W(r,v);t.bind(!1,!k);z&&(k?r.h(0):(v.u(),C.set("s1"),X.l(!0,!0)),ya.ua.W());v.h(0);V.ya(2);
ya.ia.W();P.u();C.set("s1");k||z?v.h(0):r.h(0);X.l(!0,!U.ga_);ya.ia.add();return P},sk:function(H,r){if(!u)return H;V.ya(2);ya.ia.W();Ca.ba();C.set("s76");r.J();ya.ia.qm().h(0);X.l(!0,!0);C.set("s1");c.enable(c.BLEND);c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);H.h(0);X.l(!1,!1);c.disable(c.BLEND);return r},Fl:function(H,r){if(!M)return!1;C.set("s95");C.C("u107",H*D);B.h(1);Za.Oe(2);v?v.h(3):r.h(3);return!0},A:function(){d=!1;l=f=0;w=p=-1;h=1;m=null;L=G=-1;q=!1;y=null;k=g=z=x=u=I=!1;ya.ia.A();ya.La.A()}};
return Qa}(),Aa=function(){function a(){h.forEach(function(r){r.Il(v)})}function b(){h.forEach(function(r){r.ud(v)})}function d(){h.forEach(function(r){r.Gl(v)})}function f(){h.forEach(function(r){r.vd(v)})}function l(){v?Za.Hl(h):h.forEach(function(r){r.Dl()})}function p(){D&&clearTimeout(D);D=setTimeout(function(){e=!1;D=null},16)}function w(r){r()}var h=[],m=[],q={ha:!1,position:!1,Bb:!1},y=[],I=[],u=null,x=0,z=null,g=null,k=null,G=null,L=!1,E=!1,F=!1,e=!1,n=!1,A=!1,Q=null,B=null,D=null,M=null,
t=!1,v=!1,P=!1,V=!1,T=!0,ia=!1,O=!1,ka=null,Qa=null,H={m:function(){c.enable(c.DEPTH_TEST);c.depthFunc(c.LEQUAL);c.clearDepth(1);U.ml?(c.enable(c.CULL_FACE),c.frontFace("CCW"===U.nl?c.CCW:c.CW),c.cullFace(c.BACK)):c.disable(c.CULL_FACE);H.Ah();var r={isPot:!1,isLinear:!1,width:fa.wb(),height:fa.vb(),L:4,isFloat:!1};z=Z.instance(r);r=Object.assign({},r,{isLinear:!0,width:fa.P(),height:fa.$()});g=Z.instance(r);k=Z.instance(r);U.Qa&&(r=Object.assign({},r,{isLinear:!1}),G=Z.instance(r));A=Ha.ja();U.Qa||
(u=mc.instance({Lb:U.Lb,wc:U.wc,xc:U.xc,vc:U.vc}));L=!0},Ah:function(){fa.ca()?q=pc.instance({}):(q.ha=Ib.instance({ic:U.Qa?!1:"s107",isFloat:!1,Vb:!0,clearColor:[0,0,0,0],L:4}),q.position=Ib.instance({ic:U.Qa?!1:"s117",isFloat:!0,Vb:!0,clearColor:[0,0,0,0],L:4}),q.Bb=Ib.instance({ic:!1,isFloat:!0,Vb:!0,clearColor:[0,0,0,0],L:4}),q.Pc=Ib.instance({ic:!1,isFloat:!1,Vb:!0,clearColor:[0,0,0,0],L:4}))},fm:function(){return u},ra:function(r){u=r},ar:function(){},Fb:function(r){Za.Fb(r)},sj:function(r){Za.m(r,
y);fa.ca()||(q.ha.Ej(!1),q.position.Ej("s110"));v=V=!0},Hq:function(){Za.mj()},wp:function(r){Za.rk(r)},eo:function(r,N,ba){Za.eb(r,N,ba)},fo:function(r,N,ba){Za.fb(r,N,ba)},bo:function(r,N){Za.zj(r,N)},co:function(r){Za.ro(r)},ho:function(r){Za.Dj(r)},cb:function(r){Za.cb(r)},tj:function(r,N,ba,na){Za.zo(r,N,ba,na);N&&H.xg(N,na?!0:!1);P=!0},Og:function(r){Za.Og(r)},zg:function(r){Za.zg(r)},Ng:function(r){Za.Ng(r)},Kj:function(r){Za.Kj(r)},xp:function(r){t&&(O=!0,ka&&ka.remove(),ka=Z.instance({width:M.P(),
height:M.$(),isPot:!1}),Qa=r)},xg:function(r,N){M="string"===typeof r?Z.instance({url:r,isFloat:!1}):r;v&&Za.xg(M,N);t=!0},qk:function(r){h.push(r);0!==y.length&&(y.forEach(function(N){N(r)}),y.splice(0,y.length))},On:function(r){r=h.indexOf(r);-1!==r&&h.splice(r,1)},yp:function(r){m.push(r)},Eq:function(r){r=m.indexOf(r);-1!==r&&m.splice(r,1)},re:function(r){v&&(E=r)},animate:function(r){!U.Qa||v&&P?E&&(e||x>U.on&&n?(Q&&clearTimeout(Q),++x,window.cancelAnimationFrame(H.animate),Q=setTimeout(function(){window.requestAnimationFrame(H.animate)},
16)):(H.hj(r),++x,v||E&&window.requestAnimationFrame(H.animate))):setTimeout(H.animate,100)},Ap:function(r){I.push(r)},hj:function(r){if((!U.Qa||v&&P)&&L){I.forEach(w);fa.ca()?q.set()||fa.na()?(v||Gc.Qn(),l(),q.M(),A&&c.depthMask(!1)):(fa.Ro(),H.Ah(),Ib.gd(),C.uo(),U.Qa&&Za.mj(),c.flush(),window.requestAnimationFrame(H.animate)):(v&&Za.Oe(1),q.ha.set(!0,!0,!0),b(),q.ha.M(),A&&c.depthMask(!1),q.Pc.set(!1,!A,!1),d(),q.Pc.M(),q.position.set(!0,!A,!1),yb.W(),a(),q.position.M(),q.Bb.set(!1,!A,!1),f(),
q.Bb.M());c.disable(c.DEPTH_TEST);A||c.depthMask(!1);U.ga_&&Jb.W();var N=H.Xh();if(null!==N){N.h(7);C.set(U.ga_?"s96":"s97");C.O("u14",1/fa.wb(),1/fa.vb());Ib.Tk();z.J();ia?(c.enable(c.BLEND),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),C.C("u126",1)):c.disable(c.BLEND);v||yb.jf();q.position.h(0);q.Bb.h(1);q.ha.h(2);u.kd(3);q.Pc.h(6);u.ld(4);u.Eh();U.ga_&&Jb.h(5);X.l(!0,!0);ia&&C.C("u126",0);Ca.ba();if(ia){c.disable(c.BLEND);var ba=Za.sk(z,g);C.set("s84");
k.J();ba.h(0);X.l(!1,!1);g.u();k.h(0);X.l(!1,!1);g.h(0)}else Za.El(z,g)||(C.set("s1"),g.J(),z.h(0),X.l(!1,!1)),T?(C.set("s83"),k.J(),g.h(0),X.l(!1,!1),g.u(),k.h(0),V&&v?(C.set("s82"),G.h(1),Za.Oe(2),X.l(!1,!1),C.set("s1"),G.J(),g.h(0),X.l(!1,!1)):(C.set("s81"),X.l(!1,!1),g.h(0))):g.h(0);Ca.aa();c.viewport(0,0,fa.P(),fa.$());!ia&&v&&Za.Fl(r,N)||C.set("s1");X.l(!1,!1);c.enable(c.DEPTH_TEST);c.depthMask(!0);c.flush()}}},Xh:function(){if(!t||ia)return Z.ki();if(!v)return M;if(O&&!Za.Xm()){C.set(Qa);Ca.ba();
ka.Wc();ka.u();M.h(0);var r=ka;X.l(!0,!0)}else r=M;return Za.Al(r)},Xq:function(){U.rl||E||(E=!0,H.animate(Date.now()),F||Bc.Mo(),F||Ub.ib(!1),B&&clearTimeout(B),U.ga_&&Jb.je(),B=setTimeout(H.va,U.Pk),F||fa.zm(),F=!0)},Yq:function(){E&&(n=E=!1,cancelAnimationFrame(H.animate))},va:function(){n||!F||e||U.Ch||(n=e=!0,B&&clearTimeout(B),D&&clearTimeout(D),yb.sf().jj(),B=setTimeout(function(){fa.ah(U.un);U.ga_&&Jb.Zj();x=0;p()},24))},wake:function(){n&&F&&!e&&(e=!0,n=!1,x=0,yb.sf().jj(),B&&clearTimeout(B),
D&&clearTimeout(D),B=setTimeout(function(){fa.ah(1);U.ga_&&Jb.je();p()},16))},kq:function(){},Qp:function(){},qe:function(r){V=r},$q:function(r){T=r},Mj:function(r){ia=r},er:function(){C.j("s97",[{type:"1f",name:"u124",value:U.Rc},{type:"1f",name:"u125",value:U.ng}])},resize:function(r,N,ba){z.resize(r*ba,N*ba);g.resize(r,N);k.resize(r,N);U.Qa&&G.resize(r,N);Za.resize(r,N,ba);r=[{type:"2f",name:"u14",value:[1/r,1/N]}];C.j("s83",r);C.j("s81",r);C.j("s84",r)},I:function(){Q&&clearTimeout(Q);B&&clearTimeout(B);
D&&clearTimeout(D);h.concat(m).forEach(function(r){r.I()});h.splice(0,h.length);m.splice(0,m.length);q.ha.remove();q.Bb.remove();q.Pc.remove();q.position.remove();z.remove();g.remove();k.remove();G&&G.remove();e=!0},A:function(){H.I();A=n=e=F=E=v=P=e=!1}};return H}(),ya={},fa=function(){function a(){Ib.resize(d*m,f*m);z.ca()&&pc.resize(d*m,f*m);Aa.resize(d,f,m);U.ga_&&Jb.resize(d*m,f*m,m);z.Zg()}var b=null,d=0,f=0,l=-1,p=!1,w={te:!1,Rg:!1,Wj:!1,Kg:!1,drawBuffers:!1,Qm:!1,Bi:!1,Sm:!1,Lf:!1,Za:!1},
h=Object.assign({},w),m=1,q=!1,y=!1,I=!1,u=!1,x=!1,z={m:function(g){void 0!==g.onload&&g.onload&&(y=g.onload);void 0===g.expand&&(g.expand=!1);void 0===g.Ld&&(g.Ld=!1);void 0===g.sa&&(g.sa=!1);void 0===g.Rb&&(g.Rb=!1);void 0===g.alpha&&(g.alpha=!1);void 0===g.preserveDrawingBuffer&&(g.preserveDrawingBuffer=!1);g.Ld&&(p=!0);b=g.sa?g.sa:document.getElementById(g.gl);g.expand&&z.expand();try{c=g.Rb?g.Rb.Sl():b.getContext("webgl",{antialias:!1,alpha:g.alpha,depth:!0,premultipliedAlpha:!1,stencil:!1,preserveDrawingBuffer:g.preserveDrawingBuffer});
window.jk||(window.jk=c);u=g.Rb?g.Rb.na():!1;I=!u;8>c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS)&&z.rd("too few texture image units");if(!Ha.m())return z.rd("invalid config");U.Yo&&(h.Rg=c.getExtension("EXT_texture_filter_anisotropic"),h.Rg&&(h.Bi=!0));U.Zo&&(h.te=c.getExtension("WEBGL_compressed_texture_s3tc"),h.te&&void 0!==h.te.COMPRESSED_RGBA_S3TC_DXT5_EXT&&h.te.COMPRESSED_RGBA_S3TC_DXT5_EXT&&(h.Qm=!0));I&&(h.Wj=c.getExtension("OES_element_index_uint")||c.getExtension("MOZ_OES_element_index_uint")||
c.getExtension("WEBKIT_OES_element_index_uint"),h.Wj&&(h.Sm=!0));!u&&U.$o&&(h.Kg=c.getExtension("EXT_sRGB"),h.Kg&&(h.Lf=!0));I?(h.drawBuffers=c.getExtension("WEBGL_draw_buffers"),h.drawBuffers&&!U.Bh&&(h.Za=!0)):h.Za=4<=c.getParameter(c.MAX_DRAW_BUFFERS);if(h.Za){var k=z.tl();h.Za=h.Za&&k}}catch(G){return z.rd(G)}if(null===c||!c)return z.rd("NO_GL");g.expand&&window.addEventListener("resize",z.expand,!1);b.addEventListener("contextmenu",function(G){G.preventDefault();return!1},!1);d=b.width;f=b.height;
z.Hf();return!0},Hf:function(){l=p?3:2;Ha.ja()||(l=Math.min(l,1));Ha.cl()||(l=Math.min(l,0));Oc.m();Ib.m();for(var g in ya)ya[g].Sc();C.m();yb.m();Ub.m();Aa.m();Bc.m();U.ga_&&Jb.m();z.Zg();z.vl();q=!0;y&&y();return!0},vl:function(){if(h.Za){var g=pc.instance({width:256,height:1});g.bind();c.viewport(0,0,256,1);C.set("s105");C.Ba("color",[1,0,0,1]);X.l(!0,!0);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT||c.DEPTH_BUFFER_BIT);Ca.aa();C.set("s1");g.Bb.h(0);X.l(!1,!1);g=new Uint8Array(1024);c.readPixels(0,
0,256,1,c.RGBA,c.UNSIGNED_BYTE,g);x=1>=g[1020]}},tl:function(){var g=pc.instance({width:1,height:1});if(!g.set())return g.remove(),!1;C.xo(c);X.Qb(c);c.bindFramebuffer(c.FRAMEBUFFER,null);C.Db(c);g.ha.ya(0);X.Qb(c);var k=new Uint8Array(4);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,k);g.remove();return 3<Math.abs(k[0]-127)?!1:!0},na:function(){return u},P:function(){return d},$:function(){return f},wb:function(){return m*z.P()},vb:function(){return m*z.$()},Tl:function(){return d/f},X:function(){return l},
sq:function(){return 3===l},Ab:function(){return q},Ei:function(){return x},ca:function(){return h.Za},Ro:function(){h.Za=!1},vq:function(){return!1},el:function(){return 0<z.X()},Gp:function(){return z.ca()&&0<z.X()},rf:function(g){var k=c,G="";u||(k=h.drawBuffers,G="_WEBGL");return[k["COLOR_ATTACHMENT0"+G],k["COLOR_ATTACHMENT1"+G],k["COLOR_ATTACHMENT2"+G],k["COLOR_ATTACHMENT3"+G]].splice(0,g)},Cd:function(g){return z.rf(4)[g]},um:function(){return u?c.SRGB?c.SRGB:c.RGBA:h.Lf?h.Kg.SRGB_ALPHA_EXT:
c.RGBA},Tm:function(){return h.Bi},Yl:function(){return h.Rg},gn:function(g){z.na()?c.drawBuffers(z.rf(g)):h.drawBuffers.drawBuffersWEBGL(z.rf(g))},expand:function(){Aa.wake();z.resize(window.innerWidth,window.innerHeight);Aa.va()},resize:function(g,k){!b||g===d&&k===f||(d=g,f=k,b.width=d,b.height=f,q&&(yb.resize(),a()))},Zg:function(){var g=[{type:"2f",name:"u14",value:[1/fa.wb(),1/fa.vb()]}];C.j("s83",g);C.j("s81",g)},ah:function(g){m=g;a()},Ma:function(g,k){b.addEventListener(g,k,!1)},rd:function(){l=
-1;return!1},vh:function(){return 0<=l},yq:function(){},Iq:function(){},Vq:function(){var g=document.getElementById("loading");g&&(g.style.display="block")},zm:function(){var g=document.getElementById("loading");g&&(g.style.display="none")},I:function(){z.vh()&&(Z.Xj(),Aa.I(),X.I(),Ib.I(),U.ga_&&Jb.I(),mc.I(),Bc.I(),C.I(),Z.I(),c.flush(),c=null)},A:function(){Aa.A();Za.A();C.A();pc.A();Ib.A();Object.assign(h,w);q=I=!1}};return z}(),yb=function(){var a=!1,b=!1,d=[];return{m:function(){},instance:function(f){void 0===
f.kj&&(f.kj=!0);void 0===f.He&&(f.He=.1);void 0===f.Ge&&(f.Ge=100);void 0===f.direction&&(f.direction=[0,0,-1]);void 0===f.Wh&&(f.Wh=45);var l=new ec,p=new Xa(50,-50,-400),w=null;l.setPosition(p);var h=new Int8Array(20),m=new Int8Array(20),q=0,y=0,I=0,u=0,x={W:function(){m[C.Dd()]||(C.Vc("u127",l.elements),m[C.Dd()]=1);h[C.Dd()]||(C.Vc("u139",w),h[C.Dd()]=1)},hf:function(){y||(C.Vc("u127",l.elements),y=1);q||(C.O("u128",w[0],w[5]),q=1)},jf:function(){I||(C.Gg("u116",p.x,p.y,p.z),I=1)},Nb:function(){u||
(C.Gg("u157",p.x,p.y,p.z),u=1)},xh:function(){var z=f.He,g=f.Ge,k=Math.tan(.5*f.Wh*Math.PI/180);w=[.5/k,0,0,0,0,.5*fa.Tl()/k,0,0,0,0,-(g+z)/(g-z),-1,0,0,-2*g*z/(g-z),0];for(z=0;20>z;++z)h[z]=0;q=0},so:function(z,g){p.qj(g[0]).rj(g[1]).z=g[2];l.elements.set(z);for(z=0;20>z;++z)m[z]=0;u=I=y=0},jj:function(){for(var z=u=I=0;20>z;++z)m[z]=0}};x.xh();a=x;b=!0;f.kj&&d.push(x);return x},W:function(){b&&a.W()},hf:function(){b&&a.hf()},jf:function(){b&&a.jf()},Nb:function(){b&&a.Nb()},resize:function(){d.forEach(function(f){f.xh()})},
sf:function(){return a}}}(),Ib=function(){var a=[],b=null;return{m:function(){b=Ca.instance({width:fa.wb(),height:fa.vb(),Hc:!fa.ca()})},instance:function(d){void 0===d.width&&(d.width=fa.wb());void 0===d.height&&(d.height=fa.vb());void 0===d.isFloat&&(d.isFloat=!1);void 0===d.Vb&&(d.Vb=!1);void 0===d.clearColor&&(d.clearColor=[0,0,0,0]);void 0===d.L&&(d.L=4);var f=Z.instance({isFloat:d.isFloat&&Ha.ja(),U:d.isFloat,width:d.width,height:d.height,isPot:!1,isLinear:!1,L:d.L}),l=void 0!==d.ic&&d.ic?!0:
!1,p=d.ic,w={set:function(h,m,q){q&&b.bind(!1,q);f.u();h&&(c.clearColor(d.clearColor[0],d.clearColor[1],d.clearColor[2],d.clearColor[3]),b.Ve());m&&b.wh();l&&C.set(p)},Ej:function(h){l=(p=h)?!0:!1},M:function(){f.ve()},h:function(h){f.h(h)},resize:function(h,m){f.resize(h,m)},debug:function(){f.debug()},remove:function(){f.remove()}};d.Vb&&a.push(w);return w},resize:function(d,f){b.resize(d,f);a.forEach(function(l){l.resize(d,f)})},Tk:function(){b.ph()},gd:function(){b.gd()},Wc:function(){b.Wc()},
Jp:function(){b.wh()},Ip:function(){b.Ve()},Hp:function(){b.clear()},I:function(){b.remove()},A:function(){b.remove();a.forEach(function(d){d.remove()});a.splice(0)}}}(),pc=function(){var a=[];return{instance:function(b){void 0===b.width&&(b.width=fa.wb());void 0===b.height&&(b.height=fa.vb());var d=c.createFramebuffer(),f=b.width,l=b.height,p=!0;b={isFloat:Ha.ja(),U:!0,width:f,height:l,isPot:!1,isLinear:!1,L:4};var w=Z.instance(b),h=Z.instance(b),m=Z.instance(b),q=Z.instance(b),y=Ca.Zl(),I=Ca.bi();
c.bindFramebuffer(y,d);var u=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,u);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,f,l);c.framebufferRenderbuffer(y,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,u);c.clearDepth(1);c.framebufferTexture2D(y,fa.Cd(0),c.TEXTURE_2D,w.get(),0);c.framebufferTexture2D(y,fa.Cd(1),c.TEXTURE_2D,h.get(),0);c.framebufferTexture2D(y,fa.Cd(2),c.TEXTURE_2D,q.get(),0);c.framebufferTexture2D(y,fa.Cd(3),c.TEXTURE_2D,m.get(),0);fa.gn(4);c.bindFramebuffer(y,null);Ca.reset();
var x={position:w,Bb:h,Pc:m,ha:q,bind:function(){c.bindFramebuffer(y,d);Ca.reset()},set:function(){p&&c.checkFramebufferStatus(I);c.bindFramebuffer(y,d);Ca.reset();if(p){if(c.checkFramebufferStatus(I)!==c.FRAMEBUFFER_COMPLETE)return!1;p=!1}c.viewport(0,0,f,l);c.clearColor(0,0,0,0);C.Ab()&&!fa.Ei()&&(C.set("s104"),X.l(!1,!1));c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);return!0},M:function(){},resize:function(z,g){f=z;l=g;w.resize(z,g);h.resize(z,g);q.resize(z,g);m.resize(z,g);c.bindRenderbuffer(c.RENDERBUFFER,
u);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,f,l);c.bindRenderbuffer(c.RENDERBUFFER,null)},remove:function(){w.remove();h.remove();q.remove();m.remove();c.deleteRenderbuffer(u);c.deleteFramebuffer(d);var z=a.indexOf(x);-1!==z&&a.splice(z,1)}};a.push(x);return x},resize:function(b,d){a.forEach(function(f){f.resize(b,d)})},A:function(){a.forEach(function(b){b.remove()});a.splice(0)}}}(),mc=function(){var a=[],b=U.oh;return{instance:function(d){function f(){m?l():(q=Ld.instance({V:u.qb,
Pm:b}),h=U.Qk[fa.X()],u.zb=Z.instance({isFloat:Ha.ja(),U:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:h,height:h/2,L:3}),u.Md=Z.instance({isFloat:Ha.ja(),U:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:h,height:h/2,L:3}),u.Td=Z.instance({isFloat:Ha.ja(),U:!0,isPot:!0,width:1,height:h/2,L:3}),u.Nd=Z.instance({isFloat:Ha.ja()&&!b,U:!b,isPot:!1,isLinear:!0,isMirrorY:!0,isMipmap:!1,width:h,height:h/2,L:b?4:3}),m=!0,l(),I.forEach(function(x){x()}),I.splice(0,I.length))}function l(){if(m){Ca.ba();q.lo(u.qb);
q.Mn();u.zb.J();C.set("s87");u.qb.h(0);C.C("u91",U.Rc);Z.Yk(1);X.l(!0,!0);for(var x=U.Gm[fa.X()],z=0;z<x;++z)u.Md.u(),C.set("s90"),C.O("u14",1/h,0),u.zb.h(0),X.l(!1,!1),u.zb.u(),C.O("u14",0,2/h),u.Md.h(0),X.l(!1,!1);u.Td.J();C.set("s92");u.zb.h(0);X.l(!1,!1);C.set(b?"s94":"s93");u.Nd.J();u.zb.h(0);u.Td.h(1);X.l(!1,!1);Z.aa(0);Z.aa(1)}}var p=Object.assign({Lb:null,wc:null,vc:0,xc:0},d),w=0,h=0,m=!1,q=null,y=0,I=[],u={zd:null,pa:null,qb:null,zb:null,Md:null,Nd:null,Td:null};d={m:function(){function x(){2===
++z&&(u.qb=Z.instance({isFloat:Ha.ja(),U:!0,isPot:!1,isLinear:!0,width:w,height:w/2,L:3}),Ca.ba(),u.qb.J(),C.set("s86"),C.C("u99",p.xc),C.C("u100",p.vc),u.zd.h(0),u.pa.h(1),X.l(!0,!0),f())}var z=0;w=U.Rk[fa.X()];y=Math.log2(w)-1;p.Lb&&(u.zd=Z.instance({isPot:!1,url:p.Lb,D:x,L:3,isFlipY:!1}),u.pa=Z.instance({isPot:!1,url:p.wc,D:x,L:3,isFlipY:!1}))},Ag:function(x){u.qb=x;f()},kd:function(x){m&&(q.h(x),C.C("u117",q.P()))},ld:function(x){m&&u.Nd.h(x)},Eh:function(){C.C("u3",y)},Yh:function(){return y},
P:function(){return w},zc:function(x){m?x():I.push(x)},I:function(){u.zd&&u.zd.remove();u.pa&&u.pa.remove();u.zb.remove();u.Td.remove();u.Md.remove();q.remove();u.Nd.remove();u.qb.remove()}};a.push(d);d.m();return d},I:function(){a.forEach(function(d){d.I()})}}}(),sd={instance:function(a){var b=a.an,d=a.Zm,f=0,l=b.P();a=U.oh;var p=Z.instance({isFloat:Ha.ja()&&!a,U:!a,isLinear:!0,isMipmap:!1,isPot:!1,width:l,L:a?4:3,isFlipY:!1}),w=Z.instance({isFloat:Ha.ja()&&!a,U:!a,isPot:!1,isLinear:!0,nq:!0,isMipmap:!1,
width:l,height:l/2,L:a?4:3}),h=Ca.instance({width:l,height:l}),m=a?"s78":"s77";return{yo:function(q){f=q;C.set(m);c.viewport(0,0,l,l);h.u();p.u();C.C("u13",f);b.kd(1);d.kd(0);X.l(!0,!0);c.viewport(0,0,l,l/2);w.u();b.ld(1);d.ld(0);X.l(!1,!1);c.flush()},kd:function(q){p.h(q)},ld:function(q){w.h(q)},Eh:function(){C.C("u3",b.Yh()*(1-f)+d.Yh()*f)}}}},Ub=function(){function a(M){var t=(e-U.Te)/(U.sh-U.Te);t=1-Math.pow(1-t,U.sp);e+=M*(1+t*U.tp);e=Math.min(Math.max(e,U.Te),U.sh);D.ib()}function b(M){-1!==
h&&(G=k=0,w(),a(U.qp*M.deltaY/window.innerHeight),M.preventDefault())}function d(){E+=k;F+=G;F=Math.min(Math.max(F,U.yn),U.xn);D.ib()}function f(M){if(0===h||-1===h)return!1;var t=void 0!==M.touches&&M.touches.length;M.preventDefault();if(2===h){var v=fd(M.touches[0].pageX,M.touches[0].pageY,M.touches[1].pageX,M.touches[1].pageY);a(-(z-v)*U.zn);z=v}else v=t?M.touches[0].clientX:M.clientX,M=t?M.touches[0].clientY:M.clientY,k=2*(v-u)*Math.PI/fa.P(),G=2*(M-x)*Math.PI/fa.$(),4===h?(B[0]+=k*U.Xi,B[1]-=
G*U.Xi,B[0]=Math.min(Math.max(B[0],-U.$i),U.$i),B[1]=Math.min(Math.max(B[1],-U.aj),U.aj),D.ib()):d(),u=v,x=M}function l(){0!==h&&-1!==h&&(0===k&&0===G||1!==h||!A?Aa.va():(w(),g=Date.now(),n=setInterval(D.Ym,L)),h=0)}function p(M){if(2!==h&&-1!==h){G=k=0;w();Aa.wake();var t=void 0!==M.changedTouches&&M.touches.length;M.preventDefault();t&&2===M.touches.length?(h=2,z=fd(M.touches[0].pageX,M.touches[0].pageY,M.touches[1].pageX,M.touches[1].pageY)):(h=t||2!==M.button?1:4,u=t?M.touches[0].clientX:M.clientX,
x=t?M.touches[0].clientY:M.clientY);return!1}}function w(){n&&(clearInterval(n),n=!1)}var h=0,m=!1,q=!1,y=!1,I=1,u=0,x=0,z=0,g=0,k=0,G=0,L=16,E=U.Rj,F=U.Zi,e=U.Se,n=!1,A=0,Q=new Float32Array([0,0,0,0,0]),B=[U.al,U.bl],D={m:function(){A=U.uk[fa.X()];L=U.wd[fa.X()];fa.Ma("mousedown",p);fa.Ma("mouseup",l);fa.Ma("mouseout",l);fa.Ma("mousemove",f);fa.Ma("mousemove",f);fa.Ma("wheel",b);fa.Ma("touchstart",p);fa.Ma("touchend",l);fa.Ma("touchmove",f)},ib:function(M){m?(q[0]=-F,q[1]=E,y[1].value=I/U.Se*e,Za.Eb(y)):
(Q[0]=E,Q[1]=F,Q[2]=e,Q[3]=B[0],Q[4]=B[1],Bc.$n(Q,M))},Ym:function(){if(1E-4>k&&1E-4>G||-1===h)w(),G=k=0,0===h&&Aa.va();var M=Date.now(),t=M-g;g=M;M=Math.pow(A,t/L);k*=M;G*=M;d()},kf:function(M){m||(m=!0,h=-1,q=[0,0,0],y=[{name:"u84",type:"3f",value:q},{name:"u88",type:"1f",value:1}],I=M)},Lj:function(M){-1===h&&M&&(h=0);M||(h=-1)},Tn:function(){G=k=0;E=U.Rj;F=U.Zi;e=U.Se;D.ib()},Mq:function(M){e=M},Nq:function(M){B[0]=M[0];B[1]=M[1];U.th=M[2]},Lq:function(M,t){E=M;F=t}};return D}(),Gc=function(){var a=
{s106:!1,s106color:!1,s106NormalMap:!1,s106ParamsMap:!1,s106NormalParamsMap:!1};return{instance:function(b){function d(r){if(!H)return Promise.reject("REMOVED");x.nd&&x.nd(r);M=r.partsNames||[];D.splice(0);D.push({n:0,offset:0});A.min.set(Infinity,Infinity,Infinity);A.max.set(-Infinity,-Infinity,-Infinity);var N=r.uvs;N&&(N=N.filter(function(Ta){return Ta}));O=N&&0<N.length&&0<N[0].length?!0:!1;var ba=r.normals&&r.normals.length?!0:!1;"undefined"!==typeof Zb&&"string"===typeof r.faces&&(r.faces=Zb(r.faces));
"undefined"!==typeof Lb&&("string"===typeof r.vertices&&(r.vertices=Lb(r.vertices)),ba&&"string"===typeof r.normals&&(r.normals=Lb(r.normals)),N&&N.length&&N.forEach(function(Ta,Pa){"string"===typeof Ta&&(N[Pa]=Lb(Ta))}));var na=r.metadata.faces,oa=1+(O?1:0);na=(r.faces.length-na)/(r.metadata.faces*oa);6!==na&&8!==na||O||(++oa,na/=2);if(4===na){na=6*oa+2;for(var xa=4*oa+1,qa=Array(r.metadata.faces*na),ca=0;ca<r.metadata.faces;++ca)for(var ma=0;ma<oa;++ma)qa[ca*na+4*ma]=r.faces[ca*xa+5*ma],qa[ca*na+
4*ma+1]=r.faces[ca*xa+5*ma+1],qa[ca*na+4*ma+2]=r.faces[ca*xa+5*ma+2],0===ma&&(qa[ca*na+3]=r.faces[ca*xa+4]),qa[ca*na+4*ma+3*oa+1]=r.faces[ca*xa+5*ma],qa[ca*na+4*ma+3*oa+2]=r.faces[ca*xa+5*ma+2],qa[ca*na+4*ma+3*oa+3]=r.faces[ca*xa+5*ma+3],0===ma&&(qa[ca*na+3*oa+4]=r.faces[ca*xa+4]);r.faces=qa;r.metadata.faces*=2}na=r.metadata.vertices;z=Array(na);for(xa=0;xa<na;++xa)z[xa]=new Xa(r.vertices[3*xa],r.vertices[3*xa+1],r.vertices[3*xa+2]),wd(A,z[xa]);na=r.metadata.faces;g=Array(na);oa=3*oa+1;for(xa=0;xa<
na;++xa)g[xa]=new Kc(r.faces[oa*xa],r.faces[oa*xa+1],r.faces[oa*xa+2]),g[xa].$b=r.faces[oa*xa+3];if(ba)for(ba=r.metadata.normals,k=Array(ba),oa=0;oa<ba;++oa)k[oa]=new Xa(r.normals[3*oa],r.normals[3*oa+1],r.normals[3*oa+2]);else zd(z,g),k=Ad(z,g);v=3<z.length;H&&(H.visible=v);if(O){ba=Array(z.length);oa=["a","b","c"];for(na=0;na<r.metadata.faces;++na)for(xa=0;3>xa;++xa)if(qa=r.faces[7*na+xa],ca=r.faces[7*na+1+xa+3],"undefined"===typeof ba[qa])ba[qa]=[[qa,ca]];else if(ba[qa][0][1]!==ca){ma=-1;for(var W=
1;W<ba[qa].length;++W)if(ba[qa][W][1]===ca){ma=ba[qa][W][0];break}W=-1;-1===ma?(W=z.length,z.push(z[qa].clone()),k.push(k[qa].clone()),ba[qa].push([W,ca]),ba[W]=[[W,ca]]):W=ma;r.faces[7*na+xa]=W;g[na][oa[xa]]=W}G=Array(z.length);for(r=0;r<z.length;++r)oa="undefined"===typeof ba[r]?r:ba[r][0][1],G[r]=new cc(N[0][2*oa],N[0][2*oa+1])}var sa=Ac(A);x.mh&&(z.forEach(function(Ta){Ta.x-=sa.x;Ta.z-=sa.z;Ta.y-=A.min.y}),A.min.x-=sa.x,A.max.x-=sa.x,A.min.z-=sa.z,A.max.z-=sa.z,A.max.y-=A.min.y,A.min.y=0);if(x.nh){var Ia=
U.Ok/Math.max(A.max.x-A.min.x,A.max.y-A.min.y,A.max.z-A.min.z);z.forEach(function(Ta){Ta.Fa(Ia)});A.min.Fa(Ia);A.max.Fa(Ia)}r=O?8:6;ba=new Float32Array(z.length*r);for(oa=0;oa<z.length;++oa)ba[r*oa]=z[oa].x,ba[r*oa+1]=z[oa].y,ba[r*oa+2]=z[oa].z,ba[r*oa+3]=k[oa].x,ba[r*oa+4]=k[oa].y,ba[r*oa+5]=k[oa].z,O&&(ba[r*oa+6]=G[oa].x,ba[r*oa+7]=G[oa].y);g.sort(function(Ta,Pa){return Ta.$b-Pa.$b});var wa=new (65536>3*g.length?Uint16Array:Uint32Array)(3*g.length),gb=0;g.forEach(function(Ta,Pa){Ta.$b===gb?D[gb].n+=
3:(D.push({n:3,offset:3*Pa}),++gb);wa[3*Pa]=Ta.a;wa[3*Pa+1]=Ta.b;wa[3*Pa+2]=Ta.c});L&&L.remove();L=X.instance({ka:ba,indices:wa});e=F=!1;ia&&H.yh();P=!0;H.gf();return Promise.resolve()}function f(r){L.Na(r.n,r.offset)}function l(r,N){T[N]&&(C.set(T[N].om()),L.bind(!1),O?(C.Ra(),C.xj()):(C.bb(),C.yj()),T[N].Mc()&&(C.Uc(),F.yc(!1),C.ie(),yb.Nb()),T[N].yl(),T[N].vd(),L.Na(r.n,r.offset))}function p(r,N){T[N]&&(C.set(T[N].pm()),L.bind(!1),O?(C.Ra(),C.xj()):(C.bb(),C.yj()),T[N].Mc()&&(C.Uc(),F.yc(!1),C.ie(),
yb.Nb()),H.Dc(),T[N].vd(),L.Na(r.n,r.offset))}function w(r,N){ka&&T[N]&&(T[N].zl(),L.Na(r.n,r.offset))}function h(r,N){ka&&T[N]&&(T[N].Bl(O),L.Na(r.n,r.offset))}function m(r,N){T[N]&&(C.set(T[N].km()),T[N].Jh(),L.Na(r.n,r.offset))}function q(r,N){T[N]&&(C.set(T[N].lm()),H.Dc(),T[N].Jh(),L.Na(r.n,r.offset))}function y(r,N){T[N]&&(C.set(T[N].mm()),T[N].Mc()&&(F.yc(!1),C.ie(),yb.Nb()),L.bind(!1),T[N].Gh(O),L.Na(r.n,r.offset))}function I(r,N){if(T[N]){var ba=T[N].nm();C.set(ba);T[N].Mc()&&(F.yc(!1),C.ie(),
yb.Nb(),L.bind(!1));a[ba]||(H.Dc(),L.bind(!1),a[ba]=!0);T[N].Gh(O);L.Na(r.n,r.offset)}}function u(r,N){return new Promise(function(ba,na){r?(r.D=function(oa){oa?(T[N]&&T[N].I(),T[N]=oa,ia=ia||oa.Mc(),ba()):na()},Oc.instance(r)):na()})}if(!fa.vh())return!1;var x=Object.assign({mh:!1,nh:!1,ac:null,url:"",D:null,nd:null,Re:null},b),z=null,g=null,k=null,G=null,L=null,E=null,F=null,e=!1,n=new ec,A=new Jc,Q=[],B=null,D=[{n:0,offset:0}],M=[],t=[],v=!1,P=!1,V=[],T=[],ia=!1,O=!1,ka=!1,Qa=!1,H={visible:v,ll:function(){return D.length},
xf:function(){return M},yh:function(){!e&&O&&(g=g.filter(function(r){return null!==r}),E=Bd(z,k,G,g),F=X.instance({ka:E,indices:!1}),G=k=g=z=E=null,e=!0)},Dc:function(){yb.W();H.Ih()},Ih:function(){C.Vc("u140",n.elements)},Rp:function(){v&&(H.Ih(),L.bind(!1),O?C.Ra():C.bb(),L.W())},Il:function(r){v&&(r||H.Dc(),L.bind(!1),O?C.Ra():C.bb(),L.W())},Jl:function(){v&&(L.bind(!1),O?C.Ra():C.bb(),D.forEach(w))},Fh:function(){v&&(L.bind(!1),O?C.Ra():C.bb(),t.forEach(f))},Gl:function(r){ka&&v&&(L.bind(!1),
O?C.Ra():C.bb(),r?D.forEach(m):D.forEach(q))},ud:function(r){v&&(r||H.Dc(),L.bind(!1),r||(C.Ra(),C.Uc()),ka&&D.forEach(h))},vd:function(r){ka&&v&&(r?D.forEach(l):D.forEach(p))},Dl:function(){ka&&v&&D.forEach(I)},Cl:function(){ka&&v&&D.forEach(y)},ii:function(){return B},gi:function(){return V},$j:function(r,N,ba){r=T[r];if(!r)return!1;r.update(N,ba);H.bk();return!0},fi:function(){return new Promise(function(r){H.zc(function(){r(T.map(function(N){return N.tm()}))})})},Bg:function(r,N){V=r;ka=!1;Qa=
!0;T.forEach(function(ba){ba.I()});T=Array(r.length);ia=!1;r=r.map(function(ba,na){return"string"===typeof ba?yd(-1===ba.indexOf(".json")?ba+".json":ba).then(function(oa){oa.name=ba;return u(oa,na,ba)}):u(ba,na,!1)});Promise.all(r).then(function(){H&&(ka=!0,Qa=!1,H.zc(function(){ia&&H.yh();H.bk();Aa.Fb(H);Aa.re(!0);N&&N(H)},4),H.gf())})},bk:function(){t.splice(0);D.forEach(function(r,N){T[N]&&T[N].Wm()&&t.push(r)})},zc:function(r,N){P&&ka&&!Qa?r(H):Q.push({tb:r,order:N?N:0})},gf:function(){P&&ka&&
!Qa&&(Q.sort(function(r,N){return 0>r.order-N.order?1:-1}),Q.forEach(function(r){r.tb(H)}),Q.splice(0))},remove:function(){H.I();H=null},I:function(){v=P=!1;L&&L.remove();T.forEach(function(r){r.I()});e&&F.remove();D.splice(0)},rm:function(){return A.size().x},sm:function(){return A.size().y},iq:function(){return A.size().z},Vl:function(){return Ac(A).x},Wl:function(){return Ac(A).y},Xp:function(){return Ac(A).z},eq:function(){return A.min.y},replace:function(r,N,ba){if(r===B)return N&&H&&(H.gf(),
N(H)),!1;B=r;Aa.re(!1);Lc(r,function(na){d(na).then(function(){N&&N(H)}).catch(function(oa){ba&&ba(oa)})},ba);return!0}};x.ac&&H.Bg(x.ac,x.Re);B=x.url;Lc(x.url,function(r){d(r).then(function(){x.D&&x.D(H)})});return H},Qn:function(){a.s106=!1;a.s106color=!1;a.s106NormalMap=!1;a.s106ParamsMap=!1;a.s106NormalParamsMap=!1}}}(),Bc=function(){var a=null,b=!1,d=!1,f=null,l=new Float32Array(16),p=new Float32Array(3),w={data:0},h={m:function(){a=U.Ob?new Worker("js/worker.php"):{postMessage:function(m){w.data=
m;Pc.sn(w)},terminate:function(){}};a.onmessage=function(m){switch(m.data[0]){case 3:for(var q=0;16>q;++q)l[q]=m.data[q+1];for(q=0;3>q;++q)p[q]=m.data[q+17];yb.sf().so(l,p);break;case 6:h.mo(),b=!0,Ub.ib(!1),U.ga_&&(Jb.enable(),Jb.je())}};f=new Float32Array(6);f[0]=2;U.Ob||Pc.oo(a)},Mo:function(){U.Dh||(d=!0)},Zq:function(){d=!1},$n:function(m,q){if(q||b&&d)f[1]=m[0],f[2]=m[1],f[3]=m[2],f[4]=m[3],f[5]=m[4],a.postMessage(f)},mo:function(){a.postMessage([5,U.th])},I:function(){U.Ob&&a.terminate()}};
return h}(),Pc=function(){var a=0,b=0,d=0,f=[0,0],l=new ec,p=new zc,w=new zc,h=new Xa,m=new Xa,q=new dc,y=0,I=new Float32Array(20);I[0]=3;var u=null,x={data:!1},z={m:function(){"undefined"===typeof U&&(self.up={Ob:!0});U.Ob&&z.og([6])},sn:function(g){switch(g.data[0]){case 2:z.Cg(g.data);break;case 5:y=g.data[1]}},og:function(g){U.Ob?postMessage(g):(x.data=g,u.onmessage(x))},Cg:function(g){a=g[1];b=g[2];d=g[3];f[0]=g[4];f[1]=g[5];h.set(f[0],f[1],-d);q.set(b,a,0,"XYZ");if(!1===q instanceof dc)throw Error("JETHREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
g=Math.cos(q.F/2);var k=Math.cos(q.G/2),G=Math.cos(q.H/2),L=Math.sin(q.F/2),E=Math.sin(q.G/2),F=Math.sin(q.H/2),e=q.order;"XYZ"===e?(p.F=L*k*G+g*E*F,p.G=g*E*G-L*k*F,p.H=g*k*F+L*E*G,p.T=g*k*G-L*E*F):"YXZ"===e?(p.F=L*k*G+g*E*F,p.G=g*E*G-L*k*F,p.H=g*k*F-L*E*G,p.T=g*k*G+L*E*F):"ZXY"===e?(p.F=L*k*G-g*E*F,p.G=g*E*G+L*k*F,p.H=g*k*F+L*E*G,p.T=g*k*G-L*E*F):"ZYX"===e?(p.F=L*k*G-g*E*F,p.G=g*E*G+L*k*F,p.H=g*k*F-L*E*G,p.T=g*k*G+L*E*F):"YZX"===e?(p.F=L*k*G+g*E*F,p.G=g*E*G+L*k*F,p.H=g*k*F-L*E*G,p.T=g*k*G-L*E*F):
"XZY"===e&&(p.F=L*k*G-g*E*F,p.G=g*E*G-L*k*F,p.H=g*k*F+L*E*G,p.T=g*k*G+L*E*F);h.y-=y;g=l.elements;F=p.x;var n=p.y,A=p.z;L=p.w;var Q=F+F,B=n+n;E=A+A;k=F*Q;G=F*B;F*=E;e=n*B;n*=E;A*=E;Q*=L;B*=L;L*=E;g[0]=1-(e+A);g[4]=G-L;g[8]=F+B;g[1]=G+L;g[5]=1-(k+A);g[9]=n-Q;g[2]=F-B;g[6]=n+Q;g[10]=1-(k+e);g[3]=0;g[7]=0;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;l.setPosition(h);w.N(p).inverse();g=m.N(h);n=g.x;Q=g.y;A=g.z;k=w.x;G=w.y;L=w.z;E=w.w;F=E*n+G*A-L*Q;e=E*Q+L*n-k*A;B=E*A+k*Q-G*n;n=-k*n-G*Q-L*A;g.x=F*E+n*-k+e*-L-
B*-G;g.y=e*E+n*-G+B*-k-F*-L;g.z=B*E+n*-L+F*-G-e*-k;for(g=1;17>g;++g)I[g]=l.elements[g-1];I[17]=m.x;I[18]=m.y;I[19]=m.z;z.og(I)},oo:function(g){u=g;z.og([6])}};return z}();Pc.m();var Oc=function(){function a(w){var h=w.split(":").shift();return"data"===h||"blob"===h?w:("undefined"!==typeof J&&J.ea?J:U).ea+U.Pi+w}function b(w,h){return Math.min(h+w+h*w,1)}var d=!1,f=null,l=1,p={diffuseTexture:null,normalTexture:null,paramsTexture:null,isDisableColorTexture:!1,colorTextureUsage:0,metalness:.5,roughness:.5,
fresnelMin:0,fresnelMax:1,fresnelPow:5,alpha:1,diffuseColor:[255,255,255],paramsMapMask:[0,0,0,0],alphaUsage:0,D:null};return{m:function(){f=Z.instance({width:1,height:1,isMipmap:!1,L:4,array:new Uint8Array([255,255,255,255]),Lf:!1})},kf:function(){d=!0;l=2},instance:function(w){function h(){"number"===typeof k.alpha?(z[0]=k.alpha,z[1]=0,z[2]=0,z[3]=0):(z[0]=k.alpha[0],z[1]=k.alpha[1]-k.alpha[0],z[2]=k.alpha[2],z[3]=k.alpha[3]);var v=1<=k.fresnelPow?k.fresnelMin:k.fresnelMax;g[0]=b(z[0],v);g[1]=b(z[1],
v);g[2]=z[2];g[3]=z[3];e={Yi:k.fresnelMax,Li:[k.fresnelMin,k.roughness,k.fresnelPow/15,k.metalness],Oi:k.paramsMapMask};G=[k.diffuseColor[0]/255,k.diffuseColor[1]/255,k.diffuseColor[2]/255]}function m(){return new Promise(function(v){(u=k.normalTexture&&fa.el()?!0:!1)&&!E.Ga?E.Ga=Z.instance({url:a(k.normalTexture),isLinear:!0,isMipmap:!0,isAnisotropicFiltering:!1,isPot:!0,L:3,D:v}):v()})}function q(){return new Promise(function(v){(x=k.diffuseTexture&&""!==k.diffuseTexture?!0:!1)&&!E.ha?(E.ha=Z.instance({url:a(k.diffuseTexture),
isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!0,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,L:4,D:v}),L="s111"):(E.ha||(L="s112",E.ha=f),v())})}function y(){return new Promise(function(v){(F=k.paramsTexture?!0:!1)&&!E.$a?k.paramsTexture===k.diffuseTexture?(E.$a=E.ha,v()):E.$a=Z.instance({url:a(k.paramsTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!1,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,L:4,D:v}):v()})}function I(v,P){h();Promise.all([m(),q(),y()]).then(function(){u||F||x?u||F?
u&&!F?(n="s106NormalMap",A="s106NNGLtextureNormalMap"):!u&&F?(n="s106ParamsMap",A="s106NNGLtextureParamsMap"):(n="s106NormalParamsMap",A="s106NNGLtextureNormalParamsMap"):(n="s106",A="s106NNGLtexture"):(n="s106color",A="s106NNGLcolor");Q=u?"s114":"s113";B=u?"s108":"s118";D=F?"s116":"s115";M=F?"s109":"s119";P&&k.D&&setTimeout(k.D.bind(null,v),1)})}var u,x,z=[1,0,0,0],g=[0,0,0,0],k=Object.assign({},p,w),G=null,L=null,E={ha:null,Ga:null,$a:null},F=u=x=!1,e=null,n=null,A=null,Q=null,B=null,D=null,M=null,
t={update:function(v,P){void 0===P&&(P=!0);Object.assign(k,v);P?(t.I(),I(t,!1)):h()},Mc:function(){return u},Wm:function(){return.99>z[0]},tm:function(){return k},pm:function(){return B},om:function(){return Q},lm:function(){return M},km:function(){return D},nm:function(){return n},mm:function(){return A},vd:function(){u&&E.Ga.h(0)},Bl:function(v){d&&C.set(L);v?C.Ra():C.bb();x&&C.Uc();t.ud()},ud:function(){x&&(C.C("u74",k.alphaUsage),C.C("u73",k.colorTextureUsage),(k.isDisableColorTexture?f:E.ha).h(0));
C.Hg("u150",G)},Jh:function(){F&&(E.$a.h(0),C.Ba("u76",e.Oi),C.Uc());C.Ba("u114",e.Li);C.C("u151",e.Yi)},Gh:function(v){F&&!u?E.$a.h(l):u&&(x||f.h(0),E.Ga.h(l),F&&E.$a.h(l+1));F&&C.Ba("u76",e.Oi);x||u?C.io():v?C.jo():C.ko();t.ud();C.Ba("u13",z);C.Ba("u114",e.Li);C.C("u151",e.Yi)},yl:function(){C.Ba("u13",z)},zl:function(){C.Ba("u13",g)},I:function(){x&&E.ha.remove();u&&E.Ga.remove();F&&k.paramsTexture!==k.diffuseTexture&&E.$a.remove();Object.assign(E,{ha:null,Ga:null,$a:null})}};I(t,!0);return t}}}(),
Jb=function(){var a=0,b=0,d=0,f=0,l=0,p=0,w=U.Mk,h=U.Lk,m=U.Nk,q=0,y=0,I=null,u=null,x=0,z=0,g=0,k=0,G=0,L=null,E=0,F=0,e=0,n=Date.now(),A=null,Q=!1,B=!1,D=!1,M=1,t=!1,v={m:function(){a=U.Hk[fa.X()];b=U.Gk[fa.X()];d=U.Fk[fa.X()];F=U.Ik[fa.X()];f=U.zk[fa.X()];l=U.Dk[fa.X()];g=U.Ek[fa.X()];k=fa.P();G=fa.$();q=Math.round(k*a);y=Math.round(G*a);u=Ca.instance({width:q,height:y,Hc:!1});I=Z.instance({width:q,height:y,isPot:!1,isLinear:!0});L=Z.instance({width:q,height:y,isPot:!1,isLinear:!0,L:1});Q=!0},
resize:function(P,V,T){M=T;k=P;G=V;q=Math.round(P*a);y=Math.round(V*a);u.resize(q,y);B=!0},W:function(){var P=Math.exp(-(Date.now()-n)/F);E=D?e+(1-P)*(1-e):e*P;x=b+E*(d-b);z=f+(1-E)*(1-f);p=l+(1-E)*(1-l);Z.aa(5);if(B&&Q)Z.aa(6),L.resize(q,y),C.set("s0"),C.le("u1",6),u.bind(!1,!0),L.u(),u.Ve(),I.h(6),X.l(!0,!0),I.resize(q,y),I.u(),L.h(6),X.l(!1,!1),C.le("u1",0),B=!1;else{c.enable(c.BLEND);c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA);P=x/g;c.blendColor(P,P,P,P);c.colorMask(!0,!1,!1,!0);C.set("s98");
yb.hf();C.C("u131",x);F&&(C.C("u132",z),C.C("u123",p));var V=M*(w+Math.pow(Math.random(),m)*(h-w));C.O("u14",V/k,V/G);u.ph();u.Wc();I.u();V=2*Math.PI*Math.random();for(var T=!0,ia=0;ia<g;++ia)1===ia&&(c.blendFunc(c.SRC_ALPHA,c.ONE),C.C("u131",P)),C.C("u130",V+ia/g*(Math.PI/2)),C.O("u129",(Math.random()-.5)/k,(Math.random()-.5)/G),X.l(T,T),T=!1;c.disable(c.BLEND);C.set("s99");C.O("u14",1/q,1/y);L.u();I.h(7);X.l(!1,!1);c.colorMask(!0,!0,!0,!0)}},h:function(P){L.h(P)},enable:function(){t=!0},Bn:function(){if(D||
!t)return!1;A&&clearTimeout(A);v.je();A=setTimeout(v.Zj,400)},je:function(){A&&(clearTimeout(A),A=!1);!D&&t&&(window.lk.disable(),D=!0,n=Date.now(),e=E)},Zj:function(){D&&t&&(A&&(clearTimeout(A),A=null),window.lk.enable(),D=!1,n=Date.now(),e=E)},I:function(){I.remove();L.remove();u.remove()}};v.Bn();return v}(),Ld={instance:function(a){var b=a.V.P(),d=a.Pm?!0:!1,f=d?"s85":"s75",l=a.V,p=a.V.Um()&&Ha.ja(),w=Z.instance({isFloat:p&&!d,isLinear:!0,isMipmap:!1,isPot:!0,width:b,height:b,L:d?4:3}),h=Z.instance({isFloat:p,
isLinear:!0,isPot:!0,width:1,height:b/2,L:3});d=Math.round(Math.log(b)/Math.log(2));for(var m=[],q=0,y=0;y<=d;++y){var I=Math.pow(2,d-y),u=I/2;if(4>u)break;m.push({cp:b/I,da:I,Tb:u,rp:q,V:0===y?a.V:Z.instance({isFloat:p,isPot:!0,isLinear:!0,width:I,height:u})});q+=u;if(0!==q%1)break}w.lo=function(x){l=x;m[0].V=x};w.Mn=function(){h.J();C.set("s92");l.h(0);X.l(!0,!0);C.set("s12");h.h(1);var x=l;m.forEach(function(z,g){0!==g&&(z.V.J(),x.h(0),Z.qo(),C.O("u93",1,1),C.C("u94",Math.min(6/z.Tb,.5)),X.l(!1,
!1),x=z.V)});C.set(f);C.C("u91",U.Rc);w.u();m.forEach(function(z){c.viewport(0,z.rp,b,z.Tb);C.O("u90",z.cp,1);z.V.h(0);Z.to();X.l(!1,!1)})};w.Pn=w.remove;w.remove=function(){w.Pn();h.remove();_downScaledTextures.forEach(function(x){x.V.remove()});_downScaledTextures.splice(0)};return w}};ya.La=function(){var a={Tc:45,wg:1,Cb:"../../images/debug/picsou.png",he:.8,Sf:3.14/6,Tf:.314,Sd:4,Rd:.5,Rf:-.25,$m:1,da:256,Qf:.15},b={rb:null,Pb:null,screen:null},d=!1,f=!1,l=-1,p=null,w=null,h=null,m=Math.PI/180,
q=[1,1],y=!1,I={m:function(u){l=u.width;u={isFloat:Ha.ja(),U:!0,isPot:!1,isMipmap:!1,width:l,height:l/2,L:3};b.rb&&(b.rb.remove(),b.Pb.remove());b.Pb=Z.instance(Object.assign({isLinear:!1},u));b.rb=Ic.instance(Object.assign({isLinear:!0},u));C.j("s120",[{type:"1i",name:"u158",value:0}]);C.j("s121",[{type:"1i",name:"u95",value:0},{type:"1i",name:"u103",value:1},{type:"1i",name:"u163",value:2}]);I.ck();y=!0},ck:function(){C.j("s121",[{type:"1f",name:"u164",value:a.Sf},{type:"1f",name:"u165",value:a.Tf},
{type:"1f",name:"u166",value:a.Sd},{type:"1f",name:"u167",value:a.Rd},{type:"1f",name:"u168",value:a.Rf}])},wq:function(){return f},ra:function(u){p=u},Sc:function(){w="uniform sampler2D u158;uniform vec2 u159,u160,u10;uniform int u161;uniform float u162,u144;varying vec2 vv0;const float h=3.141593;const vec2 i=vec2(.5);const float e=1.2;const vec3 g=vec3(1.);void main(){vec2 c=vec2(vv0.x*2.,-vv0.y+.5)*h,a=i+u10*(c-u159)/u160;float b=1.;if(u161==0){if(a.x<0.||a.x>1.||a.y<0.||a.y>1.)discard;}else b*=smoothstep(-e,0.,a.x),b*=1.-smoothstep(1.,1.+e,a.x),b*=smoothstep(-e,0.,a.y),b*=1.-smoothstep(1.,1.+e,a.y);vec3 d=mix(u162*g,texture2D(u158,a).rgb*u144,b*g);gl_FragColor=vec4(d,1.);}";
h="uniform sampler2D u95,u103,u163;uniform float u164,u165,u166,u167,u168,u169;varying vec2 vv0;const float f=3.141593;const vec2 h=vec2(.5);const vec3 i=vec3(1.);void main(){float j=(vv0.x*2.-1.)*f,c=(-vv0.y+.5)*f;vec4 a=texture2D(u163,h);float d=a.r,k=u166*a.g,l=u167*(a.b+u168),b=a.a,g=asin(cos(b)*cos(d)),m=atan(cos(b)*sin(d),-sin(b)),n=acos(sin(c)*sin(g)+cos(c)*cos(g)*cos(j-m)),o=1.-smoothstep(u164-u165,u164+u165,n);vec3 p=i*(max(l,0.)+max(k,0.)*o),q=texture2D(u95,vv0).rgb,r=texture2D(u103,vv0).rgb;gl_FragColor=vec4(mix(p+r,q,u169),1.);}";
C.oa("s120",{name:"_",g:w,i:"u158 u159 u161 u160 u162 u144 u10".split(" "),precision:"highp"});C.oa("s121",{name:"_",g:h,i:"u163 u164 u165 u166 u167 u168 u103 u95 u169".split(" "),precision:"highp"})},Mg:function(u,x,z,g,k,G,L,E){C.O("u159",x,z);C.le("u161",g?1:0);C.O("u160",k,k/G);C.Fg("u10",L);u.h(0);X.l(E,E)},ji:function(){return b.rb.di()},rh:function(u){I.m({width:a.da});I.dk(u,!1,1);f=!0},qh:function(){d&&b.screen.vm()===a.Cb||(d=!1,b.screen&&b.screen.remove(),b.screen=Z.instance({url:a.Cb,
isFloat:!1,D:function(){d=!0}}))},Cg:function(u){Object.assign(a,u)},ib:function(u){I.Cg(u);y&&(I.ck(),I.qh())},dk:function(u,x,z){Ca.ba();b.Pb.J();C.set("s120");C.C("u162",a.Qf);C.C("u144",a.$m);I.Mg(u,Math.PI,0,!0,90*m,u.P()/u.$(),q,!0);d&&(u=a.da,C.C("u144",a.he),c.viewport(0,0,u/2,u/2),I.Mg(b.screen,0,0,!1,2*a.Tc*m,2*a.wg,q,!1),c.viewport(u/2,0,u/2,u/2),I.Mg(b.screen,2*Math.PI,0,!1,2*a.Tc*m,2*a.wg,q,!1));x?(C.set("s121"),C.C("u169",1-z),b.rb.wj(0),b.Pb.h(1),x.h(2),X.l(!1,!1),p.Ag(b.rb.di())):
p.Ag(b.Pb)},A:function(){y=!1;Object.assign(b,{rb:null,Pb:null,screen:null});f=d=!1;l=-1;p=null}};return I}();ya.mb=function(){var a=!1,b=!0,d=null,f=null,l=1,p=null,w={Sc:function(){fa.ca()&&(C.oa("s122",{name:"_",v:"attribute vec3 a0;uniform sampler2D u41;uniform float u147;uniform vec2 u42;uniform vec3 u146;const float l=0.,m=0.,D=1.;const vec2 e=vec2(1.);const vec3 n=vec3(1.);const vec2 E=vec2(-1.,1.),o=vec2(.16,.5),p=vec2(.5,.5),q=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 r(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,o);vec2 f=u87*e;vec3 c=u87*n;vec2 s=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,p).rgb+vec3(u81,0.,0.),u84,c);float t=mix(texture2D(u41,q).r,0.,u87);a.z+=t;mat3 u=r(a);vec3 v=mix(u146,u85,c);float w=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 x=mat2(h,i,-i,h);b.xy=x*b.xy;float y=mix(u83,1.,u87);vec2 j=u82/s;vec3 k=a0;float z=max(0.,-a0.z-l)*m;k.x+=z*sign(a0.x)*(1.-u87);vec3 A=u*(k+v)*w+b;vec2 B=j*y;vec3 C=vec3(g*B,-j)+A*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(C,1.));}",
g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,1.,1.),gl_FragData[2]=vec4(1.,0.,0.,0.),gl_FragData[3]=vec4(0.,.5,1.,0.);}",i:["u41","u42","u80","u146","u147"].concat(C.Fd(),C.Gd()),K:["a0"],S:[3],fa:!0}),a=!0)},m:function(h){a&&C.j("s122",[{type:"1i",name:"u41",value:1},{type:"3f",name:"u80",value:h.Ha},{type:"1f",name:"u147",value:1},{type:"1f",name:"u81",value:0},{type:"1f",name:"u89",value:1}].concat(h.Xg))},fb:function(h,m){f=h;l=m;w.pi()},eb:function(h,m){d=h;p=m;w.pi()},
pi:function(){if(fa.ca()&&f&&d){var h=[d[0]*f,d[1]*f,d[2]*f],m=p;h[0]+=m[0];h[1]+=m[1];h[2]+=m[2];C.j("s122",[{type:"1f",name:"u147",value:l},{type:"3f",name:"u146",value:h}]);C.M()}},Fm:function(h){for(var m=h.width/2,q=h.height/2,y=h.depth,I=h.Kl,u=h.height/4,x=h.ol,z=2*x+4,g=[],k=[],G=-m+h.Va,L=-I-h.Va,E=m-h.Va,F=-I-h.Va,e=0;e<z;++e){var n=0,A=0;0===e?(n=-m,A=-I-y):1<=e&&e<=1+x?(A=(e-1)/x*Math.PI/2,n=G-Math.cos(A)*h.Va,A=L+Math.sin(A)*h.Va):e>=2+x&&e<=2+2*x?(A=(e-2-x)/x*Math.PI/2,n=E+Math.sin(A)*
h.Va,A=F+Math.cos(A)*h.Va):e===z-1&&(n=m,A=-I-y);g.push(n,q+u,A,n,-q+u,A);0!==e&&k.push(2*e,2*e-2,2*e-1,2*e,2*e-1,2*e+1)}return w.instance({ka:g,indices:k})},toggle:function(h){b=h},instance:function(h){var m=X.instance({ka:h.ka,indices:h.indices});return{W:function(){a&&b&&(C.set("s122"),m.bind(!0),m.W())}}}};return w}();ya.ia=function(){function a(t){C.j("s125",t);C.j("s126",t)}var b={Bf:-87,ym:[85,95],oi:[90,90],ni:[85,70],od:24,Lp:12,pl:2,pg:[-80,40],Ui:[0,-10],pn:40,rn:20,Vi:[70,50],qn:90,Uo:2,
oe:[0,-15],Fe:1024,lb:512,$d:4,Ko:[6,30],Ti:1.2};b.dj=b.pg;var d=!1,f=!1,l=!1,p=null,w=null,h=null,m=null,q=null,y=null,I=!1,u=!1,x=null,z=null,g=null,k=null,G=.5,L=[{type:"1f",name:"u171",value:1}],E=null,F=null,e=0,n=["u41","u42","u147","u146"],A=null,Q=null,B=null,D=null,M={Sc:function(){C.oa("s123",{name:"_",v:"attribute vec3 a0;uniform vec3 u146;uniform vec2 u172,u173;uniform float u147,u174,u175,u176;varying float vv0,vv1;void main(){vec3 a=(a0+u146)*u147;float b=atan(a.x,a.z-u174),d=2.*(a.y-u175)/(u176-u175)-1.;vv0=a0.y;float g=1.-u172.x*u172.x/(u172.y*u172.y),c=u172.x/sqrt(1.-g*pow(cos(b),2.));vec3 h=vec3(c*sin(b),a.y,c*cos(b)+u174);vv1=smoothstep(u173.x,u173.y,length(h-a)),gl_Position=vec4(b,d,0.,1.);}",
g:"uniform float u177;uniform vec4 u13;varying float vv0,vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv0),b=min(a,1.)*u177;gl_FragColor=vec4(b,vv1,1.,1.);}",i:"u147 u146 u172 u173 u174 u175 u176 u13 u177".split(" "),K:["a0"],S:[3],precision:"highp"});C.oa("s124",{name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u1,vv0-3.*u14),c=texture2D(u1,vv0-2.*u14),d=texture2D(u1,vv0-u14),f=texture2D(u1,vv0+u14),g=texture2D(u1,vv0+2.*u14),h=texture2D(u1,vv0+3.*u14);float j=.031496*b.r+.110236*c.r+.220472*d.r+.275591*a.r+.220472*f.r+.110236*g.r+.031496*h.r;vec2 i=b.gb*b.b+c.gb*c.b+d.gb*d.b+a.gb*a.b+f.gb*f.b+g.gb*g.b+h.gb*h.b;i/=b.b+c.b+d.b+a.b+f.b+g.b+h.b,gl_FragColor=vec4(mix(j,a.r,1.-i.x),i,1);}",
i:["u1","u14"],precision:"lowp"});C.oa("s125",{name:"_",v:"attribute vec3 a0,a2;attribute vec2 a1;varying vec2 vv0;varying float vv1;uniform sampler2D u41;uniform vec2 u42;uniform float u147;uniform vec3 u146;const float o=0.,p=0.;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 G=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 g=u87*e;vec3 c=u87*q;vec2 v=mix(d.a*u42,e,g),h=(2.*d.gb-e)*(1.-g);h.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u81,0.,0.),u84,c);float w=mix(texture2D(u41,t).r,0.,u87);a.z+=w;mat3 i=u(a);vec3 x=mix(u146,u85,c);float y=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float j=cos(a.z),k=sin(a.z);mat2 z=mat2(j,k,-k,j);b.xy=z*b.xy;float A=mix(u83,1.,u87);vec2 l=u82/v;vec3 m=a0;float B=max(0.,-a0.z-o)*p;m.x+=B*sign(a0.x)*(1.-u87);vec3 C=i*(m+x)*y+b;vec2 D=l*A;vec3 E=vec3(h*D,-l)+C*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(E,1.)),vv0=a1,gl_Position*=vec4(-1.,1.,1.,1.);vec3 F=i*a2;vv1=-F.z,vv1*=vv1*1e-5+smoothstep(5.,50.,abs(a0.x));}",
g:"uniform sampler2D u178,u163;uniform vec2 u93,u179;uniform float u180,u171;varying vec2 vv0;varying float vv1;void main(){vec2 b=u179*u180+u93*vv0;vec4 a=u171*texture2D(u178,b);a.r*=step(0.,vv0.y),gl_FragColor=vec4(0.,0.,0.,a.r*vv1);}",i:"u178 u163 u80 u180 u179 u93 u171".split(" ").concat(C.Fd(),C.Gd(),n),K:["a0","a2","a1"],S:[3,3,2],precision:"lowp"});C.oa("s126",{name:"_",v:"attribute vec3 a0;uniform sampler2D u41;uniform vec2 u42;uniform float u147;uniform vec3 u146;const float l=0.,m=0.;const vec2 e=vec2(1.);const vec3 n=vec3(1.);const vec2 D=vec2(-1.,1.),o=vec2(.16,.5),p=vec2(.5,.5),q=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 r(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,o);vec2 f=u87*e;vec3 c=u87*n;vec2 s=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,p).rgb+vec3(u81,0.,0.),u84,c);float t=mix(texture2D(u41,q).r,0.,u87);a.z+=t;mat3 u=r(a);vec3 v=mix(u146,u85,c);float w=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 x=mat2(h,i,-i,h);b.xy=x*b.xy;float y=mix(u83,1.,u87);vec2 j=u82/s;vec3 k=a0;float z=max(0.,-a0.z-l)*m;k.x+=z*sign(a0.x)*(1.-u87);vec3 A=u*(k+v)*w+b;vec2 B=j*y;vec3 C=vec3(g*B,-j)+A*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(C,1.)),gl_Position*=vec4(-1.,1.,1.,1.);}",
g:"void main(){gl_FragColor=vec4(0.);}",i:["u80"].concat(C.Fd(),C.Gd(),n),K:["a0"],S:[3],precision:"lowp"});d=!0},m:function(t){if(d){if(void 0===t.jc||!t.jc)return!1;if(f)M.uj(t);else{m=Z.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:b.Fe,height:b.Fe/4});var v=b.lb/4,P={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:b.lb,height:v};h=Z.instance(P);y=Z.instance(P);q=Z.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:b.lb,height:v*b.$d});v=[];P=[];var V=b.Ui[0],T=b.Ui[1],
ia=b.pn,O=b.rn,ka=-b.Vi[0]+V,Qa=b.Vi[1]+T,H=b.qn;v.push(0,V,T,.5*-O,ka,Qa,.5*O,ka,Qa,.5*-ia,V-H,T,.5*ia,V-H,T);P.push(0,2,1,0,1,3,1,4,3,1,2,4,0,4,2);B=X.instance({ka:new Float32Array(v),indices:new Uint16Array(P)});v=.5-.5/t.kc[1];P=.5+.5/t.kc[1];V=new Float32Array(16*b.od);T=new Uint16Array(6*(b.od-1));for(ia=0;ia<b.od;++ia){O=2*ia/(b.od-1)-1;O=Math.sign(O)*Math.pow(Math.abs(O),b.pl);H=Math.PI*(O+1)/2-Math.PI/2;O=Math.sin(H);var r=Math.cos(H);ka=Math.sin(H*b.Ti);Qa=Math.cos(H*b.Ti);var N=H/(Math.PI*
t.kc[0])+.5;H=b.ni[0]*O;var ba=b.dj[0],na=b.ni[1]*r+b.Bf,oa=N,xa=v,qa=b.dj[1];r=b.oi[1]*r+b.Bf;var ca=P,ma=16*ia;V[ma]=b.oi[0]*O;V[ma+1]=qa;V[ma+2]=r;V[ma+3]=ka;V[ma+4]=0;V[ma+5]=Qa;V[ma+6]=N;V[ma+7]=ca;V[ma+8]=H;V[ma+9]=ba;V[ma+10]=na;V[ma+11]=ka;V[ma+12]=0;V[ma+13]=Qa;V[ma+14]=oa;V[ma+15]=xa;0!==ia&&(O=2*ia,ka=6*(ia-1),T[ka]=O,T[ka+1]=O-1,T[ka+2]=O-2,T[ka+3]=O,T[ka+4]=O+1,T[ka+5]=O-1)}D=X.instance({ka:V,indices:T});M.uj(t);C.j("s124",[{type:"1i",name:"u1",value:0}]);f=!0}}},uj:function(t){G=t.Fo;
k=t.pe;var v=[{type:"1i",name:"u41",value:1},{type:"3f",name:"u80",value:[t.Ha[0],t.Ha[1]-b.oe[0],t.Ha[2]+b.oe[1]]}].concat(t.Xg,t.Yj);E=[{type:"1i",name:"u178",value:0},{type:"1i",name:"u163",value:2},{type:"1f",name:"u180",value:t.Go},{type:"2f",name:"u93",value:[1,1/b.$d]},{type:"2f",name:"u179",value:[0,1/b.$d]},{type:"1f",name:"u171",value:1}].concat(v);F=v;C.j("s125",E);C.j("s126",F)},ec:function(t){p=t},dc:function(t){A=t;A.zc(M.Ac)},Fi:function(){return l&&null!==A&&null!==Q},Ac:function(){if(!(l||
u&&I)||null===A||null===Q)return!1;e=0;c.viewport(0,0,b.Fe,b.Fe/4);Ca.ba();m.u();c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);C.j("s123",[{type:"1f",name:"u174",value:b.Bf},{type:"1f",name:"u175",value:b.pg[0]},{type:"1f",name:"u176",value:b.pg[1]},{type:"3f",name:"u146",value:[x[0]+z[0],x[1]+z[1],x[2]+z[2]]},{type:"1f",name:"u177",value:G},{type:"2f",name:"u172",value:b.ym},{type:"2f",name:"u173",value:b.Ko}]);A.Jl();C.set("s1");var t=b.lb/4;c.viewport(0,0,b.lb,t);h.u();m.h(0);m.Ec();X.l(!0,
!0);for(var v=0;v<b.$d;++v)C.set("s124"),0!==v&&c.viewport(0,0,b.lb,t),y.u(),h.h(0),C.O("u14",1/b.lb,0),X.l(!1,!1),h.u(),y.h(0),C.O("u14",0,1/t),X.l(!1,!1),b.ql&&c.colorMask(0===v,1===v,2===v,!0),C.set("s1"),q.u(),h.h(0),c.viewport(0,v*t,b.lb,t),X.l(!1,!1),b.ql&&c.colorMask(!0,!0,!0,!0);return l=!0},W:function(){M.Fi()&&0===e++%b.Uo&&(Q.bind(!1,!1),w.J(),c.clearColor(0,0,0,0),c.enable(c.DEPTH_TEST),c.depthMask(!0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),C.set("s126"),p.h(1),B.bind(!0),B.W(),
C.set("s125"),q.h(0),D.bind(!0),D.W(),c.disable(c.DEPTH_TEST),c.depthMask(!1))},qm:function(){return w},add:function(){M.Fi()&&(c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),w.h(0),X.l(!1,!1),c.disable(c.BLEND))},yg:function(t,v){Q&&Q.remove();Q=Ca.instance({width:t,height:v,Hc:!0});w&&w.remove();w=Z.instance({width:t,height:v,isFloat:!1,isPot:!1});M.Ac()},eb:function(t,v,P){t||(t=x,v=z,P=g);a([{type:"3f",name:"u146",value:[P[0]+k[0],P[1]+k[1]-b.oe[0],P[2]+k[2]+b.oe[1]]}]);x=t;z=v;g=
P;u=!0;!l&&I&&M.Ac();C.M()},fb:function(t,v){C.j("s123",[{type:"1f",name:"u147",value:t}]);a([{type:"1f",name:"u147",value:v}]);I=!0;!l&&u&&M.Ac();C.M()},Dg:function(t){a([{type:"1f",name:"u81",value:t}]);C.M()},Fb:function(t){t&&(A=t);M.Ac()},Eg:function(t,v){L[0].value=1-t;a(L);a(v)},I:function(){},A:function(){[Q,B,D].forEach(function(t){t&&t.remove()});e=0;u=I=!1;D=B=Q=k=g=z=x=null;l=f=d=!1;y=q=m=h=w=p=null}};return M}();ya.ua=function(){var a=!1,b=null,d=0,f=0,l=0,p=[{type:"1f",name:"u171",value:1}],
w=null,h=null,m=null,q={Sc:function(){C.oa("s127",{name:"_",v:"attribute vec3 a0;uniform vec2 u181,u182;varying vec2 vv0;void main(){vec2 a=2.*(a0.xy-u182)/u181;gl_Position=vec4(a,0.,1.),vv0=a0.xy;}",g:"uniform vec2 u90;uniform float u183,u184,u185;varying vec2 vv0;void main(){vec2 b=vec2(sign(vv0.x)*.5*u183,u184),a=vv0-b,c=u185*a,d=(c-a)*u90;gl_FragColor=vec4(d,0.,1.);}",i:"u181 u182 u183 u184 u185 u90".split(" "),K:["a0"],S:[3],precision:"highp"});C.oa("s128",{name:"_",v:"attribute vec3 a0;varying vec2 vv0,vv1;uniform sampler2D u41;uniform vec3 u146;uniform vec2 u42,u181,u182;uniform float u147;const float n=0.,o=0.;const vec2 e=vec2(1.);const vec3 p=vec3(1.);const vec2 F=vec2(-1.,1.),q=vec2(.16,.5),r=vec2(.5,.5),s=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 t(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,q);vec2 f=u87*e;vec3 c=u87*p;vec2 u=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,r).rgb+vec3(u81,0.,0.),u84,c);float v=mix(texture2D(u41,s).r,0.,u87);a.z+=v;mat3 w=t(a);vec3 x=mix(u146,u85,c);float y=mix(u147,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 z=mat2(h,i,-i,h);b.xy=z*b.xy;float A=mix(u83,1.,u87);vec2 j=u82/u;vec3 k=a0;float B=max(0.,-a0.z-n)*o;k.x+=B*sign(a0.x)*(1.-u87);vec3 C=w*(k+x)*y+b;vec2 D=j*A;vec3 E=vec3(g*D,-j)+C*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(E,1.)),gl_Position*=vec4(-1.,1.,1.,1.),vv0=vec2(.5,.5)+(a0.xy-u182)/u181,vv1=vec2(.5,.5)+.5*gl_Position.xy/gl_Position.w;}",
g:"uniform sampler2D u186,u187;uniform float u171;varying vec2 vv0,vv1;void main(){vec2 a=u171*texture2D(u186,vv0).rg;gl_FragColor=texture2D(u187,a+vv1);}",i:"u171 u41 u186 u187 u181 u182 u42 u80 u147 u146".split(" ").concat(C.Fd(),C.Gd()),K:["a0"],S:[3],precision:"lowp"});a=!0},m:function(y){if(a){if(void 0===y.jc||!y.qd)return!1;h=Z.instance({isFloat:!0,isPot:!1,isMipmap:!1,isLinear:!1,width:256,height:128,L:4});m=Ca.instance({width:256,height:128});C.j("s128",[{type:"1i",name:"u41",value:1},{type:"1i",
name:"u186",value:2},{type:"1i",name:"u187",value:0},{type:"3f",name:"u80",value:y.Ha},{type:"1f",name:"u171",value:1}].concat(y.Yj,y.Xg));f=y.bf;l=y.af;d=y.cf}},ec:function(y){b=y},dc:function(y){w=y;w.zc(q.Ye)},Ye:function(){c.viewport(0,0,256,128);m.u();h.u();var y=w.rm(),I=w.sm(),u=[{type:"2f",name:"u181",value:[y,I]},{type:"2f",name:"u182",value:[w.Vl(),w.Wl()]}];C.j("s127",u.concat([{type:"1f",name:"u183",value:f},{type:"1f",name:"u184",value:l},{type:"1f",name:"u185",value:d},{type:"2f",name:"u90",
value:[1/y,-1/I]}]));w.Fh();C.j("s128",u)},W:function(){C.set("s128");b.h(1);h.h(2);w.Fh()},eb:function(y){C.j("s128",[{type:"3f",name:"u146",value:y}]);C.M()},fb:function(y){C.j("s128",[{type:"1f",name:"u147",value:y}]);C.M()},Dg:function(y){C.j("s128",[{type:"1f",name:"u81",value:y}]);C.M()},Do:function(y){d=y;q.Ye();C.M();Aa.animate(Date.now())},Fb:function(y){y&&(w=y);q.Ye()},Eg:function(y,I){p.u171=1-y;C.j("s128",p);C.j("s128",I)},I:function(){}};return q}();ya.qc=function(){var a=[0,-.5],b=
!1,d=!1,f=null,l=null,p=null,w=null,h=null,m=-1,q=-1;return{Sc:function(){C.oa("s129",{name:"_",v:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42,u11;uniform float u10;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){vec4 a=texture2D(u41,vec2(.25,.5));vec2 b=a.a*u42,c=2.*a.gb-f,d=u11+a0*u10;gl_Position=vec4(c+b*d,0.,1.),vv0=vec2(.5,.5)+.5*a0;}",g:"uniform sampler2D u188;varying vec2 vv0;void main(){gl_FragColor=texture2D(u188,vv0);}",i:["u41","u188","u42","u11","u10"],precision:"lowp"});
C.oa("s130",{name:"_",g:"uniform sampler2D u2,u189,u190;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){float a=texture2D(u2,vv0).r;vec3 b=texture2D(u190,vv0).rgb,c=texture2D(u189,vv0).rgb;gl_FragColor=vec4(mix(b,c,a*f),1.);}",i:["u2","u190","u189"],precision:"lowp"});b=!0},m:function(y){b&&(h=Z.instance({isFloat:!1,isPot:!0,url:y.Pe,D:function(){d=!0}}),C.j("s129",[{type:"1i",name:"u41",value:1},{type:"1i",name:"u188",value:0},{type:"2f",name:"u42",value:y.hk},{type:"2f",name:"u11",value:a},
{type:"1f",name:"u10",value:3.8}]),C.j("s130",[{type:"1i",name:"u189",value:0},{type:"1i",name:"u2",value:1},{type:"1i",name:"u190",value:2}]))},ec:function(y){l=y},yg:function(y,I){var u={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:y,height:I,L:4};m=2/y;q=2/I;p=Z.instance(u);w=Z.instance(u);f=Ca.instance({width:y,height:I})},W:function(y,I){if(d){f.bind(!1,!0);C.set("s91");for(var u=0;2>u;++u){C.O("u14",m,0);p.u();0!==u&&w.h(0);var x=0===u&&!U.ga_;X.l(x,x);C.O("u14",0,q);w.u();p.h(0);X.l(!1,
!1)}C.set("s129");l.h(1);h.h(0);p.u();c.clearColor(1,0,0,1);c.clear(c.COLOR_BUFFER_BIT);X.l(!1,!1);C.set("s130");I.u();w.h(0);p.h(1);y.h(2);X.l(!1,!1)}},I:function(){}}}();var Wc=function(){var a={instance:function(b){var d=b.cg,f=b.Yf,l=b.pd,p=b.background?b.background:Z.ki(),w=b.pa,h={scale:1,offsetX:0,offsetY:0},m=null;b.Xf&&(h.scale=b.Xf.scale,h.offsetY=b.Xf.offsetY);return{ei:function(){return w},Xh:function(){return p},set:function(){m=fb.gm();fb.Bj(h);fb.xe();fb.ye();Aa.tj(l,p,!1,!1)},M:function(){fb.Bj(m)},
cc:function(){return{modelURL:d,materialsURLs:f,background:p.cc(!1),pd:l.cc(!1),pa:w.cc(!0)}},jm:function(){return l.cc(!1)},zp:function(q){p.h(q)},I:function(){l.remove();w.remove();b.background&&p.remove()}}},Zc:function(b,d,f){function l(){if(3===++m&&d){var q=a.instance({cg:b.modelURL,Yf:b.materialsURLs,background:p,pd:w,pa:h});d(q)}}var p=null,w=null,h=null,m=0;Z.Zc(b.background,function(q){!q&&f?f():(p=q,l())});Z.Zc(b.dataState,function(q){!q&&f?f():(w=q,l())});Z.Zc(b.light,function(q){!q&&
f?f():(h=q,l())})}};return a}();return id||JEELIZVTO}(),ld=function(){function ea(Fa,Na){var Ka=Object.prototype.toString.call(Fa),wb=0,La=Fa.length;if("[object Array]"===Ka||"[object NodeList]"===Ka||"[object HTMLCollection]"===Ka||"[object Object]"===Ka||"undefined"!==typeof jQuery&&Fa instanceof jQuery||"undefined"!==typeof Elements&&Fa instanceof Elements)for(;wb<La;wb++)Na(Fa[wb]);else Na(Fa)}var ha=function(Fa,Na){function Ka(){var La=[];this.add=function(Fb){La.push(Fb)};var lb,Ab;this.call=
function(){lb=0;for(Ab=La.length;lb<Ab;lb++)La[lb].call()};this.remove=function(Fb){var Ob=[];lb=0;for(Ab=La.length;lb<Ab;lb++)La[lb]!==Fb&&Ob.push(La[lb]);La=Ob};this.length=function(){return La.length}}function wb(La,lb){if(La)if(La.resizedAttached)La.resizedAttached.add(lb);else{La.resizedAttached=new Ka;La.resizedAttached.add(lb);La.resizeSensor=document.createElement("div");La.resizeSensor.className="resize-sensor";La.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";
La.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div>';
La.appendChild(La.resizeSensor);La.resizeSensor.offsetParent!==La&&(La.style.position="relative");var Ab=La.resizeSensor.childNodes[0],Fb=Ab.childNodes[0],Ob=La.resizeSensor.childNodes[1],Zb,Lb,hc,Mb,tc=La.offsetWidth,uc=La.offsetHeight,ic=function(){Fb.style.width="100000px";Fb.style.height="100000px";Ab.scrollLeft=1E5;Ab.scrollTop=1E5;Ob.scrollLeft=1E5;Ob.scrollTop=1E5};ic();var vc=function(){Lb=0;Zb&&(tc=hc,uc=Mb,La.resizedAttached&&La.resizedAttached.call())};lb=function(){hc=La.offsetWidth;Mb=
La.offsetHeight;(Zb=hc!=tc||Mb!=uc)&&!Lb&&(Lb=window.requestAnimationFrame(vc));ic()};var jc=function(kc,lc,wc){kc.attachEvent?kc.attachEvent("on"+lc,wc):kc.addEventListener(lc,wc)};jc(Ab,"scroll",lb);jc(Ob,"scroll",lb)}}ea(Fa,function(La){wb(La,Na)});this.detach=function(La){ha.detach(Fa,La)}};ha.detach=function(Fa,Na){ea(Fa,function(Ka){if(Ka){if(Ka.resizedAttached&&"function"==typeof Na&&(Ka.resizedAttached.remove(Na),Ka.resizedAttached.length()))return;Ka.resizeSensor&&(Ka.contains(Ka.resizeSensor)&&
Ka.removeChild(Ka.resizeSensor),delete Ka.resizeSensor,delete Ka.resizedAttached)}})};return ha}(),sc={glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",appstaticURL:"https://appstatic.jeeliz.com/"},ob={notLoaded:-1,initializing:0,realtime:2,loadingModel:3,paused:4},jd={isRT:!0,sku:void 0,materialsReplacements:"",mode:ob.notLoaded},Sa=Object.assign({},jd),kb={displayWidth:-1,displayHeight:-1,cvWidth:-1,cvHeight:-1},kd={cv:null,container:null,adjust:null,adjustNotice:null,adjustExit:null,loading:null,
trackIframe:null},fc=null,Ec=null,Ba=Object.assign({},kd),Md={ADJUST_START:null,ADJUST_END:null,LOADING_START:null,LOADING_END:null},Rc=null,Yb={enabled:!1,callback:null,interval:1E3},Cc={error:!1},qc=null,gc=null,Dc="undef",Va=id,xb={start:function(ea){var ha=Object.assign({settings:null,NNCPath:null,assetsPath:sc.appstaticURL+"jeefit/",catalog:null,faceDetectionCallback:null,faceDetectionInterval:1E3,placeHolder:null,canvas:null,onError:null,callbackReady:null,onWebcamGet:null,callbacks:{},searchImageMask:null,
searchImageColor:null,searchImageRotationSpeed:null,isShadow:!0,isRequestCamera:!0,sku:null,modelStandalone:null},ea);console.log("INFO in JeelizVTOWidget.js: start()");return new Promise(function(Fa,Na){if(Sa.mode!==ob.notLoaded)xb.resume().catch(function(wb){}).finally(Fa);else{pa();if(ha.settings)for(var Ka in ha.settings)sc[Ka]=ha.settings[Ka];ha.NNCPath&&Va.set_NNCPath(ha.NNCPath);ha.faceDetectionCallback&&(Yb.enabled=!0,Yb.callback=ha.faceDetectionCallback,Yb.interval=ha.faceDetectionInterval);
Rc=Object.assign({},Md,ha.callbacks);Ba.container=ha.placeHolder||document.getElementById("JeelizVTOWidget");if(!Ba.container)throw Error("Cannot find a <div> element with id=JeelizVTOWidget to append the VTO widget.");Ba.cv=ha.canvas||document.getElementById("JeelizVTOWidgetCanvas");Ba.cv||(Ba.cv=document.createElement("canvas"),Ba.container.appendChild(Ba.cv));Ba.cv.style.position="absolute";Ba.loading=document.getElementById("JeelizVTOWidgetLoading");Cc.error=ha.onError;gc=ha.callbackReady;Kb();
Ka=tb(Ba.container);if(!Ka.width)return Promise.reject("PLACEHOLDER_NULL_WIDTH");if(!Ka.height)return Promise.reject("PLACEHOLDER_NULL_HEIGHT");qb(!0);Sc();(ha.searchImageMask||ha.searchImageColor||ha.searchImageRotationSpeed)&&Va.set_loading(ha.searchImageMask,ha.searchImageColor,ha.searchImageRotationSpeed);Sa.mode=ob.initializing;Dc=ha.assetsPath;qc=ha.catalog;if(ha.onWebcamGet)Va.onWebcamGet(ha.onWebcamGet);Ka={basePath:Dc,cv:Ba.cv,isRequestCamera:ha.isRequestCamera,callbackReady:ja};qb(!0);Va.init2(Ka).catch(function(wb){Sa.isRT=
!1;eb(wb||"NO_ERROR_LABEL");Na()});Va.onHalfLoad(function(){!1===ha.isShadow&&Va.switch_shadow(!1);ha.sku?xb.load_glassesDB(ha.sku,Fa,ha.materialsReplacements):ha.modelStandalone?xb.load_modelStandalone(ha.modelStandalone,Fa):Fa()})}})},destroy:function(){return Va.destroy().then(function(){Object.assign(Sa,jd);gc=qc=null;Object.assign(Ba,kd)})},pause:function(ea){if(!Sa.isRT||!Va.ready)return Promise.reject();Sa.mode=ob.paused;var ha=Va.switch_sleep(!0,ea);return ea?ha:Promise.resolve(ha)},resume:function(ea){if(!Sa.isRT||
!Va.ready)return Promise.reject();Sa.mode=ob.realtime;var ha=Va.switch_sleep(!1,ea);return ea?ha:Promise.resolve(ha)},set_videoRotation:function(ea){Sa.isRT&&Va.set_videoRotation(ea)},set_videoSizes:function(ea,ha,Fa,Na,Ka,wb){Sa.isRT&&Va.set_videoSizes(ea,ha,Fa,Na,Ka,wb)},resize:function(){fc&&clearTimeout(fc);fc=setTimeout(function(){fc&&clearTimeout(fc);fc=null;qb(!0)},50)},set_scale:function(ea){Va.set_scale(ea)},reset_resizeSensor:Sc,capture_image:function(ea,ha,Fa){Va&&Va.ready?Va.capture_image(ea,
ha,Fa,!1):ha(!1)},toggle_loading:function(ea){ea?(ra(Ba.loading),rc("LOADING_START")):(Oa(Ba.loading),rc("LOADING_END"))},load_modelStandalone:function(ea,ha){if(Sa.mode===ob.notLoaded)throw Error("You should call JEELIZVTOWIDGET.start() first");if(!Sa.isRT)throw Error("Loading standalone models is only available in RT mode");Sa.mode===ob.paused&&xb.resume().catch(function(Ka){});Sa.mode=ob.loadingModel;xb.toggle_loading(!0);var Fa=function(){xb.toggle_loading(!1);ha&&ha()},Na="undef";"string"===
typeof ea?(Na=ea,Ja(ea,Na).then(Fa).catch(Ua)):(Na="RANDOM_SKU_"+Date.now().toString(),Qc(Na,ea,Fa));Sa.sku=Na;Sa.materialsReplacements=""},load_glassesDB:function(ea,ha,Fa){if(Sa.mode===ob.notLoaded)throw Error("You should call JEELIZVTOWIDGET.start() first");if(Sa.isRT){xb.toggle_loading(!0);var Na=Fa?JSON.stringify(Fa):"";ea===Sa.sku&&Na===Sa.materialsReplacements?(xb.toggle_loading(!1),ha&&ha()):(Sa.sku=ea,Sa.materialsReplacements=Na,Sa.mode=ob.loadingModel,Sa.mode===ob.paused&&xb.resume().catch(function(Ka){}),
ea?qc&&qc[ea]?Wb(ea,qc[ea],ha,Fa):ta(sc.glassesDBURL+ea).then(function(Ka){if(Ka.error)return Ua();Wb(ea,Ka.intrinsic,ha,Fa)}).catch(Ua):(Sa.mode=ob.realtime,xb.toggle_loading(!1),Va.start_rendering(),ha&&ha()))}},enter_adjustMode:Xb,exit_adjustMode:zb,set_LUT:function(ea){return Va&&Va.ready?Va.set_LUT(ea||null):Promise.reject("NOT_READY")}};return xb}();
JEELIZVTOWIDGET={VERSION:JEELIZVTO.VERSION,request_cameraVideoStream:JEELIZVTO.request_cameraVideoStream,start:JeelizVTOWidget.start,pause:JeelizVTOWidget.pause,resume:JeelizVTOWidget.resume,load:JeelizVTOWidget.load_glassesDB,load_modelStandalone:JeelizVTOWidget.load_modelStandalone,capture_image:JeelizVTOWidget.capture_image,set_videoRotation:JeelizVTOWidget.set_videoRotation,resize:JeelizVTOWidget.resize,set_scale:JeelizVTOWidget.set_scale,set_videoSizes:JeelizVTOWidget.set_videoSizes,destroy:JeelizVTOWidget.destroy,
enter_adjustMode:JeelizVTOWidget.enter_adjustMode,exit_adjustMode:JeelizVTOWidget.exit_adjustMode,set_LUT:JeelizVTOWidget.set_LUT,reset_resizeSensor:JeelizVTOWidget.reset_resizeSensor};

export {JEELIZVTO, JEELIZVTOWIDGET};
/* eslint-enable */
