<!DOCTYPE html>
<html>
<head>
    <title>JEELIZ VTO WIDGET INTEGRATION DEMO</title>
    <meta charset='utf-8' />
    <!-- Forbid resize on pinch with IOS Safari: -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
    <!-- INCLUDE MAIN SCRIPT: -->
    <script src='dist/JeelizVTOWidget.js'></script>
    <!-- For icons adjust fame or resize canvas -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <!-- Font for the header only: -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet">
    <!-- main stylesheet: -->
    <link rel='stylesheet' href='css/JeelizVTOWidget.css' />
    <script>
        function activateCameraAndWidget() {
            JEELIZVTOWIDGET.start({
                isShadow: get_isShadow(),
                sku: get_initialSKU(),
                searchImageMask: 'https://appstatic.jeeliz.com/jeewidget/images/target512.jpg',
                searchImageColor: 0xeeeeee,
                callbackReady: function() {
                    console.log('INFO: JEELIZVTOWIDGET is ready :)');
                },
                onError: function(errorLabel) {
                    alert('An error happened. errorLabel =' + errorLabel)
                    // Error handling code here
                }
            });
        }

        function get_initialSKU() {
            const queryString = window.location.search;
            const URLParams = new URLSearchParams(queryString);
            const sku = URLParams.get('sku') || 'rayban_aviator_or_vertFlash';
            console.log('Initial SKU =', sku);
            return sku;
        }

        function get_isShadow() {
            const queryString = window.location.search;
            const URLParams = new URLSearchParams(queryString);
            return URLParams.get('isHideShadow') ? false : true;
        }
    </script>
</head>
<body>
    <div class='content'>
        <div class='header'>
            <div class="headerTitle">Jeeliz VTO Widget</div>      
        </div>

        <!-- Activation button for the camera and widget -->
        <button onclick="activateCameraAndWidget()">Activate Camera</button>

        <div id='JeelizVTOWidget'>
            <canvas id='JeelizVTOWidgetCanvas'></canvas>
            
            <div class='JeelizVTOWidgetControls JeelizVTOWidgetControlsTop'>
                <!-- Adjust and Resize Widget Buttons -->
                <button id='JeelizVTOWidgetAdjust'>
                    <div class="buttonIcon"><i class="fas fa-arrows-alt"></i></div>Adjust
                </button>
                <button id='buttonResizeCanvas' onclick='test_resizeCanvas();'>
                    <div class="buttonIcon"><i class="fas fa-sync-alt"></i></div>Resize widget
                </button>
            </div>

            <div class='JeelizVTOWidgetControls' id='JeelizVTOWidgetChangeModelContainer'>
                <!-- Model Change Buttons -->
                <button onclick="JEELIZVTOWIDGET.load('rayban_aviator_or_vertFlash')">Model 1</button>
                <button onclick="JEELIZVTOWIDGET.load('rayban_round_cuivre_pinkBrownDegrade')">Model 2</button>
                <button onclick="load_modelBySKU()">by SKU</button>
            </div>

            <div id='JeelizVTOWidgetAdjustNotice'>
                Move the glasses to adjust them.
                <button class='JeelizVTOWidgetBottomButton' id='JeelizVTOWidgetAdjustExit'>Quit</button>
            </div>

            <div id='JeelizVTOWidgetLoading'>
                <div class='JeelizVTOWidgetLoadingText'>LOADING...</div>
            </div>
        </div>
    </div>
</body>
</html>
